<!DOCTYPE html><html><head><meta httpEquiv="X-UA-Compatible" content="IE=edge" /><link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" /><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Fira+Sans:ital,wght@0,400;0,700;1,400&amp;family=Merriweather:wght@900&amp;display=swap" /><meta name="next-font-preconnect" /><meta name="viewport" content="width=device-width" /><meta charSet="utf-8" /><link rel="icon" type="image/svg+xml" href="/favicon.svg" /><link rel="icon" type="image/png" href="/favicon.png" /><script src="https://cdn.jsdelivr.net/gh/virae/we-stand-with-ukraine@v1.0.1/badge.js" async></script><meta name="next-head-count" content="5" /><link rel="preload" href="/_next/static/css/fdf96e2d28f84db9.css" as="style" /><link rel="stylesheet" href="/_next/static/css/fdf96e2d28f84db9.css" data-n-g /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-d6ae476328e4999d.js" defer></script><script src="/_next/static/chunks/framework-16e77b82cacc706a.js" defer></script><script src="/_next/static/chunks/main-68c5e4c215d099d8.js" defer></script><script src="/_next/static/chunks/pages/_app-44f61a2cef8d7808.js" defer></script><script src="/_next/static/chunks/b2e984c5-e147f381a6cdf27d.js" defer></script><script src="/_next/static/chunks/777-ba77e6351a7febe8.js" defer></script><script src="/_next/static/chunks/187-6db1c4b7e3f7ede5.js" defer></script><script src="/_next/static/chunks/260-6f88113c6016c0d4.js" defer></script><script src="/_next/static/chunks/pages/posts/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bslug%5D-28dc5f2a46068af2.js" defer></script><script src="/_next/static/Jumf4OQwyLXS86pnKuxQZ/_buildManifest.js" defer></script><script src="/_next/static/Jumf4OQwyLXS86pnKuxQZ/_ssgManifest.js" defer></script><script src="/_next/static/Jumf4OQwyLXS86pnKuxQZ/_middlewareManifest.js" defer></script><style>
/**
 * Building on the RNWeb reset:
 * https://github.com/necolas/react-native-web/blob/master/packages/react-native-web/src/exports/StyleSheet/initialRules.js
 */
html, body, #__next {
  width: 100%;
  /* To smooth any scrolling behavior */
  -webkit-overflow-scrolling: touch;
  margin: 0px;
  padding: 0px;
  /* Allows content to fill the viewport and go beyond the bottom */
  min-height: 100%;
}
#__next {
  flex-shrink: 0;
  flex-basis: auto;
  flex-direction: column;
  flex-grow: 1;
  display: flex;
  flex: 1;
}
html {
  scroll-behavior: smooth;
  /* Prevent text size change on orientation change https://gist.github.com/tfausak/2222823#file-ios-8-web-app-html-L138 */
  -webkit-text-size-adjust: 100%;
  height: 100%;
}
body {
  display: flex;
  /* Allows you to scroll below the viewport; default value is visible */
  overflow-y: auto;
  overscroll-behavior-y: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -ms-overflow-style: scrollbar;
}
</style><style id="react-native-stylesheet">[stylesheet-group="0"]{}
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}
body{margin:0;}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}
input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}
[stylesheet-group="0.1"]{}
:focus:not([data-focusvisible-polyfill]){outline: none;}
[stylesheet-group="0.5"]{}
.css-4rbku5{background-color:rgba(0,0,0,0.00);color:inherit;font:inherit;list-style:none;margin-bottom:0px;margin-left:0px;margin-right:0px;margin-top:0px;text-align:inherit;text-decoration:none;}
.css-18t94o4{cursor:pointer;}
[stylesheet-group="1"]{}
.css-1dbjc4n{-ms-flex-align:stretch;-ms-flex-direction:column;-ms-flex-negative:0;-ms-flex-preferred-size:auto;-webkit-align-items:stretch;-webkit-box-align:stretch;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-basis:auto;-webkit-flex-direction:column;-webkit-flex-shrink:0;align-items:stretch;border:0 solid black;box-sizing:border-box;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;flex-basis:auto;flex-direction:column;flex-shrink:0;margin-bottom:0px;margin-left:0px;margin-right:0px;margin-top:0px;min-height:0px;min-width:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;padding-top:0px;position:relative;z-index:0;}
.css-901oao{border:0 solid black;box-sizing:border-box;color:rgba(0,0,0,1.00);display:inline;font:14px -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;margin-bottom:0px;margin-left:0px;margin-right:0px;margin-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;padding-top:0px;white-space:pre-wrap;word-wrap:break-word;}
.css-16my406{color:inherit;font:inherit;white-space:inherit;}
[stylesheet-group="2"]{}
.r-1udh08x{overflow-x:hidden;overflow-y:hidden;}
.r-xoduu5{display:-webkit-inline-box;display:-moz-inline-box;display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;}
[stylesheet-group="2.1"]{}
.r-gdo61v{margin-bottom:1em;margin-top:1em;}
.r-100r6m0{margin-bottom:0.67em;margin-top:0.67em;}
.r-1fcj2ci{margin-bottom:0.83em;margin-top:0.83em;}
.r-1e3jtjs{margin-bottom:1.33em;margin-top:1.33em;}
[stylesheet-group="2.2"]{}
.r-97e31f{padding-bottom:env(safe-area-inset-bottom);}
.r-bv2aro{padding-left:env(safe-area-inset-left);}
.r-hxflta{padding-right:env(safe-area-inset-right);}
.r-10xqauy{padding-top:env(safe-area-inset-top);}
.r-150rngu{-webkit-overflow-scrolling:touch;}
.r-eqz5dr{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-direction:column;flex-direction:column;}
.r-16y2uox{-ms-flex-positive:1;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;}
.r-1wbh5a2{-ms-flex-negative:1;-webkit-flex-shrink:1;flex-shrink:1;}
.r-11yh6sk{overflow-x:hidden;}
.r-1rnoaur{overflow-y:auto;}
.r-1sncvnh{-webkit-transform:translateZ(0px);transform:translateZ(0px);}
.r-gtdqiz{position:-webkit-sticky;position:sticky;}
.r-ipm5af{top:0px;}
.r-mhe3cw{z-index:10;}
.r-1mlwlqe{-ms-flex-preferred-size:auto;-webkit-flex-basis:auto;flex-basis:auto;}
.r-417010{z-index:0;}
.r-1niwhzg{background-color:rgba(0,0,0,0.00);}
.r-vvn4in{background-position:center;}
.r-u6sd8q{background-repeat:no-repeat;}
.r-4gszlv{background-size:cover;}
.r-1p0dtai{bottom:0px;}
.r-1pi2tsx{height:100%;}
.r-1d2f490{left:0px;}
.r-u8s1d{position:absolute;}
.r-zchlnj{right:0px;}
.r-13qz1uu{width:100%;}
.r-1wyyakw{z-index:-1;}
.r-ehq7j7{background-size:contain;}
.r-6e8ixz{font-size:2em;}
.r-vw2c0b{font-weight:bold;}
.r-36ujnk{font-style:italic;}
.r-1lijs1h{font-size:1.5em;}
.r-1pz39u2{-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;-webkit-align-self:stretch;align-self:stretch;}
.r-18u37iz{-ms-flex-direction:row;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;flex-direction:row;}
.r-tzz3ar{-ms-flex-wrap:nowrap;-webkit-box-lines:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;}
.r-lltvgl{overflow-x:auto;}
.r-buy8e9{overflow-y:hidden;}
.r-tg2c11{font-size:1.17em;}
.r-1pm8pkb{font-family:Courier;}
.r-majxgm{font-weight:500;}
.r-bzi31h{font-size:1em;}
.r-1loqt21{cursor:pointer;}
.r-10s8ix2{color:rgba(118,255,3,1.00);}
.r-me1f0u{font-family:Fira Sans;}
.r-1b43r93{font-size:14px;}
.r-17tb59b{opacity:0.7;}</style><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Fira+Sans:ital,wght@0,400;0,700;1,400&family=Merriweather:wght@900&display=swap"/></head><body><div id="__next"><div style="-webkit-flex: 1; ms-flex: 1 1 0%; flex: 1;" class="css-1dbjc4n r-97e31f r-bv2aro r-hxflta r-10xqauy"><canvas style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: -1000;"></canvas><div style="-webkit-flex: 1; ms-flex: 1 1 0%; flex: 1;" class="css-1dbjc4n r-97e31f r-bv2aro r-hxflta r-10xqauy"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div class="css-1dbjc4n r-gtdqiz r-ipm5af r-mhe3cw"><header role="banner" style="-webkit-align-items: center; align-items: center; background-color: rgba(33,33,33,0.30); -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; height: 40px; -webkit-justify-content: space-between; justify-content: space-between; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; padding-top: 3px; padding-bottom: 3px; width: 0px; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; ms-flex-pack: justify; -webkit-box-pack: justify;" id="animatedComponent" class="css-1dbjc4n"><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; max-width: 40%; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal;" class="css-1dbjc4n"><div style="border-top-color: rgba(239,239,239,1.00); border-right-color: rgba(239,239,239,1.00); border-bottom-color: rgba(239,239,239,1.00); border-left-color: rgba(239,239,239,1.00); border-top-left-radius: 50%; border-top-right-radius: 50%; border-bottom-right-radius: 50%; border-bottom-left-radius: 50%; border-top-width: 5px; border-right-width: 5px; border-bottom-width: 5px; border-left-width: 5px; display: flex; height: 70px; margin-right: 15px; width: 70px;" class="css-1dbjc4n r-1mlwlqe r-1udh08x r-417010"><div suppressHydrationWarning class="css-1dbjc4n r-1niwhzg r-vvn4in r-u6sd8q r-4gszlv r-1p0dtai r-1pi2tsx r-1d2f490 r-u8s1d r-zchlnj r-ipm5af r-13qz1uu r-1wyyakw"></div></div><div dir="auto" style="color: rgba(239,239,239,1.00); display: flex; font-family: Merriweather; font-size: 18px; font-style: normal; font-weight: 900; vertical-align: middle;" class="css-901oao r-gdo61v">Ramblings about technology, coding, and everything in between.</div></div><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; -webkit-justify-content: space-between; justify-content: space-between; width: 300px; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; ms-flex-pack: justify; -webkit-box-pack: justify;" class="css-1dbjc4n"><a href="/" dir="auto" role="link" class="css-4rbku5 css-18t94o4 css-901oao"><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal;" class="css-1dbjc4n r-xoduu5"><div style="height: 48px; margin-right: 5px; width: 48px;" class="css-1dbjc4n r-xoduu5 r-1mlwlqe r-1udh08x r-417010"><div suppressHydrationWarning class="css-1dbjc4n r-1niwhzg r-vvn4in r-u6sd8q r-ehq7j7 r-1p0dtai r-xoduu5 r-1pi2tsx r-1d2f490 r-u8s1d r-zchlnj r-ipm5af r-13qz1uu r-1wyyakw"></div></div><span style="color: rgba(239,239,239,1.00); font-family: Merriweather; font-size: 18px; max-width: 180px;" class="css-901oao css-16my406">Technology Corner</span></div></a><a href="https://tomasrav.me/" dir="auto" role="link" class="css-4rbku5 css-18t94o4 css-901oao"><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal;" class="css-1dbjc4n r-xoduu5"><div style="height: 48px; margin-right: 5px; width: 48px;" class="css-1dbjc4n r-xoduu5 r-1mlwlqe r-1udh08x r-417010"><div suppressHydrationWarning class="css-1dbjc4n r-1niwhzg r-vvn4in r-u6sd8q r-ehq7j7 r-1p0dtai r-xoduu5 r-1pi2tsx r-1d2f490 r-u8s1d r-zchlnj r-ipm5af r-13qz1uu r-1wyyakw"></div></div><span style="color: rgba(239,239,239,1.00); font-family: Merriweather; font-size: 18px; max-width: 180px;" class="css-901oao css-16my406">Main Website</span></div></a></div></header></div><main role="main" style="-webkit-flex: 1; ms-flex: 1 1 0%; flex: 1;" class="css-1dbjc4n"><div style="-webkit-align-self: center; align-self: center; background-color: rgba(239,239,239,1.00); border-top-left-radius: 3px; border-top-right-radius: 3px; margin-top: 50px; max-width: 800px; padding-right: 15px; padding-left: 15px; padding-top: 25px; padding-bottom: 25px; width: 98%; ms-flex-item-align: center; ms-grid-row-align: center;" class="css-1dbjc4n"><h1 aria-level="1" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-style: normal; font-weight: 900;" class="css-4rbku5 css-901oao r-6e8ixz r-100r6m0">Repurpose an Old Laptop to Ensure Your Data is Secure</h1><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; -webkit-justify-content: space-between; justify-content: space-between; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; ms-flex-pack: justify; -webkit-box-pack: justify;" class="css-1dbjc4n r-13qz1uu"><div style="-webkit-align-items: center; align-items: center; -webkit-flex-direction: row; ms-flex-direction: row; flex-direction: row; ms-flex-align: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal;" class="css-1dbjc4n"><a href="https://ozymandiasthegreat.medium.com/repurpose-an-old-laptop-to-ensure-your-data-is-secure-d92fa7baf821" dir="auto" role="link" style="margin-right: 10px;" class="css-4rbku5 css-18t94o4 css-901oao"><div style="opacity: 0.8;" class="css-1dbjc4n r-xoduu5 r-1mlwlqe r-1udh08x r-417010"><div suppressHydrationWarning class="css-1dbjc4n r-1niwhzg r-vvn4in r-u6sd8q r-4gszlv r-1p0dtai r-xoduu5 r-1pi2tsx r-1d2f490 r-u8s1d r-zchlnj r-ipm5af r-13qz1uu r-1wyyakw"></div></div></a></div><div dir="auto" class="css-901oao"><a href="/posts/2021/02/04" role="link" style="font-family: Fira Sans; font-size: 14px; font-style: normal; font-weight: 700; opacity: 0.75;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">2021-02-04</a></div></div></div><div style="-webkit-align-self: stretch; align-self: stretch; ms-flex-item-align: stretch; ms-grid-row-align: stretch;" class="css-1dbjc4n r-13qz1uu"><div style="border-top-color: rgba(239,239,239,1.00); border-right-color: rgba(239,239,239,1.00); border-bottom-color: rgba(239,239,239,1.00); border-left-color: rgba(239,239,239,1.00); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; border-top-width: 7px; border-right-width: 7px; border-bottom-width: 7px; border-left-width: 7px; width: -28px;" class="css-1dbjc4n r-1mlwlqe r-1udh08x r-417010"><div suppressHydrationWarning class="css-1dbjc4n r-1niwhzg r-vvn4in r-u6sd8q r-4gszlv r-1p0dtai r-1pi2tsx r-1d2f490 r-u8s1d r-zchlnj r-ipm5af r-13qz1uu r-1wyyakw"></div></div><div dir="auto" style="-webkit-align-self: center; align-self: center; background-color: rgba(239,239,239,1.00); color: rgba(33,33,33,0.70); font-family: Fira Sans; font-size: 14px; font-style: normal; font-weight: 400; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; max-width: 800px; text-align: center; vertical-align: middle; width: 98%; ms-flex-item-align: center; ms-grid-row-align: center;" class="css-901oao r-gdo61v"><svg viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 10px; width: 24px; height: 24px;" role="presentation"><path d="M10.08 10.86C10.13 10.53 10.24 10.24 10.38 10C10.68 9.44 11.19 9.15 11.88 9.14C12.33 9.14 12.74 9.34 13.03 9.63C13.31 9.94 13.5 10.37 13.5 10.8H15.3C15.28 10.33 15.19 9.9 15 9.5C14.85 9.12 14.62 8.78 14.32 8.5C12.87 7.16 10.18 7.35 8.95 8.87C7.66 10.54 7.63 13.46 8.94 15.13C10.15 16.62 12.8 16.83 14.24 15.5C14.55 15.25 14.8 14.94 15 14.58C15.16 14.22 15.27 13.84 15.28 13.43H13.5C13.5 13.64 13.43 13.83 13.34 14C13.25 14.19 13.13 14.34 13 14.47C12.67 14.73 12.28 14.87 11.86 14.87C11.5 14.86 11.2 14.79 10.97 14.64C10.72 14.5 10.5 14.27 10.38 14C9.88 13.1 9.96 11.85 10.08 10.86M12 2C6.5 2 2 6.5 2 12C2.53 25.27 21.5 25.26 22 12C22 6.5 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12C4.44 1.39 19.56 1.39 20 12C20 16.41 16.41 20 12 20Z" style="fill: #212121b2;"></path></svg>Image by <a href="https://unsplash.com/@markusspiske" role="link" style="-webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Markus Spiske</a> from <a href="https://unsplash.com" role="link" style="-webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Unsplash</a></div></div><div style="-webkit-align-self: center; align-self: center; background-color: rgba(239,239,239,1.00); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; max-width: 800px; padding-right: 15px; padding-left: 15px; padding-top: 25px; padding-bottom: 25px; width: 98%; ms-flex-item-align: center; ms-grid-row-align: center;" class="css-1dbjc4n"><article role="article" style="-webkit-align-self: center; align-self: center; -webkit-flex: 1; ms-flex: 1 1 0%; flex: 1; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; ms-flex-item-align: center; ms-grid-row-align: center;" class="css-1dbjc4n r-13qz1uu"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">So you bought a new shiny laptop. It's fast, it's powerful, the only question remaining is what to do with your old one?</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Selling would take a while and wouldn't bring in much value to speak of. It's much too slow to be of much use anymore.
And just throwing it out seems like a waste.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Well, you're in luck! Here's a perfect use for an old laptop,
that doesn't require much in a way of speed and processing power,
and brings priceless value:</span></div><div data-testid="html" class="css-1dbjc4n"><div data-testid="body" class="css-1dbjc4n"></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-vw2c0b"><span class="css-901oao css-16my406">Make it your backup server!</span></span></span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A laptop is perfect for this purpose - it has a built-in UPS.
That's an uninterruptable power supply, of which a laptop battery is an example. That's very important for servers, and doubly so backup servers. In case of a power outage, it allows your server to
finish its' current operations and gently shutdown, ensuring no
data corruption can occur.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Another nice thing about a laptop is the screen and the keyboard.
While definitely not a necessity, in case of trouble it makes troubleshooting much, much easier.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">And when I say an old laptop, I mean </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">old</span></span><span class="css-901oao css-16my406">. My backup server
runs on 13-year old ASUS X51L. It's not like I didn't have other laptops in the meantime, it's just that this beast is the most
reliable machine I've ever owned.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">So without further ado, onto what you'll need.</span></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="Prerequisites" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#Prerequisites" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Prerequisites</span></a></h2><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A router.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">An Ethernet cable.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">An old laptop.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A large external hard drive.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A USB stick.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A Linux (or a Windows with OpenSSH setup) computer for configuring everything.</span></div></li></div></ul><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A few notes on requirements.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A router is a must, you want to have a home network for several reasons. First and foremost you </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">don't</span></span><span class="css-901oao css-16my406"> want to expose your server
to the whole internet. It's fine to expose a single port for backups when you're away from home, but exposing everything requires configuring a firewall and locking down your server.
Which we will </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">not</span></span><span class="css-901oao css-16my406"> cover in this article. So yeah, I'm assuming you're operating within a home network.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">An external hard drive is not a hard requirement, in the sense that you can get by without it. Still, it's unusual for older laptops to have much space and internal hard drives are subject to heating related issues. So most likely you'll want at least 1TB external hard drive. Thankfully they're quite cheap these days.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A Linux computer is what I use daily, but since Windows includes OpenSSH these days, that works too. Unfortunately as of this writing Windows still ships with an outdated version of OpenSSH.
Read on how to work around that.</span></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="Pre-Setup-(Windows-only)" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#Pre-Setup-(Windows-only)" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Pre-Setup (Windows only)</span></a></h2><div style="background-color: rgba(33,33,33,0.10); border-left-color: rgba(33,33,33,0.75); border-left-width: 8px; margin-left: 20px; padding-right: 15px; padding-left: 15px; padding-top: 10px; padding-bottom: 10px;" class="css-1dbjc4n r-gdo61v"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you don't have administrator access to the Windows box, skip to the last paragraph of this section</span></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Open a PowerShell window and paste the following commands one by one, pressing </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406"> after each and waiting for it to complete.</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Set</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">ExecutionPolicy RemoteSigned </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">scope CurrentUser
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Invoke-Expression</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">(</span></span><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">New-Object</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> System</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">.</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Net</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">.</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">WebClient</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">)</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">.</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">DownloadString</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">(</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">'https://get.scoop.sh'</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">)</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">scoop install </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">g win32</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">openssh
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">C:\ProgramData\scoop\apps\win32</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">openssh\current\install</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">sshd</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">.</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">ps1
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Set-Service</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Name ssh</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">agent </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">StartupType Automatic
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(221,74,104,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Start-Service</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> ssh</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">agent</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The explanation: </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">scoop</span></span><span class="css-901oao css-16my406"> is a package manager for PowerShell, we set it up to install the latest version of OpenSSH from GitHub so you don't have to mess with system files and permissions.
We enable the running of remote scripts for the current user so we can run the scoop installer.
Then we install OpenSSH, set it up, and enable the ssh-agent service.
Now we have a working ssh setup and so we're done here for now.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now if you lack admin access, the above commands won't work and you're stuck using an outdated version of OpenSSH. Additionally, you can't start ssh-agent, which means for unattended backups to work the keys you generate later in the article need to be passwordless.
Other than that, you can still use this box to connect to the server and do automated backups.</span></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="The-Setup" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#The-Setup" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">The Setup</span></a></h2><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First, we're going to set up a basic Ubuntu server. For this article, I'll be using Ubuntu 20.04 Focal Fossa. Yes, it's not the latest version, but it's the latest long-term support release and that's great. It'll make updating the server easier since normal
updates are usually faster and less error-prone than dist-upgrades and its' LTS status ensures we get security patches for a good long while.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Basic-Server" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Basic-Server" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Basic Server</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Go to </span><a href="https://ubuntu.com/download/server" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">ubuntu.com</span></a><span class="css-901oao css-16my406"> and choose &quot;Manual Server Installation&quot;. Proceed to download the ISO and use your software of choice to make a bootable USB stick. One popular, cross-platform choice for this task is </span><a href="https://www.balena.io/etcher/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">etcher</span></a><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Boot your laptop (the old one) from the USB and let's walk through the installation.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you've never installed an operating system or if you've only used graphical installers this will be a little different.
You'll get a wall of text that you can safely ignore until this comes up:</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Select your language and press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406">. If you're reading this article, you understand English, so I suggest you go with that.
You won't be accessing the interface often and keeping default language helps avoid inconsistencies in the configuration.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now select your keyboard layout. This doesn't matter as much, but if your preferred keyboard layout lacks Latin characters go with English (US) instead.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Select your network interface. At this point, I should mention that you really want a wired network for your server. Even if all your devices connect to the router through WiFi, you want an Ethernet cable connecting your server to your router.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">A bit of an explanation: when both your backup server and client (your primary computer) are connected to the network through WiFi, the speed of the connection is halved. That means slower backups.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Another thing to keep in mind is that setting up WiFi in the bootloader is much more complicated than a wired connection.
Wired connections usually work out of the box, while WiFi requires additional software and configuration.
You'll see why this is important later in the article.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you plan to make backups through the Internet and you're connecting to the internet through a proxy, setting it up now is a good idea.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">For the sake of simplicity, I'm leaving this config blank.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now select package archive to download software packages and updates from. In the vast majority of cases, the Ubuntu installer will select the correct package archive based on your locale, but sometimes you might want to select something physically closer for speedier updates.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now select your disk for installation. If your laptop contains more than one disk, such as SDD and HDD, you probably want to select the faster one for performance.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Also, make sure to set up LVM and select &quot;Encrypt the LVM group with LUKS&quot;. Set a strong passphrase and note it down in your password manager (you are using a password manager, right?).</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">As this is going to be a backup server, and as such, contains a copy of all of your sensitive data, you really want to use encryption.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now you'll get to the overview screen where you can confirm one last time that everything is configured correctly.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">This is the last important step, create a user and set the hostname for your server. You may use the same password as you used for the disk since  I don't see a need to remember 2 passwords for a single machine/user.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll get offered to install the ssh server now. Do accept, cause we'll be doing most of our configuration over ssh.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The next screen offers popular server software, but as we don't need any of it, you can just skip it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now, wait for the installation to complete, select reboot, remove the USB stick when prompted and wait a bit to boot into your fresh server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">This is the part where having a screen and a keyboard comes in useful. Since we set up encryption, the boot process cannot complete without unlocking the disk.
We'll fix this by enabling remote unlocking soon, but for now, just enter the passphrase you set up for the disk.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll be dropped into a terminal prompt. Enter the user name you set up and the password when prompted.
You'll see a welcome message containing system information, ads for Canonical services, and some info about available updates.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First, we want to update. Type </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt update &amp;&amp; sudo apt upgrade</span><span class="css-901oao css-16my406"> and press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406">. When prompted to confirm type &quot;y&quot; and press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406">. Now, wait a while for the updates to complete.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now we can set up remote unlocking.</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First install </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">dropbear-initramfs</span></span><span class="css-901oao css-16my406">, you'll get a warning about </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">authorized_hosts</span></span><span class="css-901oao css-16my406"> but you can ignore it for now.</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt install dropbear-initramfs</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now edit dropbear configuration by entering </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/dropbear_initramfs/config</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Find line </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm"># DROPBEAR_OPTIONS =</span><span class="css-901oao css-16my406"> and uncomment it by removing &quot;# &quot; in front. Then put this after the = sign: </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">&quot;-p 2244 -s -j -k&quot;</span><span class="css-901oao css-16my406"> .</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL-o</span></span><span class="css-901oao css-16my406"> and </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406"> to save and </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL-x</span></span><span class="css-901oao css-16my406"> to exit nano.</span></div></li></div></ul></li></div></ul></li></div></ul><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Let's take a break here and explain. dropbear is a minimal ssh server that can run entirely from RAM and will allow us to connect to the bootloader environment remotely.
The options we put in the config have the following meaning:</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">-p 2244</span><span class="css-901oao css-16my406"> We change the default port.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">-s</span><span class="css-901oao css-16my406"> We disable the password login.</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">-j</span><span class="css-901oao css-16my406"> and </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">-k</span><span class="css-901oao css-16my406"> We disable port forwarding.</span></div></li></div></ul><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now we need to set up an RSA key pair if we don't already have it since we disabled password login. If you already have RSA keys set up on your primary computer, skip to the next paragraph.
On your primary computer run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh-keygen</span><span class="css-901oao css-16my406">, when prompted for the path, just press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406"> to accept the default, enter a strong passphrase twice (or no passphrase if you lack admin access on Windows). Then run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh-add</span><span class="css-901oao css-16my406"> to add your new key to the ssh-agent (You can skip this step if you're on Windows and lack admin access). Enter the passphrase when prompted. ssh-agent will remember the passphrase for you so you don't have to type it again for this user.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Let's add the public key to the </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">authorized_keys</span><span class="css-901oao css-16my406"> file so we can log in. Now, this is best done by logging in to your server from your primary computer. This will be the computer you use to control and configure your server and the only machine you can restart your server from. (You can always restart your server physically since it has a screen and a keyboard, but who wants that?)</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">On your server execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ip address</span><span class="css-901oao css-16my406">, you'll see something like this</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Find the line that says &quot;link/ether&quot; and look to the next line,
you'll see your server's IP address, mine's in this case is 10.0.2.5.
On your computer open the terminal. Connect to your server by executing </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh ozymandias@10.0.2.5</span><span class="css-901oao css-16my406">.
Replace &quot;ozymandias&quot; with the user name you set on the server and the IP address with the address you got from the </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ip</span><span class="css-901oao css-16my406"> command.
You'll be prompted for the password, that's fine, we only disabled password logins for the bootloader - not the server itself.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">In the ssh prompt execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/dropbear-initramfs/authorized_keys</span><span class="css-901oao css-16my406"> and enter the following</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">no-port-forwarding,no-agent-forwarding,no-x11-forwarding,command</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;/bin/cryptroot-unlock&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&lt;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">paste the contents of id_rsa.pub here</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&gt;</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll find </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">id_rsa.pub</span><span class="css-901oao css-16my406"> in </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">~/.ssh</span><span class="css-901oao css-16my406"> (</span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">C:\Users\&lt;your username&gt;\.ssh</span><span class="css-901oao css-16my406"> on Windows). To view contents quickly just run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">cat ~/.ssh/id_rsa.pub</span><span class="css-901oao css-16my406">. Note that you have to run this command on your primary computer outside the ssh prompt. Just open a second tab/window of the terminal, run this command and copy the long random string it outputs.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Then in nano, again, press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL-o</span></span><span class="css-901oao css-16my406"> and </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406"> to save and </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL-x</span></span><span class="css-901oao css-16my406"> to exit.
Then execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo update-initramfs -u</span><span class="css-901oao css-16my406"> and wait for it to complete. If you did everything correctly at this point we can restart the server remotely via ssh. Execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo systemctl reboot</span><span class="css-901oao css-16my406"> and wait a few minutes. Since we installed updates as well, the reboot might take a while.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Try to connect to your server with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh -p 2244 root@&lt;your server's ip address&gt;</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll get a warning about authenticity since we haven't connected to the bootloader before. Type &quot;yes&quot; and press </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406">.
Now you can enter the disk password, at which point you'll get a line about success and the connection will automatically close.
Wait a minute or so and you can log in to your server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">For the final touches, let's enable a passwordless login. On your primary computer (where you generated your key pair) execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh-copy-id &lt;username&gt;@&lt;server's IP address&gt;</span><span class="css-901oao css-16my406">.
Enter your password when prompted and once the command completes,
try to login to your server: </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh &lt;username&gt;@&lt;server's IP address&gt;</span><span class="css-901oao css-16my406">. You should be able to log in without a password now!</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now to disable password and root logins completely, on your server's ssh session execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/ssh/sshd_config</span><span class="css-901oao css-16my406">.
Find these lines and change values as follows:</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">PermitRootLogin</span></span><span class="css-901oao css-16my406"> uncomment and set to </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">no</span></span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">PasswordAuthentication</span></span><span class="css-901oao css-16my406"> uncomment and set to </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">no</span></span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">ChallengeResponseAuthentication</span></span><span class="css-901oao css-16my406"> make sure it's set to </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">no</span></span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">UsePAM</span></span><span class="css-901oao css-16my406"> set to </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">no</span></span></div></li></div></ul><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Save and close, then execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo service ssh restart</span><span class="css-901oao css-16my406">, log out and log back in.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Congratulations, we've enabled remote unlock and secure shell access. Now your backup server is secure, but you won't have to touch it physically unless something goes horribly wrong.</span></div><div style="background-color: rgba(33,33,33,0.10); border-left-color: rgba(33,33,33,0.75); border-left-width: 8px; margin-left: 20px; padding-right: 15px; padding-left: 15px; padding-top: 10px; padding-bottom: 10px;" class="css-1dbjc4n r-gdo61v"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you have multiple computers you plan to backup, you may want to delay disabling password login until you set them all up.
This will make the setup easier, but for guaranteed security </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">DO NOT FORGET TO DISABLE PASSWORD LOGINS</span></span></div></div><h4 aria-level="4" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 20px; font-style: normal; font-weight: 900;" id="Prevent-Hibernation-on-Lid-Close" class="css-4rbku5 css-901oao r-1e3jtjs"><a href="#Prevent-Hibernation-on-Lid-Close" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 20px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Prevent Hibernation on Lid Close</span></a></h4><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">One little thing you'll likely want to do as well is to disable sleep/hibernation when your server's (laptop's) lid is closed.
I mean, if it's sleeping we can't connect to it or perform backups. To do this, first, run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">This would be it, but disabling sleep may cause high CPU usage when the lid is closed. I </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">think</span></span><span class="css-901oao css-16my406"> it's a bug in Ubuntu that hasn't been fixed yet. To avoid trashing your CPU and fans run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/systemd/logind.conf</span><span class="css-901oao css-16my406"> and edit the following lines as so:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">HandleLidSwitch</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">ignore
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">HandleLidSwitchDocked</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">ignore</span></span></div></div></div></div></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="The-External-Drive" class="css-4rbku5 css-901oao r-gdo61v"><a href="#The-External-Drive" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">The External Drive</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Let's set up the external drive (or if your laptop contains 2 drives such as SSD and HDD and your HDD is sufficiently large, the HDD). First, connect it to the server and turn it on. Now let's go back to your primary computer and ssh into the server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">lsblk</span><span class="css-901oao css-16my406"> to see all disks and partitions. Find the one which says &quot;disk&quot; and the size matches your HDD, note the first column.
This is the device identifier and we'll use it to repartition the disk, format it, and encrypt it. Mine (and quite likely yours too) is &quot;sdb&quot;.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now before you proceed, make sure the disk doesn't contain anything you'd regret deleting, the next operations WILL DESTROY data. It might still be recoverable with something like </span><a href="https://www.cgsecurity.org/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">photorec</span></a><span class="css-901oao css-16my406"> but that's not guaranteed.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">All good? Then run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo sfdisk --delete /dev/sdb</span><span class="css-901oao css-16my406">. This will delete all partitions on the disk, so we can make one disk sized partition for storing backups.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">To create a partition run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">echo ',,,' | sudo sfdisk /dev/sdb</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Let's encrypt and format the newly created partition. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo cryptsetup -y luksFormat /dev/sdb1</span><span class="css-901oao css-16my406">. Replace &quot;sdb1&quot; with your device identifier and partition number. This will encrypt the partition, the &quot;-y&quot; flag makes the command prompt you for a passphrase. Again you </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">may</span></span><span class="css-901oao css-16my406"> use the same passphrase you used for the system disk and your user account. Since we'll set up automatic mounting, it doesn't make sense to use a different passphrase because anyone with access to your server will have access to your data anyway. Now mount the encrypted partition with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo cryptsetup luksOpen /dev/sdb1 sdb1_crypt</span><span class="css-901oao css-16my406"> and format it with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkfs.ext4 /dev/mapper/sdb1_crypt</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now let's set up a key file for automatic mounting at boot.
Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo dd if=/dev/urandom of=/root/.keyfile bs=1024 count=4</span><span class="css-901oao css-16my406">.
This will create a 4KB file with random data we'll use as a key.
Change its' permissions so it's only accessible by root with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo chmod 0400 /root/.keyfile</span><span class="css-901oao css-16my406"> and add it to your disk with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo cryptsetup luksAddKey /dev/sdb1 /root/.keyfile</span><span class="css-901oao css-16my406">. Again, replace &quot;sdb1&quot; with your device and partition number.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">To decrypt your disk at boot you need to edit </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/etc/crypttab</span><span class="css-901oao css-16my406">.
Rub </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo blkid</span><span class="css-901oao css-16my406"> to find your disk UUID, it's the line that starts with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/dev/sdb1</span><span class="css-901oao css-16my406">. Copy the UUID value and run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/crypttab</span><span class="css-901oao css-16my406">. Create a new line that looks like this, replacing UUID with what you copied:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">sdb1_crypt </span></span><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">UUID</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;b09de769-e102-42d0-87fc-08dee2df1e0e&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> /root/.keyfile luks,discard</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Save and close. Now edit </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/etc/fstab</span><span class="css-901oao css-16my406"> with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo nano /etc/fstab</span><span class="css-901oao css-16my406">:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">/dev/mapper/sdb1_crypt  /media/data  ext4   defaults  </span></span><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">0</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">  </span></span><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">2</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Reboot, check that </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/media/data</span><span class="css-901oao css-16my406"> is available with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ls -ld /media/data/</span><span class="css-901oao css-16my406"> and that it's size is correct with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">df -h /media/data/</span><span class="css-901oao css-16my406">.
If everything looks good, we just need to take ownership of the &quot;data&quot; directory and we're done with server setup. Do this with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo chown &lt;username&gt;:&lt;username&gt; /media/data</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="The-router" class="css-4rbku5 css-901oao r-gdo61v"><a href="#The-router" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">The router</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now we need to set up the router. At the very least you want to assign a static internal IP to the server so you can easily connect to it. If you want to back up over the internet, you also need to set up port forwarding.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Unfortunately, every router is quite different. Because of that, we'll cover </span><a href="https://dd-wrt.com/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">DD-WRT</span></a><span class="css-901oao css-16my406"> which is an open-source alternative router firmware. The steps you need to take will probably differ but should be similar enough.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First, log in to your router. The IP you need to enter into your browser will differ based on your router model and router settings but you can google that.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">To set up a static IP switch to the Services tab and scroll to the DHCP block.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Click the Add button, enter your server's MAC address, its' name, and the IP you want it to have. You can find your server's MAC address by ssh'ing into it and running </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ip address</span><span class="css-901oao css-16my406"> again. Right after the link/ether goes your server's MAC address in the form of xx:xx:xx:xx:xx:xx.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you don't plan to make backups outside your home network, we're done. Else, move on to NAT/QoS tab. You'll be dropped into port forwarding configuration by default.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Again, click the Add button. Enter a name for this port to make telling it apart easier. Choose TCP as the protocol. Leave the next field blank. Choose the port you'll connect to. Pretty much any port you can remember will do here, just don't use the default ssh port (22). Enter your server's internal IP address. It's the one you set in the previous step. Enter the port on the server we'll be connecting to, which is 22 since we'll be doing everything over ssh.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">To configure any additional ports just follow the last paragraph.
And we're done here.</span></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="The-clients" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#The-clients" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">The clients</span></a></h2><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now that our server is set up, we need to also set up our clients to back up to the server. Clients, in this case, refer to your computers and phones, as well as tablets and any digital device you can reasonably expect to back up. We'll cover non-Mac computers and Android phones here.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Windows-Client" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Windows-Client" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Windows Client</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Remember when I said we're done with the server? I lied. I'm sorry but finding reliable (that means well tested and preferably open source) backup software for Windows turned out to be trickier than I expected. We'll be using </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">rdiff-backup</span></span><span class="css-901oao css-16my406"> which is cross-platform, open-source, and actively used and maintained for 20 years or so. Unfortunately, it's command-line only and requires installation on both client and server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Its' other benefits are fast incremental backups, backups over ssh (and we already set that up), and a transparent storage scheme, meaning you can just open the backup folder and browse old versions of your files. This makes partial restoration easy and since no proprietary formats are used, if you find a software you like better, migration should be fairly easy.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First let's install it on the server, start up ssh, and once logged in run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt install rdiff-backup</span><span class="css-901oao css-16my406">.
That's it. Since it's in the Ubuntu repositories and the version there is sufficiently recent, this all we need to do.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now on your Windows computer, first let's check processor architecture. If it's a recent computer and it came with Windows you're pretty much guaranteed to be running 64 bit OS.
But double-checking doesn't hurt, so go to Settings app &gt;&gt; System &gt;&gt; About. Check System Type line. In case you're running 32 bit OS (why?) go to </span><a href="https://github.com/rdiff-backup/rdiff-backup/releases" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">rdiff-backup Github releases page</span></a><span class="css-901oao css-16my406"> and download &quot;rdiff-backup-2.0.5.win32exe.zip&quot;. If you're on 64 bit OS, you need to go to </span><a href="https://github.com/rdiff-backup/rdiff-backup/issues/494#issuecomment-748511757" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">this issue</span></a><span class="css-901oao css-16my406"> and download linked file, since official 64 bit builds aren't available yet.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now create a new directory somewhere, I'll be doing it in the root of the C: drive so I don't have to type long paths. Let's call it &quot;rdiff-backup&quot;. Extract &quot;rdiff-backup.exe&quot; from the zip you downloaded to this directory. Then create a new text file and call it &quot;rdiff-backup.bat&quot;. Note you may need to enable the display of file extensions in the Explorer options for this to work.
Since Windows determines file type based on extension, you won't be able to run the backup script if it doesn't end in &quot;bat&quot;.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Open &quot;rdiff-backup.bat&quot; in Notepad and paste the following:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,119,170,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,119,170,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">C</span></span><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">:\rdiff-backup\rdiff-backup.exe</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> -v5 </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">-b</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">--exclude-globbing-filelist</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;%~dpn0.txt&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">%1</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(238,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">%2</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> &gt;&gt; C:\rdiff-backup\rdiff-backup.log </span></span><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,0,85,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">2</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&gt;</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&amp;</span></span><span style="color: rgba(0,119,170,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,119,170,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">1</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Adjust the paths as needed. Then create another text file and name it &quot;rdiff-backup.txt&quot;. This one is the exclude list. All the paths and globs in it will be excluded from backups. I recommend putting your Downloads directory here at least since it's usually fairly large and once you decide to keep a file, you'll probably move it somewhere else.</span></div><div style="background-color: rgba(33,33,33,0.10); border-left-color: rgba(33,33,33,0.75); border-left-width: 8px; margin-left: 20px; padding-right: 15px; padding-left: 15px; padding-top: 10px; padding-bottom: 10px;" class="css-1dbjc4n r-gdo61v"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The paths in exclude list don't support backslashes. Replace them with regular slashes, e.g.:
C:\Users\Ozymandias\Downloads becomes C:/Users/Ozymandias/Downloads</span></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL+SHIFT+Right click</span></span><span class="css-901oao css-16my406"> directory background and select Open PowerShell here. Then type </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">.\rdiff-backup.bat C:/Users/&lt;your Windows username&gt; &lt;your server username&gt;@&lt;your server's IP address&gt;::/media/data/&lt;Windows computer name&gt;/&lt;Your windows username&gt;</span><span class="css-901oao css-16my406"> and run it.
Now this will take a while depending on how many files you have.
Don't worry, subsequent backups will be much faster since they'll only back up modified files. Go have a cup of coffee or watch a movie, once the command completes, check that there aren't critical errors, and we're good.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now typing this command every day to backup would be quite a pain, so let's automate our backups. Open the Start menu and find Task Scheduler. Once it loads, click Create Task... You'll get this dialog:</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Configure this screen like in the screenshot and click triggers.</span></div><div style="background-color: rgba(33,33,33,0.10); border-left-color: rgba(33,33,33,0.75); border-left-width: 8px; margin-left: 20px; padding-right: 15px; padding-left: 15px; padding-top: 10px; padding-bottom: 10px;" class="css-1dbjc4n r-gdo61v"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you don't have administrator access on this machine, select
Run only when user is logged on</span></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Click New... and configure as follows and click OK.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">On to the Actions tab.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Again, click New... and configure as follows.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now, this dialog is non-resizable so I can't show the arguments field completely.
There are 2 arguments (the %1 and %2 in the script), separated by space. The first is the directory you want to backup, most likely your User directory. For me it &quot;C:/Users/Ozymandias&quot;. The second is the directory on the server where to store the backup.
Like we ran manually it's </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">&lt;your username on server&gt;@&lt;server's IP address&gt;::/media/data/&lt;Windows computer name&gt;/&lt;your Windows username&gt;</span><span class="css-901oao css-16my406">. For me it's &quot;ozymandias@192.168.1.102::/media/data/Win10/Ozymandias&quot;.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Lastly, configure conditions in the Conditions tab and click OK.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now one last step. rdiff-backup does not automatically clean old backups, so your backup directory might get out of hand. To avoid that let's set up another scheduled task that runs daily to remove backups let's say older than 3 months.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Repeat the task creation steps, just set the time to say midnight (we set the backup to run at 10 PM) and the action to this:</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Again, the arguments aren't clearly visible, so here they are:
&quot;--remove-older-than 3M &lt;your backup directory's path&gt;&quot;.
For me it's &quot;--remove-older-than 3M ozymandias@192.168.1.102::/media/data/Win10/Ozymandias&quot;. Do note the capital M and that we're running rdiff-backup.exe, not the batch file.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Congratulations! You've successfully set up automated daily backups of your Windows computer.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Linux-Client" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Linux-Client" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Linux Client</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You can use rdiff-backup on Linux as well. It works and it works arguably better than it does on Windows. However, since something just as powerful and exceedingly simple is available for Linux I prefer to use that.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">I'm talking of course about Back In Time. It's a graphical application written in Python and QT that uses rsync for its' file operations. It also stores snapshots as a transparent versioned mirror of the source file system, but it hard-links unchanged files minimizing disk space usage.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Back In Time recommends installing from PPA but as of this writing the PPA hasn't been updated for Focal Fossa, much less Groovy Gorilla. Fortunately, Ubuntu archives contain a recent version, so to install just run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt install backintime-qt4 sshfs</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">On the first run, you'll be prompted to restore the configuration. Since we're setting up for the first time do decline. You'll be presented with a profile configuration dialog like this:</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Select mode SSH, don't bother with encryption. Back In Time supports transparently encrypting your backups with EncFS but EncFS has long-standing bugs that make it not a secure option.
And since we used Luks encryption on the server this is irrelevant anyway.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The host is your servers' IP address, the port is most likely 22, user - your username on the server, the path is </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/media/data</span><span class="css-901oao css-16my406"> if you followed this tutorial, leave cipher unchanged and select your private key. That's the one that DOESN'T end in .pub.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you set the passphrase for the key pair enter it in &quot;SSH private key&quot; and check &quot;Save Password to Keyring&quot;. The keyring is secure storage for sensitive information, it will keep your password encrypted until you log in and then make it available to Back In Time so you don't have to enter it every day.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now in the Advanced section enter your computer's name, your username on this computer and you can leave the profile as 1.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Do choose a schedule, I chose Every Day at 22:00. This will create a cron job for Back In Time that will run unattended, so you can just forget backups until you need to restore something.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Next the Include section. For the sake of simplicity, you can just choose your home folder and be done with it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The exclude section already contains quite a few entries. These are large directories that you really don't want to back up. Leave it as is, maybe add your Downloads folder, that's it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">The Auto-remove section is probably the biggest advantage Back In Time has over rdiff-backup. You can configure the automatic removal of old snapshots and not worry about it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Uncheck &quot;Older than&quot; and do check &quot;Smart remove&quot;. Configure which and how many snapshots you want to keep according to your preference and available disk space.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You can leave &quot;Options&quot; and &quot;Expert Options&quot; tabs as is, in the case of &quot;Expert Options&quot; it's better not to mess with. Click OK and you'll be brought to the main interface.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Here you can browse existing snapshots, take new snapshots and do a full restore. This is it, at 22:00 Back In Time will run, and tomorrow, and the day after. Your data is secure now.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Android-client" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Android-client" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Android client</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Android is different from desktop operating systems in a lot of ways, but the main issue for our purposes is there are no SFTP clients with automated sync. Well, that's not entirely true. There's </span><a href="https://play.google.com/store/apps/details?id=dk.tacit.android.foldersync.lite" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">FolderSync</span></a><span class="css-901oao css-16my406"> but it contains ads and I don't feel comfortable trusting my sensitive data to ad-supported software.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Instead we'll set up </span><a href="https://syncthing.net/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Syncthing</span></a><span class="css-901oao css-16my406">. It's free as in beer, free as in speech, well tested, secure, and it even supports some basic file versioning.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First, install it on the server and get it running. To do that execute following commands:</span></div><ul role="list" class="css-4rbku5 css-1dbjc4n"><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt install apt-transport-https</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">curl -s https://syncthing.net/release-key.gpg | sudo apt-key add -</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">echo &quot;deb https://apt.syncthing.net/ syncthing stable&quot; | sudo tee /etc/apt/sources.list.d/syncthing.list</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt update &amp;&amp; sudo apt install syncthing</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo systemctl enable syncthing@&lt;your username&gt;</span></div></li></div><div data-testid="marked-list-item" class="css-1dbjc4n r-1pz39u2 r-18u37iz r-tzz3ar"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><div class="css-1dbjc4n r-xoduu5"><span style="-webkit-align-self: flex-end; align-self: flex-end; -webkit-flex-grow: 0; flex-grow: 0; -webkit-flex-shrink: 0; flex-shrink: 0; font-size: 14px; text-align: right; width: 16.8px; ms-flex-item-align: end; ms-flex-positive: 0; -webkit-box-flex: 0; ms-flex-negative: 0;" data-testid="marker-box" class="css-901oao css-16my406">• </span></div></div><li role="listitem" class="css-4rbku5 css-1dbjc4n r-1wbh5a2"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo service syncthing@&lt;your username&gt; start</span></div></li></div></ul><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now, to set it up. On your primary computer run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">ssh -N -L 8384:127.0.0.1:8384 &lt;your server's username&gt;@&lt;your server's IP address&gt;</span><span class="css-901oao css-16my406">. This will forward connections to your computer's 8384 port to your server's 8384 port. If you get a message that port 8384 is already bound, just change the first 8384 to any number between 8000 and 8999.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Open </span><a href="http://localhost:8384" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">localhost:8384</span></a><span class="css-901oao css-16my406"> in your browser.
Then click Actions &gt;&gt; Settings.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Change Default Folder Path to </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">/media/data/syncthing</span><span class="css-901oao css-16my406"> or whatever is the path to your external disk. Then switch to the GUI tab.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Enter a username and a strong password. It's also a good idea to note down the password in your password manager. You may also set the theme to something easier on the eyes. Now, click Save. The page will reload and you'll be prompted for the username and password you just set up.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You may also want to remove the Default Folder now since we don't plan on storing files on the internal disk. To do that click on Default Folder to expand it, then Edit &gt;&gt; Remove. Confirm and we're done with the server for now.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">On the Android side, we'll be using </span><a href="https://play.google.com/store/apps/details?id=com.github.catfriend1.syncthingandroid" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Syncthing-Fork</span></a><span class="css-901oao css-16my406">. It also </span><a href="https://f-droid.org/en/packages/com.github.catfriend1.syncthingandroid/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">available on F-Droid</span></a><span class="css-901oao css-16my406"> and it's a good idea to set that up if you plan to also back up apps (app backup requires root though).</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Install and open it. Then click Add Folder button in the top right of the interface. For this example, we'll be setting up the camera folder (DCIM), but the steps are the same for any other location. Also note, if you use something like </span><a href="https://play.google.com/store/apps/details?id=com.google.android.apps.photos" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Google Photos</span></a><span class="css-901oao css-16my406"> or </span><a href="https://nextcloud.com/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Nextcloud</span></a><span class="css-901oao css-16my406"> to continuously upload your photos and free up space on your device, using syncthing to backup your camera folder doesn't make sense even with file versioning, because once the photos are deleted from the phone the changes will be propagated to the server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Enter the name of the folder. This doesn't much matter, it's only here so you know which folder you're working with. Then select the folder path. Do nothing with devices for now. For the Folder Type, I suggest you choose Send Only because we won't be making changes server-side. Do make sure Watch for changes is ON. Now select the versioning scheme and we're done. If you only transfer your photos manually choose Trashcan versioning with a sufficiently large Cleanout window to recover deleted files. Otherwise, if you clean out this folder more often, choose Simple scheme with something like 3 versions to keep per file.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now, switch to the Devices tab, and in the top right tap the Add Device button. On your computer, where you have syncthing web interface open, click Actions &gt;&gt; Show ID. On your phone click the QR code button in the right of the top row of the Add Device screen. Grant the Camera permission and scan the QR code on your computer's screen. Enter the name for the Device, that's your server and I named it humpty. Choose folders you want to sync.
Save your changes by tapping the checkmark button at the top.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Back on your computer, close the ID screen and you should see a notification about adding a device. Click add, switch to Sharing tab in the dialog that pops up, and mark Auto Accept before saving. This is so you don't have to go back to the web interface when adding new folders. That's it, now you can close the web interface. We won't be going back to it unless something goes wrong.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">On your phone, configure any additional folders you want to back up, paying attention to the versioning scheme you choose and selecting your server in the devices section.</span></div><h4 aria-level="4" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 20px; font-style: normal; font-weight: 900;" id="Backing-up-Apps" class="css-4rbku5 css-901oao r-1e3jtjs"><a href="#Backing-up-Apps" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 20px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Backing up Apps</span></a></h4><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll need to root for this, no way around it. There are backup solutions that claim to work without root and they fail on restore more often than not. Especially if you want to restore a backup on a new device for a seamless upgrade, these apps will fail you.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Rooted app backup solutions boil down to </span><a href="https://play.google.com/store/apps/details?id=com.keramidas.TitaniumBackup" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">TitaniumBackup</span></a><span class="css-901oao css-16my406"> and </span><a href="https://f-droid.org/en/packages/com.machiav3lli.backup/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">OAndBackupX</span></a><span class="css-901oao css-16my406">. These apps are pretty similar in what they do, with TitaniumBackup being older and theoretically more powerful, with a really horrible interface, and OAndBackupX being open source, easier to use, and judging from online reviews - more reliable when restoring. Personally, I've had great success with both of these apps, whether I'm restoring a backup on the same device after flashing a new ROM or setting up a new device from a backup.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Since OAndBackupX is open-source, it's what we'll cover in this article. Alas, it's only available on </span><a href="https://f-droid.org/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">F-Droid</span></a><span class="css-901oao css-16my406">, so you'll have to set that up.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Another thing to keep in mind is that most Android apps cannot be backed up. Or rather, restored. If an app depends on a remote server to function and/or uses encrypted keystore to store credentials, it will not function upon restore. There's really nothing you can do about this, and to save time and battery, better don't even try to back up these apps. Examples would be most Android games, Facebook, and Nextcloud.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">With that out of the way, we're ready to back up some apps. When you open OAndBackupX, you'll be presented with this:</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Firstly, note the little &quot;i&quot; in the top right. By clicking on it, you'll get a lot of links to learn in-depth about this app and ways to use it. The next thing of note is the action bar at the bottom of the screen. Click the cog in the action bar to access settings.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll do alright with defaults, but you'll want to change the location of backups. For that tap User preferences.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now tap the Backup folder and choose a location on your </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">internal</span></span><span class="css-901oao css-16my406"> SD card. You'll want an internal SD card to avoid permission issues, or you can format your external SD card as internal storage.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Next, go back to OAndBackupX's home screen. On the action bar at the bottom tap the calendar-looking icon to schedule a backup.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Tap the red button that looks like a new alarm. This will create a new scheduled backup titled All apps. Tap on this entry to edit it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Choose when you want the backups to happen. Some time at night when you're not using the phone is a good idea. Leave the interval as 1 day to have backups every day. Leave the filter as All apps. Set the Backup mode as APK and Data. Tap CUSTOM LIST to select which apps to backup. Then mark Enable toggle and we're done.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now, every night the apps you chose will be backed up to a folder you specified, and if you set up Syncthing to sync that folder,
synced to your server.</span></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="Bonus:-Back-up-Your-Online-Accounts" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#Bonus:-Back-up-Your-Online-Accounts" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Bonus: Back up Your Online Accounts</span></a></h2><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now that all your devices are backed up, you probably still have a lot of data stored in the cloud. You may think it's safe. It's almost certainly backed up. However, what if you get locked out of your account? Hacked? Or simply the cloud provider messes up big time, or worse - goes down? It's a good idea to have a local copy of your cloud data.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Alas, not all cloud providers provide an easy way to export your data. Much less the means to this automatically. I'm looking at you Facebook and Twitter. They only offer archives that take forever to generate and can only be downloaded for a limited time through a link sent to your email. This is sub-par, to say the least. On the other hand, Google and some other cloud providers offer most if not all of your data through open, free APIs that can be easily automated. We'll focus on these.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Cloud-Storage" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Cloud-Storage" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Cloud Storage</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">We'll be using </span><a href="https://rclone.org/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">rclone</span></a><span class="css-901oao css-16my406"> to sync our Google Drive to a local directory. It's a one-way sync, but for backup purposes, this will do great. Do note that rclone supports many more cloud providers than just Google. If you use Dropbox or OneDrive, they can be synced as well. For the sake of brevity, we'll focus on Google Drive since it's one of the most popular and one of the most complicated to set up.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Before we begin, go to </span><a href="https://console.developers.google.com/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Google API Console</span></a><span class="css-901oao css-16my406"> and create a new project. I suggest you name the new project after your server so it's easy to remember.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Click ENABLE APIs AND SERVICES, search for Drive, and enable &quot;Google Drive API&quot;. Then click Credentials in the sidebar.
Now we need to configure OAuth Consent Screen. This is something you need to do once and it doesn't much matter because we'll be the only ones using these APIs. Click the &quot;CONFIGURE CONSENT SCREEN&quot; button near the top right. Select &quot;EXTERNAL&quot; and click &quot;CREATE&quot;. Enter the application name, I suggest you use the project (server) name. Select contact emails as these are required, just enter your email. Again, it doesn't really matter as you'll be the only user. Click &quot;SAVE&quot; and then click &quot;OAuth consent screen&quot; in the sidebar. This is very important - click &quot;PUBLISH APP&quot;. Dismiss the pop-up and then click &quot;Credentials&quot; in the sidebar again.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now click the &quot;CREATE CREDENTIALS&quot; button at the top. Select OAuth Client ID. Select &quot;Desktop app&quot; and enter rclone as the name, then click Create. You'll get a pop-up with your client ID and client secret. Leave it at that for now, we're ready to set up the server.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">ssh into your server. Execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">curl https://rclone.org/install.sh | sudo bash</span><span class="css-901oao css-16my406">. Now run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">rclone config</span><span class="css-901oao css-16my406">. Choose &quot;n&quot; for new remote and enter a name. I'll be using &quot;gdrive&quot;. Enter &quot;drive&quot; for Google Drive. Now paste the client ID we got from the Google API console and press &quot;Enter&quot;. Do the same for client secret. Choose 1 as the scope. Leave &quot;root_folder_id&quot; blank. Leave the &quot;service_account_file&quot; blank as well. Now, for the advanced config.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Normally you shouldn't need to edit these values with the exception of Google Docs formats. By default rclone exports Google Docs as Microsoft Office documents. If instead, you want them in the Open Document format, press &quot;y&quot; to edit the advanced config. Leave all values as defaults. When prompted for export formats enter &quot;odt,ods,odp,svg&quot; and proceed to leave the rest as default too.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">When prompted to use auto config choose &quot;n&quot; for no since we're working on a remote machine. You'll get a rather long URL, copy and paste it into your browser.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll get a very scary warning, don't worry about it. It's only here because we haven't submitted the app for verification and we don't really need to go through that hassle. Click Advanced and then &quot;Go to &lt;app name you entered earlier&gt;&quot;. Agree to permission requests and when you get a verification code, copy it. Now paste it into your terminal. Press &quot;Enter&quot; to refuse to configure as Team Drive, press &quot;Enter&quot; again to confirm everything is OK, and then enter &quot;q&quot; to quit rclone configuration.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now to create a directory where we'll store Google Drive backup execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkdir -p /media/data/Google/Drive</span><span class="css-901oao css-16my406">. Let's run initial sync with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">rclone sync gdrive:/ /media/data/Google/Drive/</span><span class="css-901oao css-16my406">.
This will take a while depending on the size of your Google Drive.
Subsequent syncs will be much faster because they'll only download changes.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">When the command completes, we want to set up some automation.
Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">crontab -e</span><span class="css-901oao css-16my406"> and when prompted select nano as the editor.
You only need to do this once, subsequent runs will drop you straight into nano. Scroll to the end of the file and enter the following </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">0 */1 * * * rclone sync gdrive:/ /media/data/Google/Drive &gt;&gt; /home/ozymandias/rclone.log 2&gt;&amp;1</span><span class="css-901oao css-16my406">. Explanation: cron is a daemon that runs specified commands at specified intervals. </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">0 */1 * * *</span><span class="css-901oao css-16my406"> means run every hour. The command is rclone sync we already ran. The </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">&gt;&gt; /home/ozymandias/rclone.log</span><span class="css-901oao css-16my406"> redirects the output of the command to a log file. Do replace &quot;ozymandias&quot; with your user name. Finally, </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">2&gt;&amp;1</span><span class="css-901oao css-16my406"> concatenates errors and standard output into the same stream we redirect to the log file. Do check this log file sometimes to make sure everything is working.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Google-Photos" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Google-Photos" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Google Photos</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Since Google Photos got decoupled from Google Drive, backing them up is a bit of a pain in the behind. We could use rclone to do this as well since recent versions of rclone have support for the new API. However, rclone would only back up the files, without the metadata and your Google Photos creations.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Instead we'll use </span><a href="https://github.com/gilesknap/gphotos-sync" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">gphotos-sync</span></a><span class="css-901oao css-16my406">. It will back up pretty much all of Google Photos data, and since it can only download there's no risk of messing up your library.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Again, this app uses OAuth to authorize with Google, so we need to create a client ID and client secret for it. We also need to enable Photos Library API for our project.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">In Google API console click Dashboard in the sidebar, then ENABLE APIs AND SERVICES, and search for Photos Library API. Enable it.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">In the Credentials section click CREATE CREDENTIALS, select &quot;OAuth client ID&quot; and then select &quot;Desktop app&quot;. Enter &quot;gphotos-sync&quot; as the name and click CREATE. You can close the pop-up because for this app we'll be downloading formatted credentials file.
In the &quot;OAuth 2.0 Client IDs&quot; section, on the line that says &quot;gphotos-sync&quot; click the download button (the downwards facing arrow). Save the file as &quot;client_secret.json&quot; in your downloads directory.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now we're ready to install and authorize gphotos-sync. Let's create a directory where we'll store Google Photos data by running </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkdir -p /media/data/Google/Photos</span><span class="css-901oao css-16my406">. Then run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo snap install gphotos-sync</span><span class="css-901oao css-16my406"> to install the app. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo snap connect gphotos-sync:removable-media</span><span class="css-901oao css-16my406"> to enable access to the external hard drive. Now, run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">gphotos-sync</span><span class="css-901oao css-16my406"> without arguments once to create and symlink the snap directories. Create the config directory with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkdir -p ~</span><span class="css-901oao css-16my406">. Then on the computer where you downloaded the credentials open a new terminal in your downloads directory and execute </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">scp client_secret.json &lt;your username on the server&gt;@&lt;your server's IP address&gt;:/snap/gphotos-sync/current/.config/gphotos-sync</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">To authorize and perform initial sync run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">gphotos-sync /media/data/Google/Photos</span><span class="css-901oao css-16my406">. Once again you'll get a long URL you need to copy and paste into your browser. And once again you'll get a scary warning. Click Advanced and proceed to authorize the app.
When you get the authorization code, copy and paste it into your ssh session. Now, go make a cup of coffee while all your photos are downloaded.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Once you enjoyed your coffee and the command completed, let's automate this for the future. Again, we'll do this with a cron job. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">crontab -e</span><span class="css-901oao css-16my406">, scroll to last line and enter </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">15 */1 * * * gphotos-sync /media/data/Google/Photos &gt;&gt; /dev/null 2&gt;&amp;1</span><span class="css-901oao css-16my406">. Explanation: we've set it to run 15 minutes past every hour. Since gphotos-sync keeps log in the destination directory, we redirect its' output to /dev/null, i.e. we discard it.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="EMail" class="css-4rbku5 css-901oao r-gdo61v"><a href="#EMail" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">EMail</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">If you use a desktop email client, you can probably skip this step since your emails will be included in the desktop backup. Otherwise, read on. We'll use the mbsync utility included in the isync package to download our emails via IMAP to a local directory. This package is in the Ubuntu archives, so to install it just run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt install isync</span><span class="css-901oao css-16my406">.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now create a file called &quot;.mbsyncrc&quot; in your home directory on the server and put the following in it. To do that run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">cd ~ &amp;&amp; nano .mbsyncrc</span><span class="css-901oao css-16my406">.</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">IMAPAccount     ozymandias
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Host            imap.gmail.com
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">User            </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&lt;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">your username</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&gt;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">@gmail.com
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Pass            </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&lt;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">your password*</span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&gt;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">SSLType         IMAPS
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">CertificateFile /etc/ssl/certs/ca-certificates.crt
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">IMAPStore gmail
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Account   ozymandias
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">MaildirStore </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">local</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">SubFolders   Verbatim
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Path         /media/data/Google/GMail
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Inbox        /media/data/Google/GMail/Inbox
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Channel   ozymandias
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Master    :gmail:
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Slave     :local:
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Patterns  *
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">Create    Both
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">SyncState *
</span></div></div></div></div></div><div style="background-color: rgba(33,33,33,0.10); border-left-color: rgba(33,33,33,0.75); border-left-width: 8px; margin-left: 20px; padding-right: 15px; padding-left: 15px; padding-top: 10px; padding-bottom: 10px;" class="css-1dbjc4n r-gdo61v"><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You really shouldn't put your password in plain-text files.
Instead enable 2-factor authentication and create an app password for this.</span></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">You'll also need to enable IMAP in the Gmail settings. In Gmail click the cog in the top right &gt;&gt; See all settings &gt;&gt; Forwarding and POP/IMAP, select Enable IMAP and click Save changes.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Let's create the mail directory with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkdir -p /media/data/Google/Gmail</span><span class="css-901oao css-16my406"> and run initial sync with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mbsync --all</span><span class="css-901oao css-16my406">. Once it completes let's make a cron job for this task too. Again, run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">crontab -e</span><span class="css-901oao css-16my406">, scroll to last line and put </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">30 */1 * * * mbsync --all &gt;&gt; /home/ozymandias/mbsync.log 2&gt;&amp;1</span><span class="css-901oao css-16my406">. This time the cron line should already be pretty clear. We're running mbsync 30 minutes past every hour and saving log in our home directory.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">We used Gmail here, but with minor changes to the .mbsyncrc, you can use any mail provider that supports IMAP. Which in this day and age should mean all of them.</span></div><h3 aria-level="3" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900;" id="Calendar-and-Contacts" class="css-4rbku5 css-901oao r-gdo61v"><a href="#Calendar-and-Contacts" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 22px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Calendar and Contacts</span></a></h3><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Last but not least we're going to back up our calendars and contacts. For this task, we'll use a small Python utility call </span><a href="http://vdirsyncer.pimutils.org/en/stable/" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">vdirsyncer</span></a><span class="css-901oao css-16my406">. It supports Google, iCloud, and many more providers as long as they provide their data over CalDAV and CardDAV protocols. Again, for the sake of this article, we'll set up Google Calendar and Google Contacts backup.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">First, go to Google API console, click ENABLE APIs AND SERVICES, search for CalDAV API and Google Contacts CardDAV API, and enable them both. Then, in the Credentials section create credentials of type OAuth client ID, select Desktop app, and enter &quot;vdirsyncer&quot; as the name.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Then, install vdirsyncer with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">sudo apt update &amp;&amp; sudo apt install vdirsyncer python3-requests-oauthlib</span><span class="css-901oao css-16my406">. Create configuration directory - </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">mkdir -p ~/.vdirsyncer</span><span class="css-901oao css-16my406">. Now, let's create a config file with </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">nano ~/.vdirsyncer/config</span><span class="css-901oao css-16my406">. Put the following in the config file, replacing &lt;client ID&gt; and &lt;client secret&gt; with values you got from Google API console:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">general</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">status_path </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;~/.vdirsyncer/status/&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">storage local_calendar</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">type</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;filesystem&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">path </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;/media/data/Google/Calendar&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">fileext </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;.ics&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">storage local_contacts</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">type</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;filesystem&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">path </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;/media/data/Google/Contacts&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">fileext </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;.vcf&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">storage google_calendar</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">type</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;google_calendar&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">token_file </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;~/.vdirsyncer/gcal.auth&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">client_id  </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;&lt;client ID&gt;&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">client_secret </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;&lt;client secret&gt;&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">storage google_contacts</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">type</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;google_contacts&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">token_file </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;~/.vdirsyncer/gcard.auth&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">client_id  </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;&lt;client ID&gt;&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">client_secret </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;&lt;client secret&gt;&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">pair calendar</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">a </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;local_calendar&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">b </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;google_calendar&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">collections </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;from a&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">, </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;from b&quot;</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">conflict_resolution </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;b wins&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">metadata </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;color&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">, </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;displayname&quot;</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"></span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">pair contacts</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">a </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;local_contacts&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">b </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;google_contacts&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">collections </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;from a&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">, </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;from b&quot;</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">conflict_resolution </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;b wins&quot;</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">metadata </span></span><span style="background-color: rgba(255,255,255,0.50); color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(166,127,89,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">=</span></span><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"> </span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">[</span></span><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(102,153,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">&quot;displayname&quot;</span></span><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(153,153,153,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">]</span></span></div></div></div></div></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Save with </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL+o</span></span><span class="css-901oao css-16my406"> </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">Enter</span></span><span class="css-901oao css-16my406"> and close with </span><span style="font-family: Fira Sans;" class="css-901oao css-16my406 r-36ujnk"><span class="css-901oao css-16my406">CTRL+x</span></span><span class="css-901oao css-16my406">. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">vdirsyncer discover</span><span class="css-901oao css-16my406">. On the first run you'll once again get a long URL you should copy and open in your browser. You'll get a scary warning about an unverified app, just click Advanced and proceed. Once you grant permission for your calendar, copy the code and paste it into the terminal. Then you'll be prompted for each calendar in your Google account since it doesn't exist locally. Just enter &quot;y&quot; to create it every time.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Once the calendars are configured you'll get a long authorization URL for your contacts. The steps to take are exactly the same as for the calendar.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Now that vdirsyncer is authorized and aware of all our calendars and address books, we're ready to sync. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">vdirsyncer sync</span><span class="css-901oao css-16my406"> and then </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">vdirsyncer metasync</span><span class="css-901oao css-16my406">. Now, to automate this, let's create a cron job. Run </span><span style="background-color: rgba(33,33,33,0.10); font-family: Fira Code; font-size: 15.2px;" class="css-901oao css-16my406 r-majxgm">crontab -e</span><span class="css-901oao css-16my406">, scroll to the last line, and put this in it:</span></div><div style="background-color: rgba(245,242,240,1.00); margin-top: 8px; margin-right: 8px; margin-bottom: 8px; margin-left: 8px; overflow-x: scroll; overflow-y: scroll; padding-top: 16px; padding-right: 16px; padding-bottom: 16px; padding-left: 16px;" class="css-1dbjc4n r-150rngu r-18u37iz r-16y2uox r-1wbh5a2 r-lltvgl r-buy8e9 r-1sncvnh"><div class="css-1dbjc4n r-18u37iz"><div class="css-1dbjc4n r-150rngu r-eqz5dr r-16y2uox r-1wbh5a2 r-11yh6sk r-1rnoaur r-1sncvnh"><div class="css-1dbjc4n"><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">40 */1 * * * vdirsyncer sync &gt;&gt; /home/ozymandias/vdirsyncer.log 2&gt;&amp;1
</span></span></div><div dir="auto" style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao"><span style="color: rgba(0,0,0,1.00); font-family: Fira Code; font-size: 15.2px; height: 20.2px;" class="css-901oao css-16my406">50 */1 * * * vdirsyncer metasync &gt;&gt; /home/ozymandias/vdirsyncer.log 2&gt;&amp;1
</span></div></div></div></div></div><h2 aria-level="2" dir="auto" role="heading" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900;" id="Closing-Words" class="css-4rbku5 css-901oao r-1fcj2ci"><a href="#Closing-Words" role="link" style="color: rgba(33,33,33,1.00); font-family: Merriweather; font-size: 24px; font-style: normal; font-weight: 900; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">Closing Words</span></a></h2><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Data security is very important, as losing your data in this digital age can be devastating. By following this tutorial you took a major step in ensuring your data survives no matter what.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Ideally, you'd have a similar setup somewhere away from home for off-site backups. So that in the event of a disaster such as flooding, fire, or similar event that could physically destroy your backup server and devices, you'd still have a copy of your data that wasn't affected by this event. You should consider this going forward.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">I tried to make this tutorial as exhaustive as I could, even so, since I don't own any Apple devices, I couldn't cover those. I may have unintentionally made omissions elsewhere as well.
If you see an error or have something to add, all of my articles are hosted on </span><a href="https://github.com/OzymandiasTheGreat/tech.tomasrav.me" role="link" style="color: rgba(118,255,3,1.00); -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406"><span class="css-901oao css-16my406">GitHub</span></a><span class="css-901oao css-16my406"> under Creative Commons Attribution license version 4.0. So feel free to make edits and pull requests, you will get attribution at the end of the article.</span></div><div dir="auto" style="color: rgba(33,33,33,1.00); font-family: Fira Sans; font-size: 16px; font-style: normal; font-weight: 400;" class="css-901oao r-gdo61v"><span class="css-901oao css-16my406">Congratulations on securing your data, stay safe out there!</span></div></article><hr style="background-color: rgba(33,33,33,0.70); width: 98%;" /><div dir="auto" style="color: rgba(33,33,33,0.60); font-family: Fira Sans; font-size: 14px; font-style: normal; font-weight: 400; margin-right: 10px;" class="css-901oao r-gdo61v">Tagged: <a href="/tags/backup" role="link" style="font-family: Fira Sans; font-weight: 400; margin-right: 10px; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406 r-36ujnk">backup</a><a href="/tags/data-security" role="link" style="font-family: Fira Sans; font-weight: 400; margin-right: 10px; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406 r-36ujnk">data-security</a><a href="/tags/linux" role="link" style="font-family: Fira Sans; font-weight: 400; margin-right: 10px; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406 r-36ujnk">linux</a><a href="/tags/windows" role="link" style="font-family: Fira Sans; font-weight: 400; margin-right: 10px; -webkit-text-decoration-line: underline; text-decoration-line: underline;" class="css-4rbku5 css-18t94o4 css-901oao css-16my406 r-36ujnk">windows</a></div></div></main><div style="-webkit-align-self: center; align-self: center; background-color: rgba(118,255,3,1.00); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 30px; margin-right: 30px; margin-bottom: 30px; margin-left: 30px; padding-top: 10px; padding-bottom: 10px; width: 300px; ms-flex-item-align: center; ms-grid-row-align: center;" class="css-1dbjc4n"><div dir="auto" style="color: rgba(239,239,239,1.00); font-family: Merriweather; font-style: normal; font-weight: 900; margin-right: auto; margin-left: auto;" class="css-901oao r-1loqt21">Load Comments</div></div><div style="-webkit-justify-content: flex-end; justify-content: flex-end; ms-flex-pack: end; -webkit-box-pack: end;" class="css-1dbjc4n r-13qz1uu"><footer role="contentinfo" style="-webkit-align-items: center; align-items: center; background-color: rgba(33,33,33,1.00); height: 275px; -webkit-justify-content: space-around; justify-content: space-around; padding-top: 50px; padding-bottom: 50px; ms-flex-align: center; -webkit-box-align: center; ms-flex-pack: distribute; -webkit-box-pack: justify;" class="css-1dbjc4n r-13qz1uu"><div dir="auto" style="-webkit-align-items: center; align-items: center; display: flex; -webkit-justify-content: space-around; justify-content: space-around; width: 200px; ms-flex-align: center; -webkit-box-align: center; ms-flex-pack: distribute; -webkit-box-pack: justify;" class="css-901oao r-10s8ix2 r-18u37iz r-me1f0u r-1b43r93 r-gdo61v r-17tb59b"><a href="/about" role="link" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">About</a><a href="/tags" role="link" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Tags</a><a href="/posts" role="link" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Archive</a></div><div dir="auto" class="css-901oao r-10s8ix2 r-me1f0u r-1b43r93 r-gdo61v r-17tb59b"><a href="https://creativecommons.org/licenses/by/4.0/" role="link" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Content available under CC-BY 4.0</a></div><div dir="auto" style="color: rgba(239,239,239,1.00);" class="css-901oao r-me1f0u r-1b43r93 r-gdo61v r-17tb59b"><svg viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 10px; width: 24px; height: 24px;" role="presentation"><path d="M10.08 10.86C10.13 10.53 10.24 10.24 10.38 10C10.68 9.44 11.19 9.15 11.88 9.14C12.33 9.14 12.74 9.34 13.03 9.63C13.31 9.94 13.5 10.37 13.5 10.8H15.3C15.28 10.33 15.19 9.9 15 9.5C14.85 9.12 14.62 8.78 14.32 8.5C12.87 7.16 10.18 7.35 8.95 8.87C7.66 10.54 7.63 13.46 8.94 15.13C10.15 16.62 12.8 16.83 14.24 15.5C14.55 15.25 14.8 14.94 15 14.58C15.16 14.22 15.27 13.84 15.28 13.43H13.5C13.5 13.64 13.43 13.83 13.34 14C13.25 14.19 13.13 14.34 13 14.47C12.67 14.73 12.28 14.87 11.86 14.87C11.5 14.86 11.2 14.79 10.97 14.64C10.72 14.5 10.5 14.27 10.38 14C9.88 13.1 9.96 11.85 10.08 10.86M12 2C6.5 2 2 6.5 2 12C2.53 25.27 21.5 25.26 22 12C22 6.5 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12C4.44 1.39 19.56 1.39 20 12C20 16.41 16.41 20 12 20Z" style="fill: #efefef;"></path></svg>2022 - Tomas Ravinskas</div><div dir="auto" class="css-901oao r-10s8ix2 r-me1f0u r-1b43r93 r-gdo61v r-17tb59b"><a href="/credits" role="link" class="css-4rbku5 css-18t94o4 css-901oao css-16my406">Third-party licenses, credits, and mentions.</a></div></footer></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Repurpose an Old Laptop to Ensure Your Data is Secure","date":"2021-02-04T17:59:46+0300","tags":["backup","data-security","linux","windows"],"image":{"link":"/content/backup-server/0*PuEX_d74mAqj-5wl.jpg","author":{"name":"Markus Spiske","link":"https://unsplash.com/@markusspiske"},"source":{"name":"Unsplash","link":"https://unsplash.com"}},"medium":"https://ozymandiasthegreat.medium.com/repurpose-an-old-laptop-to-ensure-your-data-is-secure-d92fa7baf821","slug":"2021/02/04/backup-server","content":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"So you bought a new shiny laptop. It's fast, it's powerful, the only question remaining is what to do with your old one?","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":121,"offset":120}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":121,"offset":120}}},{"type":"paragraph","children":[{"type":"text","value":"Selling would take a while and wouldn't bring in much value to speak of. It's much too slow to be of much use anymore.\nAnd just throwing it out seems like a waste.","position":{"start":{"line":3,"column":1,"offset":122},"end":{"line":4,"column":45,"offset":285}}}],"position":{"start":{"line":3,"column":1,"offset":122},"end":{"line":4,"column":45,"offset":285}}},{"type":"paragraph","children":[{"type":"text","value":"Well, you're in luck! Here's a perfect use for an old laptop,\nthat doesn't require much in a way of speed and processing power,\nand brings priceless value:","position":{"start":{"line":6,"column":1,"offset":287},"end":{"line":8,"column":28,"offset":442}}}],"position":{"start":{"line":6,"column":1,"offset":287},"end":{"line":8,"column":28,"offset":442}}},{"type":"html","value":"\u003c!--more--\u003e","position":{"start":{"line":10,"column":1,"offset":444},"end":{"line":10,"column":12,"offset":455}}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"Make it your backup server!","position":{"start":{"line":12,"column":4,"offset":460},"end":{"line":12,"column":31,"offset":487}}}],"position":{"start":{"line":12,"column":2,"offset":458},"end":{"line":12,"column":33,"offset":489}}}],"position":{"start":{"line":12,"column":1,"offset":457},"end":{"line":12,"column":34,"offset":490}}}],"position":{"start":{"line":12,"column":1,"offset":457},"end":{"line":12,"column":34,"offset":490}}},{"type":"paragraph","children":[{"type":"text","value":"A laptop is perfect for this purpose - it has a built-in UPS.\nThat's an uninterruptable power supply, of which a laptop battery is an example. That's very important for servers, and doubly so backup servers. In case of a power outage, it allows your server to\nfinish its' current operations and gently shutdown, ensuring no\ndata corruption can occur.","position":{"start":{"line":14,"column":1,"offset":492},"end":{"line":17,"column":27,"offset":842}}}],"position":{"start":{"line":14,"column":1,"offset":492},"end":{"line":17,"column":27,"offset":842}}},{"type":"paragraph","children":[{"type":"text","value":"Another nice thing about a laptop is the screen and the keyboard.\nWhile definitely not a necessity, in case of trouble it makes troubleshooting much, much easier.","position":{"start":{"line":19,"column":1,"offset":844},"end":{"line":20,"column":97,"offset":1006}}}],"position":{"start":{"line":19,"column":1,"offset":844},"end":{"line":20,"column":97,"offset":1006}}},{"type":"paragraph","children":[{"type":"text","value":"And when I say an old laptop, I mean ","position":{"start":{"line":22,"column":1,"offset":1008},"end":{"line":22,"column":38,"offset":1045}}},{"type":"emphasis","children":[{"type":"text","value":"old","position":{"start":{"line":22,"column":39,"offset":1046},"end":{"line":22,"column":42,"offset":1049}}}],"position":{"start":{"line":22,"column":38,"offset":1045},"end":{"line":22,"column":43,"offset":1050}}},{"type":"text","value":". My backup server\nruns on 13-year old ASUS X51L. It's not like I didn't have other laptops in the meantime, it's just that this beast is the most\nreliable machine I've ever owned.","position":{"start":{"line":22,"column":43,"offset":1050},"end":{"line":24,"column":34,"offset":1230}}}],"position":{"start":{"line":22,"column":1,"offset":1008},"end":{"line":24,"column":34,"offset":1230}}},{"type":"paragraph","children":[{"type":"text","value":"So without further ado, onto what you'll need.","position":{"start":{"line":26,"column":1,"offset":1232},"end":{"line":26,"column":47,"offset":1278}}}],"position":{"start":{"line":26,"column":1,"offset":1232},"end":{"line":26,"column":47,"offset":1278}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":28,"column":4,"offset":1283},"end":{"line":28,"column":17,"offset":1296}}}],"position":{"start":{"line":28,"column":1,"offset":1280},"end":{"line":28,"column":17,"offset":1296}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A router.","position":{"start":{"line":30,"column":3,"offset":1300},"end":{"line":30,"column":12,"offset":1309}}}],"position":{"start":{"line":30,"column":3,"offset":1300},"end":{"line":30,"column":12,"offset":1309}}}],"position":{"start":{"line":30,"column":1,"offset":1298},"end":{"line":30,"column":12,"offset":1309}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An Ethernet cable.","position":{"start":{"line":31,"column":3,"offset":1312},"end":{"line":31,"column":21,"offset":1330}}}],"position":{"start":{"line":31,"column":3,"offset":1312},"end":{"line":31,"column":21,"offset":1330}}}],"position":{"start":{"line":31,"column":1,"offset":1310},"end":{"line":31,"column":21,"offset":1330}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An old laptop.","position":{"start":{"line":32,"column":3,"offset":1333},"end":{"line":32,"column":17,"offset":1347}}}],"position":{"start":{"line":32,"column":3,"offset":1333},"end":{"line":32,"column":17,"offset":1347}}}],"position":{"start":{"line":32,"column":1,"offset":1331},"end":{"line":32,"column":17,"offset":1347}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A large external hard drive.","position":{"start":{"line":33,"column":3,"offset":1350},"end":{"line":33,"column":31,"offset":1378}}}],"position":{"start":{"line":33,"column":3,"offset":1350},"end":{"line":33,"column":31,"offset":1378}}}],"position":{"start":{"line":33,"column":1,"offset":1348},"end":{"line":33,"column":31,"offset":1378}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A USB stick.","position":{"start":{"line":34,"column":3,"offset":1381},"end":{"line":34,"column":15,"offset":1393}}}],"position":{"start":{"line":34,"column":3,"offset":1381},"end":{"line":34,"column":15,"offset":1393}}}],"position":{"start":{"line":34,"column":1,"offset":1379},"end":{"line":34,"column":15,"offset":1393}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A Linux (or a Windows with OpenSSH setup) computer for configuring everything.","position":{"start":{"line":35,"column":3,"offset":1396},"end":{"line":35,"column":81,"offset":1474}}}],"position":{"start":{"line":35,"column":3,"offset":1396},"end":{"line":35,"column":81,"offset":1474}}}],"position":{"start":{"line":35,"column":1,"offset":1394},"end":{"line":35,"column":81,"offset":1474}}}],"position":{"start":{"line":30,"column":1,"offset":1298},"end":{"line":35,"column":81,"offset":1474}}},{"type":"paragraph","children":[{"type":"text","value":"A few notes on requirements.","position":{"start":{"line":37,"column":1,"offset":1476},"end":{"line":37,"column":29,"offset":1504}}}],"position":{"start":{"line":37,"column":1,"offset":1476},"end":{"line":37,"column":29,"offset":1504}}},{"type":"paragraph","children":[{"type":"text","value":"A router is a must, you want to have a home network for several reasons. First and foremost you ","position":{"start":{"line":39,"column":1,"offset":1506},"end":{"line":39,"column":97,"offset":1602}}},{"type":"emphasis","children":[{"type":"text","value":"don't","position":{"start":{"line":39,"column":98,"offset":1603},"end":{"line":39,"column":103,"offset":1608}}}],"position":{"start":{"line":39,"column":97,"offset":1602},"end":{"line":39,"column":104,"offset":1609}}},{"type":"text","value":" want to expose your server\nto the whole internet. It's fine to expose a single port for backups when you're away from home, but exposing everything requires configuring a firewall and locking down your server.\nWhich we will ","position":{"start":{"line":39,"column":104,"offset":1609},"end":{"line":41,"column":15,"offset":1834}}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":41,"column":16,"offset":1835},"end":{"line":41,"column":19,"offset":1838}}}],"position":{"start":{"line":41,"column":15,"offset":1834},"end":{"line":41,"column":20,"offset":1839}}},{"type":"text","value":" cover in this article. So yeah, I'm assuming you're operating within a home network.","position":{"start":{"line":41,"column":20,"offset":1839},"end":{"line":41,"column":105,"offset":1924}}}],"position":{"start":{"line":39,"column":1,"offset":1506},"end":{"line":41,"column":105,"offset":1924}}},{"type":"paragraph","children":[{"type":"text","value":"An external hard drive is not a hard requirement, in the sense that you can get by without it. Still, it's unusual for older laptops to have much space and internal hard drives are subject to heating related issues. So most likely you'll want at least 1TB external hard drive. Thankfully they're quite cheap these days.","position":{"start":{"line":43,"column":1,"offset":1926},"end":{"line":43,"column":320,"offset":2245}}}],"position":{"start":{"line":43,"column":1,"offset":1926},"end":{"line":43,"column":320,"offset":2245}}},{"type":"paragraph","children":[{"type":"text","value":"A Linux computer is what I use daily, but since Windows includes OpenSSH these days, that works too. Unfortunately as of this writing Windows still ships with an outdated version of OpenSSH.\nRead on how to work around that.","position":{"start":{"line":45,"column":1,"offset":2247},"end":{"line":46,"column":33,"offset":2470}}}],"position":{"start":{"line":45,"column":1,"offset":2247},"end":{"line":46,"column":33,"offset":2470}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Pre-Setup (Windows only)","position":{"start":{"line":48,"column":4,"offset":2475},"end":{"line":48,"column":28,"offset":2499}}}],"position":{"start":{"line":48,"column":1,"offset":2472},"end":{"line":48,"column":28,"offset":2499}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you don't have administrator access to the Windows box, skip to the last paragraph of this section","position":{"start":{"line":50,"column":3,"offset":2503},"end":{"line":50,"column":104,"offset":2604}}}],"position":{"start":{"line":50,"column":3,"offset":2503},"end":{"line":50,"column":104,"offset":2604}}}],"position":{"start":{"line":50,"column":1,"offset":2501},"end":{"line":50,"column":104,"offset":2604}}},{"type":"paragraph","children":[{"type":"text","value":"Open a PowerShell window and paste the following commands one by one, pressing ","position":{"start":{"line":52,"column":1,"offset":2606},"end":{"line":52,"column":80,"offset":2685}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":52,"column":81,"offset":2686},"end":{"line":52,"column":86,"offset":2691}}}],"position":{"start":{"line":52,"column":80,"offset":2685},"end":{"line":52,"column":87,"offset":2692}}},{"type":"text","value":" after each and waiting for it to complete.","position":{"start":{"line":52,"column":87,"offset":2692},"end":{"line":52,"column":130,"offset":2735}}}],"position":{"start":{"line":52,"column":1,"offset":2606},"end":{"line":52,"column":130,"offset":2735}}},{"type":"code","lang":"powershell","meta":null,"value":"Set-ExecutionPolicy RemoteSigned -scope CurrentUser\nInvoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')\nscoop install -g win32-openssh\nC:\\ProgramData\\scoop\\apps\\win32-openssh\\current\\install-sshd.ps1\nSet-Service -Name ssh-agent -StartupType Automatic\nStart-Service ssh-agent","position":{"start":{"line":54,"column":1,"offset":2737},"end":{"line":61,"column":4,"offset":3068}}},{"type":"paragraph","children":[{"type":"text","value":"The explanation: ","position":{"start":{"line":63,"column":1,"offset":3070},"end":{"line":63,"column":18,"offset":3087}}},{"type":"emphasis","children":[{"type":"text","value":"scoop","position":{"start":{"line":63,"column":19,"offset":3088},"end":{"line":63,"column":24,"offset":3093}}}],"position":{"start":{"line":63,"column":18,"offset":3087},"end":{"line":63,"column":25,"offset":3094}}},{"type":"text","value":" is a package manager for PowerShell, we set it up to install the latest version of OpenSSH from GitHub so you don't have to mess with system files and permissions.\nWe enable the running of remote scripts for the current user so we can run the scoop installer.\nThen we install OpenSSH, set it up, and enable the ssh-agent service.\nNow we have a working ssh setup and so we're done here for now.","position":{"start":{"line":63,"column":25,"offset":3094},"end":{"line":66,"column":64,"offset":3488}}}],"position":{"start":{"line":63,"column":1,"offset":3070},"end":{"line":66,"column":64,"offset":3488}}},{"type":"paragraph","children":[{"type":"text","value":"Now if you lack admin access, the above commands won't work and you're stuck using an outdated version of OpenSSH. Additionally, you can't start ssh-agent, which means for unattended backups to work the keys you generate later in the article need to be passwordless.\nOther than that, you can still use this box to connect to the server and do automated backups.","position":{"start":{"line":68,"column":1,"offset":3490},"end":{"line":69,"column":95,"offset":3851}}}],"position":{"start":{"line":68,"column":1,"offset":3490},"end":{"line":69,"column":95,"offset":3851}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The Setup","position":{"start":{"line":71,"column":4,"offset":3856},"end":{"line":71,"column":13,"offset":3865}}}],"position":{"start":{"line":71,"column":1,"offset":3853},"end":{"line":71,"column":13,"offset":3865}}},{"type":"paragraph","children":[{"type":"text","value":"First, we're going to set up a basic Ubuntu server. For this article, I'll be using Ubuntu 20.04 Focal Fossa. Yes, it's not the latest version, but it's the latest long-term support release and that's great. It'll make updating the server easier since normal\nupdates are usually faster and less error-prone than dist-upgrades and its' LTS status ensures we get security patches for a good long while.","position":{"start":{"line":73,"column":1,"offset":3867},"end":{"line":74,"column":142,"offset":4267}}}],"position":{"start":{"line":73,"column":1,"offset":3867},"end":{"line":74,"column":142,"offset":4267}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Basic Server","position":{"start":{"line":76,"column":5,"offset":4273},"end":{"line":76,"column":17,"offset":4285}}}],"position":{"start":{"line":76,"column":1,"offset":4269},"end":{"line":76,"column":17,"offset":4285}}},{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":78,"column":1,"offset":4287},"end":{"line":78,"column":7,"offset":4293}}},{"type":"link","title":null,"url":"https://ubuntu.com/download/server","children":[{"type":"text","value":"ubuntu.com","position":{"start":{"line":78,"column":8,"offset":4294},"end":{"line":78,"column":18,"offset":4304}}}],"position":{"start":{"line":78,"column":7,"offset":4293},"end":{"line":78,"column":55,"offset":4341}}},{"type":"text","value":" and choose \"Manual Server Installation\". Proceed to download the ISO and use your software of choice to make a bootable USB stick. One popular, cross-platform choice for this task is ","position":{"start":{"line":78,"column":55,"offset":4341},"end":{"line":78,"column":239,"offset":4525}}},{"type":"link","title":null,"url":"https://www.balena.io/etcher/","children":[{"type":"text","value":"etcher","position":{"start":{"line":78,"column":240,"offset":4526},"end":{"line":78,"column":246,"offset":4532}}}],"position":{"start":{"line":78,"column":239,"offset":4525},"end":{"line":78,"column":278,"offset":4564}}},{"type":"text","value":".","position":{"start":{"line":78,"column":278,"offset":4564},"end":{"line":78,"column":279,"offset":4565}}}],"position":{"start":{"line":78,"column":1,"offset":4287},"end":{"line":78,"column":279,"offset":4565}}},{"type":"paragraph","children":[{"type":"text","value":"Boot your laptop (the old one) from the USB and let's walk through the installation.","position":{"start":{"line":80,"column":1,"offset":4567},"end":{"line":80,"column":85,"offset":4651}}}],"position":{"start":{"line":80,"column":1,"offset":4567},"end":{"line":80,"column":85,"offset":4651}}},{"type":"paragraph","children":[{"type":"text","value":"If you've never installed an operating system or if you've only used graphical installers this will be a little different.\nYou'll get a wall of text that you can safely ignore until this comes up:","position":{"start":{"line":82,"column":1,"offset":4653},"end":{"line":83,"column":74,"offset":4849}}}],"position":{"start":{"line":82,"column":1,"offset":4653},"end":{"line":83,"column":74,"offset":4849}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/1_iso_language_select.png","alt":"Language selection","position":{"start":{"line":85,"column":1,"offset":4851},"end":{"line":85,"column":72,"offset":4922}}}],"position":{"start":{"line":85,"column":1,"offset":4851},"end":{"line":85,"column":72,"offset":4922}}},{"type":"paragraph","children":[{"type":"text","value":"Select your language and press ","position":{"start":{"line":87,"column":1,"offset":4924},"end":{"line":87,"column":32,"offset":4955}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":87,"column":33,"offset":4956},"end":{"line":87,"column":38,"offset":4961}}}],"position":{"start":{"line":87,"column":32,"offset":4955},"end":{"line":87,"column":39,"offset":4962}}},{"type":"text","value":". If you're reading this article, you understand English, so I suggest you go with that.\nYou won't be accessing the interface often and keeping default language helps avoid inconsistencies in the configuration.","position":{"start":{"line":87,"column":39,"offset":4962},"end":{"line":88,"column":122,"offset":5172}}}],"position":{"start":{"line":87,"column":1,"offset":4924},"end":{"line":88,"column":122,"offset":5172}}},{"type":"paragraph","children":[{"type":"text","value":"Now select your keyboard layout. This doesn't matter as much, but if your preferred keyboard layout lacks Latin characters go with English (US) instead.","position":{"start":{"line":90,"column":1,"offset":5174},"end":{"line":90,"column":153,"offset":5326}}}],"position":{"start":{"line":90,"column":1,"offset":5174},"end":{"line":90,"column":153,"offset":5326}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/2_iso_keyboard_select.png","alt":"Keyboard layout","position":{"start":{"line":92,"column":1,"offset":5328},"end":{"line":92,"column":69,"offset":5396}}}],"position":{"start":{"line":92,"column":1,"offset":5328},"end":{"line":92,"column":69,"offset":5396}}},{"type":"paragraph","children":[{"type":"text","value":"Select your network interface. At this point, I should mention that you really want a wired network for your server. Even if all your devices connect to the router through WiFi, you want an Ethernet cable connecting your server to your router.","position":{"start":{"line":94,"column":1,"offset":5398},"end":{"line":94,"column":244,"offset":5641}}}],"position":{"start":{"line":94,"column":1,"offset":5398},"end":{"line":94,"column":244,"offset":5641}}},{"type":"paragraph","children":[{"type":"text","value":"A bit of an explanation: when both your backup server and client (your primary computer) are connected to the network through WiFi, the speed of the connection is halved. That means slower backups.","position":{"start":{"line":96,"column":1,"offset":5643},"end":{"line":96,"column":198,"offset":5840}}}],"position":{"start":{"line":96,"column":1,"offset":5643},"end":{"line":96,"column":198,"offset":5840}}},{"type":"paragraph","children":[{"type":"text","value":"Another thing to keep in mind is that setting up WiFi in the bootloader is much more complicated than a wired connection.\nWired connections usually work out of the box, while WiFi requires additional software and configuration.\nYou'll see why this is important later in the article.","position":{"start":{"line":98,"column":1,"offset":5842},"end":{"line":100,"column":55,"offset":6124}}}],"position":{"start":{"line":98,"column":1,"offset":5842},"end":{"line":100,"column":55,"offset":6124}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/3_iso_network_select.png","alt":"Networking","position":{"start":{"line":102,"column":1,"offset":6126},"end":{"line":102,"column":63,"offset":6188}}}],"position":{"start":{"line":102,"column":1,"offset":6126},"end":{"line":102,"column":63,"offset":6188}}},{"type":"paragraph","children":[{"type":"text","value":"If you plan to make backups through the Internet and you're connecting to the internet through a proxy, setting it up now is a good idea.","position":{"start":{"line":104,"column":1,"offset":6190},"end":{"line":104,"column":138,"offset":6327}}}],"position":{"start":{"line":104,"column":1,"offset":6190},"end":{"line":104,"column":138,"offset":6327}}},{"type":"paragraph","children":[{"type":"text","value":"For the sake of simplicity, I'm leaving this config blank.","position":{"start":{"line":106,"column":1,"offset":6329},"end":{"line":106,"column":59,"offset":6387}}}],"position":{"start":{"line":106,"column":1,"offset":6329},"end":{"line":106,"column":59,"offset":6387}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/4_iso_proxy_select.png","alt":"Proxy","position":{"start":{"line":108,"column":1,"offset":6389},"end":{"line":108,"column":56,"offset":6444}}}],"position":{"start":{"line":108,"column":1,"offset":6389},"end":{"line":108,"column":56,"offset":6444}}},{"type":"paragraph","children":[{"type":"text","value":"Now select package archive to download software packages and updates from. In the vast majority of cases, the Ubuntu installer will select the correct package archive based on your locale, but sometimes you might want to select something physically closer for speedier updates.","position":{"start":{"line":110,"column":1,"offset":6446},"end":{"line":110,"column":278,"offset":6723}}}],"position":{"start":{"line":110,"column":1,"offset":6446},"end":{"line":110,"column":278,"offset":6723}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/5_iso_archive_select.png","alt":"Package archive","position":{"start":{"line":112,"column":1,"offset":6725},"end":{"line":112,"column":68,"offset":6792}}}],"position":{"start":{"line":112,"column":1,"offset":6725},"end":{"line":112,"column":68,"offset":6792}}},{"type":"paragraph","children":[{"type":"text","value":"Now select your disk for installation. If your laptop contains more than one disk, such as SDD and HDD, you probably want to select the faster one for performance.","position":{"start":{"line":114,"column":1,"offset":6794},"end":{"line":114,"column":164,"offset":6957}}}],"position":{"start":{"line":114,"column":1,"offset":6794},"end":{"line":114,"column":164,"offset":6957}}},{"type":"paragraph","children":[{"type":"text","value":"Also, make sure to set up LVM and select \"Encrypt the LVM group with LUKS\". Set a strong passphrase and note it down in your password manager (you are using a password manager, right?).","position":{"start":{"line":116,"column":1,"offset":6959},"end":{"line":116,"column":186,"offset":7144}}}],"position":{"start":{"line":116,"column":1,"offset":6959},"end":{"line":116,"column":186,"offset":7144}}},{"type":"paragraph","children":[{"type":"text","value":"As this is going to be a backup server, and as such, contains a copy of all of your sensitive data, you really want to use encryption.","position":{"start":{"line":118,"column":1,"offset":7146},"end":{"line":118,"column":135,"offset":7280}}}],"position":{"start":{"line":118,"column":1,"offset":7146},"end":{"line":118,"column":135,"offset":7280}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/6_iso_disk_select.png","alt":"Disk selection","position":{"start":{"line":120,"column":1,"offset":7282},"end":{"line":120,"column":64,"offset":7345}}}],"position":{"start":{"line":120,"column":1,"offset":7282},"end":{"line":120,"column":64,"offset":7345}}},{"type":"paragraph","children":[{"type":"text","value":"Now you'll get to the overview screen where you can confirm one last time that everything is configured correctly.","position":{"start":{"line":122,"column":1,"offset":7347},"end":{"line":122,"column":115,"offset":7461}}}],"position":{"start":{"line":122,"column":1,"offset":7347},"end":{"line":122,"column":115,"offset":7461}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/7_iso_overview.png","alt":"Overview","position":{"start":{"line":124,"column":1,"offset":7463},"end":{"line":124,"column":55,"offset":7517}}}],"position":{"start":{"line":124,"column":1,"offset":7463},"end":{"line":124,"column":55,"offset":7517}}},{"type":"paragraph","children":[{"type":"text","value":"This is the last important step, create a user and set the hostname for your server. You may use the same password as you used for the disk since  I don't see a need to remember 2 passwords for a single machine/user.","position":{"start":{"line":126,"column":1,"offset":7519},"end":{"line":126,"column":217,"offset":7735}}}],"position":{"start":{"line":126,"column":1,"offset":7519},"end":{"line":126,"column":217,"offset":7735}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/8_iso_user_info.png","alt":"User screen","position":{"start":{"line":128,"column":1,"offset":7737},"end":{"line":128,"column":59,"offset":7795}}}],"position":{"start":{"line":128,"column":1,"offset":7737},"end":{"line":128,"column":59,"offset":7795}}},{"type":"paragraph","children":[{"type":"text","value":"You'll get offered to install the ssh server now. Do accept, cause we'll be doing most of our configuration over ssh.","position":{"start":{"line":130,"column":1,"offset":7797},"end":{"line":130,"column":118,"offset":7914}}}],"position":{"start":{"line":130,"column":1,"offset":7797},"end":{"line":130,"column":118,"offset":7914}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/9_iso_ssh.png","alt":"ssh offer","position":{"start":{"line":132,"column":1,"offset":7916},"end":{"line":132,"column":51,"offset":7966}}}],"position":{"start":{"line":132,"column":1,"offset":7916},"end":{"line":132,"column":51,"offset":7966}}},{"type":"paragraph","children":[{"type":"text","value":"The next screen offers popular server software, but as we don't need any of it, you can just skip it.","position":{"start":{"line":134,"column":1,"offset":7968},"end":{"line":134,"column":102,"offset":8069}}}],"position":{"start":{"line":134,"column":1,"offset":7968},"end":{"line":134,"column":102,"offset":8069}}},{"type":"paragraph","children":[{"type":"text","value":"Now, wait for the installation to complete, select reboot, remove the USB stick when prompted and wait a bit to boot into your fresh server.","position":{"start":{"line":136,"column":1,"offset":8071},"end":{"line":136,"column":141,"offset":8211}}}],"position":{"start":{"line":136,"column":1,"offset":8071},"end":{"line":136,"column":141,"offset":8211}}},{"type":"paragraph","children":[{"type":"text","value":"This is the part where having a screen and a keyboard comes in useful. Since we set up encryption, the boot process cannot complete without unlocking the disk.\nWe'll fix this by enabling remote unlocking soon, but for now, just enter the passphrase you set up for the disk.","position":{"start":{"line":138,"column":1,"offset":8213},"end":{"line":139,"column":114,"offset":8486}}}],"position":{"start":{"line":138,"column":1,"offset":8213},"end":{"line":139,"column":114,"offset":8486}}},{"type":"paragraph","children":[{"type":"text","value":"You'll be dropped into a terminal prompt. Enter the user name you set up and the password when prompted.\nYou'll see a welcome message containing system information, ads for Canonical services, and some info about available updates.","position":{"start":{"line":141,"column":1,"offset":8488},"end":{"line":142,"column":127,"offset":8719}}}],"position":{"start":{"line":141,"column":1,"offset":8488},"end":{"line":142,"column":127,"offset":8719}}},{"type":"paragraph","children":[{"type":"text","value":"First, we want to update. Type ","position":{"start":{"line":144,"column":1,"offset":8721},"end":{"line":144,"column":32,"offset":8752}}},{"type":"inlineCode","value":"sudo apt update \u0026\u0026 sudo apt upgrade","position":{"start":{"line":144,"column":32,"offset":8752},"end":{"line":144,"column":69,"offset":8789}}},{"type":"text","value":" and press ","position":{"start":{"line":144,"column":69,"offset":8789},"end":{"line":144,"column":80,"offset":8800}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":144,"column":81,"offset":8801},"end":{"line":144,"column":86,"offset":8806}}}],"position":{"start":{"line":144,"column":80,"offset":8800},"end":{"line":144,"column":87,"offset":8807}}},{"type":"text","value":". When prompted to confirm type \"y\" and press ","position":{"start":{"line":144,"column":87,"offset":8807},"end":{"line":144,"column":133,"offset":8853}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":144,"column":134,"offset":8854},"end":{"line":144,"column":139,"offset":8859}}}],"position":{"start":{"line":144,"column":133,"offset":8853},"end":{"line":144,"column":140,"offset":8860}}},{"type":"text","value":". Now, wait a while for the updates to complete.","position":{"start":{"line":144,"column":140,"offset":8860},"end":{"line":144,"column":188,"offset":8908}}}],"position":{"start":{"line":144,"column":1,"offset":8721},"end":{"line":144,"column":188,"offset":8908}}},{"type":"paragraph","children":[{"type":"text","value":"Now we can set up remote unlocking.","position":{"start":{"line":146,"column":1,"offset":8910},"end":{"line":146,"column":36,"offset":8945}}}],"position":{"start":{"line":146,"column":1,"offset":8910},"end":{"line":146,"column":36,"offset":8945}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"First install ","position":{"start":{"line":148,"column":3,"offset":8949},"end":{"line":148,"column":17,"offset":8963}}},{"type":"emphasis","children":[{"type":"text","value":"dropbear-initramfs","position":{"start":{"line":148,"column":18,"offset":8964},"end":{"line":148,"column":36,"offset":8982}}}],"position":{"start":{"line":148,"column":17,"offset":8963},"end":{"line":148,"column":37,"offset":8983}}},{"type":"text","value":", you'll get a warning about ","position":{"start":{"line":148,"column":37,"offset":8983},"end":{"line":148,"column":66,"offset":9012}}},{"type":"emphasis","children":[{"type":"text","value":"authorized_hosts","position":{"start":{"line":148,"column":67,"offset":9013},"end":{"line":148,"column":83,"offset":9029}}}],"position":{"start":{"line":148,"column":66,"offset":9012},"end":{"line":148,"column":84,"offset":9030}}},{"type":"text","value":" but you can ignore it for now.","position":{"start":{"line":148,"column":84,"offset":9030},"end":{"line":148,"column":115,"offset":9061}}}],"position":{"start":{"line":148,"column":3,"offset":8949},"end":{"line":148,"column":115,"offset":9061}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sudo apt install dropbear-initramfs","position":{"start":{"line":149,"column":5,"offset":9066},"end":{"line":149,"column":42,"offset":9103}}}],"position":{"start":{"line":149,"column":5,"offset":9066},"end":{"line":149,"column":42,"offset":9103}}}],"position":{"start":{"line":149,"column":3,"offset":9064},"end":{"line":149,"column":42,"offset":9103}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Now edit dropbear configuration by entering ","position":{"start":{"line":150,"column":5,"offset":9108},"end":{"line":150,"column":49,"offset":9152}}},{"type":"inlineCode","value":"sudo nano /etc/dropbear_initramfs/config","position":{"start":{"line":150,"column":49,"offset":9152},"end":{"line":150,"column":91,"offset":9194}}}],"position":{"start":{"line":150,"column":5,"offset":9108},"end":{"line":150,"column":91,"offset":9194}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Find line ","position":{"start":{"line":151,"column":7,"offset":9201},"end":{"line":151,"column":17,"offset":9211}}},{"type":"inlineCode","value":"# DROPBEAR_OPTIONS =","position":{"start":{"line":151,"column":17,"offset":9211},"end":{"line":151,"column":39,"offset":9233}}},{"type":"text","value":" and uncomment it by removing \"# \" in front. Then put this after the = sign: ","position":{"start":{"line":151,"column":39,"offset":9233},"end":{"line":151,"column":116,"offset":9310}}},{"type":"inlineCode","value":"\"-p 2244 -s -j -k\"","position":{"start":{"line":151,"column":116,"offset":9310},"end":{"line":151,"column":136,"offset":9330}}},{"type":"text","value":" .","position":{"start":{"line":151,"column":136,"offset":9330},"end":{"line":151,"column":138,"offset":9332}}}],"position":{"start":{"line":151,"column":7,"offset":9201},"end":{"line":151,"column":138,"offset":9332}}}],"position":{"start":{"line":151,"column":5,"offset":9199},"end":{"line":151,"column":138,"offset":9332}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"press ","position":{"start":{"line":152,"column":7,"offset":9339},"end":{"line":152,"column":13,"offset":9345}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL-o","position":{"start":{"line":152,"column":14,"offset":9346},"end":{"line":152,"column":20,"offset":9352}}}],"position":{"start":{"line":152,"column":13,"offset":9345},"end":{"line":152,"column":21,"offset":9353}}},{"type":"text","value":" and ","position":{"start":{"line":152,"column":21,"offset":9353},"end":{"line":152,"column":26,"offset":9358}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":152,"column":27,"offset":9359},"end":{"line":152,"column":32,"offset":9364}}}],"position":{"start":{"line":152,"column":26,"offset":9358},"end":{"line":152,"column":33,"offset":9365}}},{"type":"text","value":" to save and ","position":{"start":{"line":152,"column":33,"offset":9365},"end":{"line":152,"column":46,"offset":9378}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL-x","position":{"start":{"line":152,"column":47,"offset":9379},"end":{"line":152,"column":53,"offset":9385}}}],"position":{"start":{"line":152,"column":46,"offset":9378},"end":{"line":152,"column":54,"offset":9386}}},{"type":"text","value":" to exit nano.","position":{"start":{"line":152,"column":54,"offset":9386},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":152,"column":7,"offset":9339},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":152,"column":5,"offset":9337},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":151,"column":5,"offset":9199},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":150,"column":3,"offset":9106},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":149,"column":3,"offset":9064},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":148,"column":1,"offset":8947},"end":{"line":152,"column":68,"offset":9400}}}],"position":{"start":{"line":148,"column":1,"offset":8947},"end":{"line":152,"column":68,"offset":9400}}},{"type":"paragraph","children":[{"type":"text","value":"Let's take a break here and explain. dropbear is a minimal ssh server that can run entirely from RAM and will allow us to connect to the bootloader environment remotely.\nThe options we put in the config have the following meaning:","position":{"start":{"line":154,"column":1,"offset":9402},"end":{"line":155,"column":61,"offset":9632}}}],"position":{"start":{"line":154,"column":1,"offset":9402},"end":{"line":155,"column":61,"offset":9632}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"-p 2244","position":{"start":{"line":157,"column":3,"offset":9636},"end":{"line":157,"column":12,"offset":9645}}},{"type":"text","value":" We change the default port.","position":{"start":{"line":157,"column":12,"offset":9645},"end":{"line":157,"column":40,"offset":9673}}}],"position":{"start":{"line":157,"column":3,"offset":9636},"end":{"line":157,"column":40,"offset":9673}}}],"position":{"start":{"line":157,"column":1,"offset":9634},"end":{"line":157,"column":40,"offset":9673}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"-s","position":{"start":{"line":158,"column":3,"offset":9676},"end":{"line":158,"column":7,"offset":9680}}},{"type":"text","value":" We disable the password login.","position":{"start":{"line":158,"column":7,"offset":9680},"end":{"line":158,"column":38,"offset":9711}}}],"position":{"start":{"line":158,"column":3,"offset":9676},"end":{"line":158,"column":38,"offset":9711}}}],"position":{"start":{"line":158,"column":1,"offset":9674},"end":{"line":158,"column":38,"offset":9711}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"-j","position":{"start":{"line":159,"column":3,"offset":9714},"end":{"line":159,"column":7,"offset":9718}}},{"type":"text","value":" and ","position":{"start":{"line":159,"column":7,"offset":9718},"end":{"line":159,"column":12,"offset":9723}}},{"type":"inlineCode","value":"-k","position":{"start":{"line":159,"column":12,"offset":9723},"end":{"line":159,"column":16,"offset":9727}}},{"type":"text","value":" We disable port forwarding.","position":{"start":{"line":159,"column":16,"offset":9727},"end":{"line":159,"column":44,"offset":9755}}}],"position":{"start":{"line":159,"column":3,"offset":9714},"end":{"line":159,"column":44,"offset":9755}}}],"position":{"start":{"line":159,"column":1,"offset":9712},"end":{"line":159,"column":44,"offset":9755}}}],"position":{"start":{"line":157,"column":1,"offset":9634},"end":{"line":159,"column":44,"offset":9755}}},{"type":"paragraph","children":[{"type":"text","value":"Now we need to set up an RSA key pair if we don't already have it since we disabled password login. If you already have RSA keys set up on your primary computer, skip to the next paragraph.\nOn your primary computer run ","position":{"start":{"line":161,"column":1,"offset":9757},"end":{"line":162,"column":30,"offset":9976}}},{"type":"inlineCode","value":"ssh-keygen","position":{"start":{"line":162,"column":30,"offset":9976},"end":{"line":162,"column":42,"offset":9988}}},{"type":"text","value":", when prompted for the path, just press ","position":{"start":{"line":162,"column":42,"offset":9988},"end":{"line":162,"column":83,"offset":10029}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":162,"column":84,"offset":10030},"end":{"line":162,"column":89,"offset":10035}}}],"position":{"start":{"line":162,"column":83,"offset":10029},"end":{"line":162,"column":90,"offset":10036}}},{"type":"text","value":" to accept the default, enter a strong passphrase twice (or no passphrase if you lack admin access on Windows). Then run ","position":{"start":{"line":162,"column":90,"offset":10036},"end":{"line":162,"column":211,"offset":10157}}},{"type":"inlineCode","value":"ssh-add","position":{"start":{"line":162,"column":211,"offset":10157},"end":{"line":162,"column":220,"offset":10166}}},{"type":"text","value":" to add your new key to the ssh-agent (You can skip this step if you're on Windows and lack admin access). Enter the passphrase when prompted. ssh-agent will remember the passphrase for you so you don't have to type it again for this user.","position":{"start":{"line":162,"column":220,"offset":10166},"end":{"line":162,"column":459,"offset":10405}}}],"position":{"start":{"line":161,"column":1,"offset":9757},"end":{"line":162,"column":459,"offset":10405}}},{"type":"paragraph","children":[{"type":"text","value":"Let's add the public key to the ","position":{"start":{"line":164,"column":1,"offset":10407},"end":{"line":164,"column":33,"offset":10439}}},{"type":"inlineCode","value":"authorized_keys","position":{"start":{"line":164,"column":33,"offset":10439},"end":{"line":164,"column":50,"offset":10456}}},{"type":"text","value":" file so we can log in. Now, this is best done by logging in to your server from your primary computer. This will be the computer you use to control and configure your server and the only machine you can restart your server from. (You can always restart your server physically since it has a screen and a keyboard, but who wants that?)","position":{"start":{"line":164,"column":50,"offset":10456},"end":{"line":164,"column":385,"offset":10791}}}],"position":{"start":{"line":164,"column":1,"offset":10407},"end":{"line":164,"column":385,"offset":10791}}},{"type":"paragraph","children":[{"type":"text","value":"On your server execute ","position":{"start":{"line":166,"column":1,"offset":10793},"end":{"line":166,"column":24,"offset":10816}}},{"type":"inlineCode","value":"ip address","position":{"start":{"line":166,"column":24,"offset":10816},"end":{"line":166,"column":36,"offset":10828}}},{"type":"text","value":", you'll see something like this","position":{"start":{"line":166,"column":36,"offset":10828},"end":{"line":166,"column":68,"offset":10860}}}],"position":{"start":{"line":166,"column":1,"offset":10793},"end":{"line":166,"column":68,"offset":10860}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/ip_address.png","alt":"ip command","position":{"start":{"line":168,"column":1,"offset":10862},"end":{"line":168,"column":53,"offset":10914}}}],"position":{"start":{"line":168,"column":1,"offset":10862},"end":{"line":168,"column":53,"offset":10914}}},{"type":"paragraph","children":[{"type":"text","value":"Find the line that says \"link/ether\" and look to the next line,\nyou'll see your server's IP address, mine's in this case is 10.0.2.5.\nOn your computer open the terminal. Connect to your server by executing ","position":{"start":{"line":170,"column":1,"offset":10916},"end":{"line":172,"column":73,"offset":11122}}},{"type":"inlineCode","value":"ssh ozymandias@10.0.2.5","position":{"start":{"line":172,"column":73,"offset":11122},"end":{"line":172,"column":98,"offset":11147}}},{"type":"text","value":".\nReplace \"ozymandias\" with the user name you set on the server and the IP address with the address you got from the ","position":{"start":{"line":172,"column":98,"offset":11147},"end":{"line":173,"column":116,"offset":11264}}},{"type":"inlineCode","value":"ip","position":{"start":{"line":173,"column":116,"offset":11264},"end":{"line":173,"column":120,"offset":11268}}},{"type":"text","value":" command.\nYou'll be prompted for the password, that's fine, we only disabled password logins for the bootloader - not the server itself.","position":{"start":{"line":173,"column":120,"offset":11268},"end":{"line":174,"column":127,"offset":11404}}}],"position":{"start":{"line":170,"column":1,"offset":10916},"end":{"line":174,"column":127,"offset":11404}}},{"type":"paragraph","children":[{"type":"text","value":"In the ssh prompt execute ","position":{"start":{"line":176,"column":1,"offset":11406},"end":{"line":176,"column":27,"offset":11432}}},{"type":"inlineCode","value":"sudo nano /etc/dropbear-initramfs/authorized_keys","position":{"start":{"line":176,"column":27,"offset":11432},"end":{"line":176,"column":78,"offset":11483}}},{"type":"text","value":" and enter the following","position":{"start":{"line":176,"column":78,"offset":11483},"end":{"line":176,"column":102,"offset":11507}}}],"position":{"start":{"line":176,"column":1,"offset":11406},"end":{"line":176,"column":102,"offset":11507}}},{"type":"code","lang":"bash","meta":null,"value":"no-port-forwarding,no-agent-forwarding,no-x11-forwarding,command=\"/bin/cryptroot-unlock\" \u003cpaste the contents of id_rsa.pub here\u003e","position":{"start":{"line":178,"column":1,"offset":11509},"end":{"line":180,"column":4,"offset":11649}}},{"type":"paragraph","children":[{"type":"text","value":"You'll find ","position":{"start":{"line":182,"column":1,"offset":11651},"end":{"line":182,"column":13,"offset":11663}}},{"type":"inlineCode","value":"id_rsa.pub","position":{"start":{"line":182,"column":13,"offset":11663},"end":{"line":182,"column":25,"offset":11675}}},{"type":"text","value":" in ","position":{"start":{"line":182,"column":25,"offset":11675},"end":{"line":182,"column":29,"offset":11679}}},{"type":"inlineCode","value":"~/.ssh","position":{"start":{"line":182,"column":29,"offset":11679},"end":{"line":182,"column":37,"offset":11687}}},{"type":"text","value":" (","position":{"start":{"line":182,"column":37,"offset":11687},"end":{"line":182,"column":39,"offset":11689}}},{"type":"inlineCode","value":"C:\\Users\\\u003cyour username\u003e\\.ssh","position":{"start":{"line":182,"column":39,"offset":11689},"end":{"line":182,"column":70,"offset":11720}}},{"type":"text","value":" on Windows). To view contents quickly just run ","position":{"start":{"line":182,"column":70,"offset":11720},"end":{"line":182,"column":118,"offset":11768}}},{"type":"inlineCode","value":"cat ~/.ssh/id_rsa.pub","position":{"start":{"line":182,"column":118,"offset":11768},"end":{"line":182,"column":141,"offset":11791}}},{"type":"text","value":". Note that you have to run this command on your primary computer outside the ssh prompt. Just open a second tab/window of the terminal, run this command and copy the long random string it outputs.","position":{"start":{"line":182,"column":141,"offset":11791},"end":{"line":182,"column":338,"offset":11988}}}],"position":{"start":{"line":182,"column":1,"offset":11651},"end":{"line":182,"column":338,"offset":11988}}},{"type":"paragraph","children":[{"type":"text","value":"Then in nano, again, press ","position":{"start":{"line":184,"column":1,"offset":11990},"end":{"line":184,"column":28,"offset":12017}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL-o","position":{"start":{"line":184,"column":29,"offset":12018},"end":{"line":184,"column":35,"offset":12024}}}],"position":{"start":{"line":184,"column":28,"offset":12017},"end":{"line":184,"column":36,"offset":12025}}},{"type":"text","value":" and ","position":{"start":{"line":184,"column":36,"offset":12025},"end":{"line":184,"column":41,"offset":12030}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":184,"column":42,"offset":12031},"end":{"line":184,"column":47,"offset":12036}}}],"position":{"start":{"line":184,"column":41,"offset":12030},"end":{"line":184,"column":48,"offset":12037}}},{"type":"text","value":" to save and ","position":{"start":{"line":184,"column":48,"offset":12037},"end":{"line":184,"column":61,"offset":12050}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL-x","position":{"start":{"line":184,"column":62,"offset":12051},"end":{"line":184,"column":68,"offset":12057}}}],"position":{"start":{"line":184,"column":61,"offset":12050},"end":{"line":184,"column":69,"offset":12058}}},{"type":"text","value":" to exit.\nThen execute ","position":{"start":{"line":184,"column":69,"offset":12058},"end":{"line":185,"column":14,"offset":12081}}},{"type":"inlineCode","value":"sudo update-initramfs -u","position":{"start":{"line":185,"column":14,"offset":12081},"end":{"line":185,"column":40,"offset":12107}}},{"type":"text","value":" and wait for it to complete. If you did everything correctly at this point we can restart the server remotely via ssh. Execute ","position":{"start":{"line":185,"column":40,"offset":12107},"end":{"line":185,"column":168,"offset":12235}}},{"type":"inlineCode","value":"sudo systemctl reboot","position":{"start":{"line":185,"column":168,"offset":12235},"end":{"line":185,"column":191,"offset":12258}}},{"type":"text","value":" and wait a few minutes. Since we installed updates as well, the reboot might take a while.","position":{"start":{"line":185,"column":191,"offset":12258},"end":{"line":185,"column":282,"offset":12349}}}],"position":{"start":{"line":184,"column":1,"offset":11990},"end":{"line":185,"column":282,"offset":12349}}},{"type":"paragraph","children":[{"type":"text","value":"Try to connect to your server with ","position":{"start":{"line":187,"column":1,"offset":12351},"end":{"line":187,"column":36,"offset":12386}}},{"type":"inlineCode","value":"ssh -p 2244 root@\u003cyour server's ip address\u003e","position":{"start":{"line":187,"column":36,"offset":12386},"end":{"line":187,"column":81,"offset":12431}}}],"position":{"start":{"line":187,"column":1,"offset":12351},"end":{"line":187,"column":81,"offset":12431}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/ssh_boot.png","alt":"ssh into bootloader","position":{"start":{"line":189,"column":1,"offset":12433},"end":{"line":189,"column":60,"offset":12492}}}],"position":{"start":{"line":189,"column":1,"offset":12433},"end":{"line":189,"column":60,"offset":12492}}},{"type":"paragraph","children":[{"type":"text","value":"You'll get a warning about authenticity since we haven't connected to the bootloader before. Type \"yes\" and press ","position":{"start":{"line":191,"column":1,"offset":12494},"end":{"line":191,"column":115,"offset":12608}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":191,"column":116,"offset":12609},"end":{"line":191,"column":121,"offset":12614}}}],"position":{"start":{"line":191,"column":115,"offset":12608},"end":{"line":191,"column":122,"offset":12615}}},{"type":"text","value":".\nNow you can enter the disk password, at which point you'll get a line about success and the connection will automatically close.\nWait a minute or so and you can log in to your server.","position":{"start":{"line":191,"column":122,"offset":12615},"end":{"line":193,"column":55,"offset":12800}}}],"position":{"start":{"line":191,"column":1,"offset":12494},"end":{"line":193,"column":55,"offset":12800}}},{"type":"paragraph","children":[{"type":"text","value":"For the final touches, let's enable a passwordless login. On your primary computer (where you generated your key pair) execute ","position":{"start":{"line":195,"column":1,"offset":12802},"end":{"line":195,"column":128,"offset":12929}}},{"type":"inlineCode","value":"ssh-copy-id \u003cusername\u003e@\u003cserver's IP address\u003e","position":{"start":{"line":195,"column":128,"offset":12929},"end":{"line":195,"column":174,"offset":12975}}},{"type":"text","value":".\nEnter your password when prompted and once the command completes,\ntry to login to your server: ","position":{"start":{"line":195,"column":174,"offset":12975},"end":{"line":197,"column":30,"offset":13072}}},{"type":"inlineCode","value":"ssh \u003cusername\u003e@\u003cserver's IP address\u003e","position":{"start":{"line":197,"column":30,"offset":13072},"end":{"line":197,"column":68,"offset":13110}}},{"type":"text","value":". You should be able to log in without a password now!","position":{"start":{"line":197,"column":68,"offset":13110},"end":{"line":197,"column":122,"offset":13164}}}],"position":{"start":{"line":195,"column":1,"offset":12802},"end":{"line":197,"column":122,"offset":13164}}},{"type":"paragraph","children":[{"type":"text","value":"Now to disable password and root logins completely, on your server's ssh session execute ","position":{"start":{"line":199,"column":1,"offset":13166},"end":{"line":199,"column":90,"offset":13255}}},{"type":"inlineCode","value":"sudo nano /etc/ssh/sshd_config","position":{"start":{"line":199,"column":90,"offset":13255},"end":{"line":199,"column":122,"offset":13287}}},{"type":"text","value":".\nFind these lines and change values as follows:","position":{"start":{"line":199,"column":122,"offset":13287},"end":{"line":200,"column":47,"offset":13335}}}],"position":{"start":{"line":199,"column":1,"offset":13166},"end":{"line":200,"column":47,"offset":13335}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PermitRootLogin","position":{"start":{"line":202,"column":4,"offset":13340},"end":{"line":202,"column":19,"offset":13355}}}],"position":{"start":{"line":202,"column":3,"offset":13339},"end":{"line":202,"column":20,"offset":13356}}},{"type":"text","value":" uncomment and set to ","position":{"start":{"line":202,"column":20,"offset":13356},"end":{"line":202,"column":42,"offset":13378}}},{"type":"emphasis","children":[{"type":"text","value":"no","position":{"start":{"line":202,"column":43,"offset":13379},"end":{"line":202,"column":45,"offset":13381}}}],"position":{"start":{"line":202,"column":42,"offset":13378},"end":{"line":202,"column":46,"offset":13382}}}],"position":{"start":{"line":202,"column":3,"offset":13339},"end":{"line":202,"column":46,"offset":13382}}}],"position":{"start":{"line":202,"column":1,"offset":13337},"end":{"line":202,"column":46,"offset":13382}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PasswordAuthentication","position":{"start":{"line":203,"column":4,"offset":13386},"end":{"line":203,"column":26,"offset":13408}}}],"position":{"start":{"line":203,"column":3,"offset":13385},"end":{"line":203,"column":27,"offset":13409}}},{"type":"text","value":" uncomment and set to ","position":{"start":{"line":203,"column":27,"offset":13409},"end":{"line":203,"column":49,"offset":13431}}},{"type":"emphasis","children":[{"type":"text","value":"no","position":{"start":{"line":203,"column":50,"offset":13432},"end":{"line":203,"column":52,"offset":13434}}}],"position":{"start":{"line":203,"column":49,"offset":13431},"end":{"line":203,"column":53,"offset":13435}}}],"position":{"start":{"line":203,"column":3,"offset":13385},"end":{"line":203,"column":53,"offset":13435}}}],"position":{"start":{"line":203,"column":1,"offset":13383},"end":{"line":203,"column":53,"offset":13435}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"ChallengeResponseAuthentication","position":{"start":{"line":204,"column":4,"offset":13439},"end":{"line":204,"column":35,"offset":13470}}}],"position":{"start":{"line":204,"column":3,"offset":13438},"end":{"line":204,"column":36,"offset":13471}}},{"type":"text","value":" make sure it's set to ","position":{"start":{"line":204,"column":36,"offset":13471},"end":{"line":204,"column":59,"offset":13494}}},{"type":"emphasis","children":[{"type":"text","value":"no","position":{"start":{"line":204,"column":60,"offset":13495},"end":{"line":204,"column":62,"offset":13497}}}],"position":{"start":{"line":204,"column":59,"offset":13494},"end":{"line":204,"column":63,"offset":13498}}}],"position":{"start":{"line":204,"column":3,"offset":13438},"end":{"line":204,"column":63,"offset":13498}}}],"position":{"start":{"line":204,"column":1,"offset":13436},"end":{"line":204,"column":63,"offset":13498}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"UsePAM","position":{"start":{"line":205,"column":4,"offset":13502},"end":{"line":205,"column":10,"offset":13508}}}],"position":{"start":{"line":205,"column":3,"offset":13501},"end":{"line":205,"column":11,"offset":13509}}},{"type":"text","value":" set to ","position":{"start":{"line":205,"column":11,"offset":13509},"end":{"line":205,"column":19,"offset":13517}}},{"type":"emphasis","children":[{"type":"text","value":"no","position":{"start":{"line":205,"column":20,"offset":13518},"end":{"line":205,"column":22,"offset":13520}}}],"position":{"start":{"line":205,"column":19,"offset":13517},"end":{"line":205,"column":23,"offset":13521}}}],"position":{"start":{"line":205,"column":3,"offset":13501},"end":{"line":205,"column":23,"offset":13521}}}],"position":{"start":{"line":205,"column":1,"offset":13499},"end":{"line":205,"column":23,"offset":13521}}}],"position":{"start":{"line":202,"column":1,"offset":13337},"end":{"line":205,"column":23,"offset":13521}}},{"type":"paragraph","children":[{"type":"text","value":"Save and close, then execute ","position":{"start":{"line":207,"column":1,"offset":13523},"end":{"line":207,"column":30,"offset":13552}}},{"type":"inlineCode","value":"sudo service ssh restart","position":{"start":{"line":207,"column":30,"offset":13552},"end":{"line":207,"column":56,"offset":13578}}},{"type":"text","value":", log out and log back in.","position":{"start":{"line":207,"column":56,"offset":13578},"end":{"line":207,"column":82,"offset":13604}}}],"position":{"start":{"line":207,"column":1,"offset":13523},"end":{"line":207,"column":82,"offset":13604}}},{"type":"paragraph","children":[{"type":"text","value":"Congratulations, we've enabled remote unlock and secure shell access. Now your backup server is secure, but you won't have to touch it physically unless something goes horribly wrong.","position":{"start":{"line":209,"column":1,"offset":13606},"end":{"line":209,"column":184,"offset":13789}}}],"position":{"start":{"line":209,"column":1,"offset":13606},"end":{"line":209,"column":184,"offset":13789}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you have multiple computers you plan to backup, you may want to delay disabling password login until you set them all up.\nThis will make the setup easier, but for guaranteed security ","position":{"start":{"line":211,"column":3,"offset":13793},"end":{"line":212,"column":64,"offset":13981}}},{"type":"emphasis","children":[{"type":"text","value":"DO NOT FORGET TO DISABLE PASSWORD LOGINS","position":{"start":{"line":212,"column":65,"offset":13982},"end":{"line":212,"column":105,"offset":14022}}}],"position":{"start":{"line":212,"column":64,"offset":13981},"end":{"line":212,"column":106,"offset":14023}}}],"position":{"start":{"line":211,"column":3,"offset":13793},"end":{"line":212,"column":106,"offset":14023}}}],"position":{"start":{"line":211,"column":1,"offset":13791},"end":{"line":212,"column":106,"offset":14023}}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Prevent Hibernation on Lid Close","position":{"start":{"line":214,"column":6,"offset":14030},"end":{"line":214,"column":38,"offset":14062}}}],"position":{"start":{"line":214,"column":1,"offset":14025},"end":{"line":214,"column":38,"offset":14062}}},{"type":"paragraph","children":[{"type":"text","value":"One little thing you'll likely want to do as well is to disable sleep/hibernation when your server's (laptop's) lid is closed.\nI mean, if it's sleeping we can't connect to it or perform backups. To do this, first, run ","position":{"start":{"line":216,"column":1,"offset":14064},"end":{"line":217,"column":92,"offset":14282}}},{"type":"inlineCode","value":"sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target","position":{"start":{"line":217,"column":92,"offset":14282},"end":{"line":217,"column":178,"offset":14368}}},{"type":"text","value":".","position":{"start":{"line":217,"column":178,"offset":14368},"end":{"line":217,"column":179,"offset":14369}}}],"position":{"start":{"line":216,"column":1,"offset":14064},"end":{"line":217,"column":179,"offset":14369}}},{"type":"paragraph","children":[{"type":"text","value":"This would be it, but disabling sleep may cause high CPU usage when the lid is closed. I ","position":{"start":{"line":219,"column":1,"offset":14371},"end":{"line":219,"column":90,"offset":14460}}},{"type":"emphasis","children":[{"type":"text","value":"think","position":{"start":{"line":219,"column":91,"offset":14461},"end":{"line":219,"column":96,"offset":14466}}}],"position":{"start":{"line":219,"column":90,"offset":14460},"end":{"line":219,"column":97,"offset":14467}}},{"type":"text","value":" it's a bug in Ubuntu that hasn't been fixed yet. To avoid trashing your CPU and fans run ","position":{"start":{"line":219,"column":97,"offset":14467},"end":{"line":219,"column":187,"offset":14557}}},{"type":"inlineCode","value":"sudo nano /etc/systemd/logind.conf","position":{"start":{"line":219,"column":187,"offset":14557},"end":{"line":219,"column":223,"offset":14593}}},{"type":"text","value":" and edit the following lines as so:","position":{"start":{"line":219,"column":223,"offset":14593},"end":{"line":219,"column":259,"offset":14629}}}],"position":{"start":{"line":219,"column":1,"offset":14371},"end":{"line":219,"column":259,"offset":14629}}},{"type":"code","lang":"bash","meta":null,"value":"HandleLidSwitch=ignore\nHandleLidSwitchDocked=ignore","position":{"start":{"line":221,"column":1,"offset":14631},"end":{"line":224,"column":4,"offset":14694}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"The External Drive","position":{"start":{"line":226,"column":5,"offset":14700},"end":{"line":226,"column":23,"offset":14718}}}],"position":{"start":{"line":226,"column":1,"offset":14696},"end":{"line":226,"column":23,"offset":14718}}},{"type":"paragraph","children":[{"type":"text","value":"Let's set up the external drive (or if your laptop contains 2 drives such as SSD and HDD and your HDD is sufficiently large, the HDD). First, connect it to the server and turn it on. Now let's go back to your primary computer and ssh into the server.","position":{"start":{"line":228,"column":1,"offset":14720},"end":{"line":228,"column":251,"offset":14970}}}],"position":{"start":{"line":228,"column":1,"offset":14720},"end":{"line":228,"column":251,"offset":14970}}},{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":230,"column":1,"offset":14972},"end":{"line":230,"column":5,"offset":14976}}},{"type":"inlineCode","value":"lsblk","position":{"start":{"line":230,"column":5,"offset":14976},"end":{"line":230,"column":12,"offset":14983}}},{"type":"text","value":" to see all disks and partitions. Find the one which says \"disk\" and the size matches your HDD, note the first column.\nThis is the device identifier and we'll use it to repartition the disk, format it, and encrypt it. Mine (and quite likely yours too) is \"sdb\".","position":{"start":{"line":230,"column":12,"offset":14983},"end":{"line":231,"column":143,"offset":15244}}}],"position":{"start":{"line":230,"column":1,"offset":14972},"end":{"line":231,"column":143,"offset":15244}}},{"type":"paragraph","children":[{"type":"text","value":"Now before you proceed, make sure the disk doesn't contain anything you'd regret deleting, the next operations WILL DESTROY data. It might still be recoverable with something like ","position":{"start":{"line":233,"column":1,"offset":15246},"end":{"line":233,"column":181,"offset":15426}}},{"type":"link","title":null,"url":"https://www.cgsecurity.org/","children":[{"type":"text","value":"photorec","position":{"start":{"line":233,"column":182,"offset":15427},"end":{"line":233,"column":190,"offset":15435}}}],"position":{"start":{"line":233,"column":181,"offset":15426},"end":{"line":233,"column":220,"offset":15465}}},{"type":"text","value":" but that's not guaranteed.","position":{"start":{"line":233,"column":220,"offset":15465},"end":{"line":233,"column":247,"offset":15492}}}],"position":{"start":{"line":233,"column":1,"offset":15246},"end":{"line":233,"column":247,"offset":15492}}},{"type":"paragraph","children":[{"type":"text","value":"All good? Then run ","position":{"start":{"line":235,"column":1,"offset":15494},"end":{"line":235,"column":20,"offset":15513}}},{"type":"inlineCode","value":"sudo sfdisk --delete /dev/sdb","position":{"start":{"line":235,"column":20,"offset":15513},"end":{"line":235,"column":51,"offset":15544}}},{"type":"text","value":". This will delete all partitions on the disk, so we can make one disk sized partition for storing backups.","position":{"start":{"line":235,"column":51,"offset":15544},"end":{"line":235,"column":158,"offset":15651}}}],"position":{"start":{"line":235,"column":1,"offset":15494},"end":{"line":235,"column":158,"offset":15651}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/sfdisk_delete.png","alt":"Delete partitions","position":{"start":{"line":237,"column":1,"offset":15653},"end":{"line":237,"column":63,"offset":15715}}}],"position":{"start":{"line":237,"column":1,"offset":15653},"end":{"line":237,"column":63,"offset":15715}}},{"type":"paragraph","children":[{"type":"text","value":"To create a partition run ","position":{"start":{"line":239,"column":1,"offset":15717},"end":{"line":239,"column":27,"offset":15743}}},{"type":"inlineCode","value":"echo ',,,' | sudo sfdisk /dev/sdb","position":{"start":{"line":239,"column":27,"offset":15743},"end":{"line":239,"column":62,"offset":15778}}},{"type":"text","value":".","position":{"start":{"line":239,"column":62,"offset":15778},"end":{"line":239,"column":63,"offset":15779}}}],"position":{"start":{"line":239,"column":1,"offset":15717},"end":{"line":239,"column":63,"offset":15779}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/sfdisk_create.png","alt":"Create partition","position":{"start":{"line":241,"column":1,"offset":15781},"end":{"line":241,"column":62,"offset":15842}}}],"position":{"start":{"line":241,"column":1,"offset":15781},"end":{"line":241,"column":62,"offset":15842}}},{"type":"paragraph","children":[{"type":"text","value":"Let's encrypt and format the newly created partition. Run ","position":{"start":{"line":243,"column":1,"offset":15844},"end":{"line":243,"column":59,"offset":15902}}},{"type":"inlineCode","value":"sudo cryptsetup -y luksFormat /dev/sdb1","position":{"start":{"line":243,"column":59,"offset":15902},"end":{"line":243,"column":100,"offset":15943}}},{"type":"text","value":". Replace \"sdb1\" with your device identifier and partition number. This will encrypt the partition, the \"-y\" flag makes the command prompt you for a passphrase. Again you ","position":{"start":{"line":243,"column":100,"offset":15943},"end":{"line":243,"column":271,"offset":16114}}},{"type":"emphasis","children":[{"type":"text","value":"may","position":{"start":{"line":243,"column":272,"offset":16115},"end":{"line":243,"column":275,"offset":16118}}}],"position":{"start":{"line":243,"column":271,"offset":16114},"end":{"line":243,"column":276,"offset":16119}}},{"type":"text","value":" use the same passphrase you used for the system disk and your user account. Since we'll set up automatic mounting, it doesn't make sense to use a different passphrase because anyone with access to your server will have access to your data anyway. Now mount the encrypted partition with ","position":{"start":{"line":243,"column":276,"offset":16119},"end":{"line":243,"column":563,"offset":16406}}},{"type":"inlineCode","value":"sudo cryptsetup luksOpen /dev/sdb1 sdb1_crypt","position":{"start":{"line":243,"column":563,"offset":16406},"end":{"line":243,"column":610,"offset":16453}}},{"type":"text","value":" and format it with ","position":{"start":{"line":243,"column":610,"offset":16453},"end":{"line":243,"column":630,"offset":16473}}},{"type":"inlineCode","value":"mkfs.ext4 /dev/mapper/sdb1_crypt","position":{"start":{"line":243,"column":630,"offset":16473},"end":{"line":243,"column":664,"offset":16507}}},{"type":"text","value":".","position":{"start":{"line":243,"column":664,"offset":16507},"end":{"line":243,"column":665,"offset":16508}}}],"position":{"start":{"line":243,"column":1,"offset":15844},"end":{"line":243,"column":665,"offset":16508}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/luks_setup.png","alt":"Encrypt partition","position":{"start":{"line":245,"column":1,"offset":16510},"end":{"line":245,"column":60,"offset":16569}}}],"position":{"start":{"line":245,"column":1,"offset":16510},"end":{"line":245,"column":60,"offset":16569}}},{"type":"paragraph","children":[{"type":"text","value":"Now let's set up a key file for automatic mounting at boot.\nRun ","position":{"start":{"line":247,"column":1,"offset":16571},"end":{"line":248,"column":5,"offset":16635}}},{"type":"inlineCode","value":"sudo dd if=/dev/urandom of=/root/.keyfile bs=1024 count=4","position":{"start":{"line":248,"column":5,"offset":16635},"end":{"line":248,"column":64,"offset":16694}}},{"type":"text","value":".\nThis will create a 4KB file with random data we'll use as a key.\nChange its' permissions so it's only accessible by root with ","position":{"start":{"line":248,"column":64,"offset":16694},"end":{"line":250,"column":62,"offset":16822}}},{"type":"inlineCode","value":"sudo chmod 0400 /root/.keyfile","position":{"start":{"line":250,"column":62,"offset":16822},"end":{"line":250,"column":94,"offset":16854}}},{"type":"text","value":" and add it to your disk with ","position":{"start":{"line":250,"column":94,"offset":16854},"end":{"line":250,"column":124,"offset":16884}}},{"type":"inlineCode","value":"sudo cryptsetup luksAddKey /dev/sdb1 /root/.keyfile","position":{"start":{"line":250,"column":124,"offset":16884},"end":{"line":250,"column":177,"offset":16937}}},{"type":"text","value":". Again, replace \"sdb1\" with your device and partition number.","position":{"start":{"line":250,"column":177,"offset":16937},"end":{"line":250,"column":239,"offset":16999}}}],"position":{"start":{"line":247,"column":1,"offset":16571},"end":{"line":250,"column":239,"offset":16999}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/luks_add_key.png","alt":"Add keyfile","position":{"start":{"line":252,"column":1,"offset":17001},"end":{"line":252,"column":56,"offset":17056}}}],"position":{"start":{"line":252,"column":1,"offset":17001},"end":{"line":252,"column":56,"offset":17056}}},{"type":"paragraph","children":[{"type":"text","value":"To decrypt your disk at boot you need to edit ","position":{"start":{"line":254,"column":1,"offset":17058},"end":{"line":254,"column":47,"offset":17104}}},{"type":"inlineCode","value":"/etc/crypttab","position":{"start":{"line":254,"column":47,"offset":17104},"end":{"line":254,"column":62,"offset":17119}}},{"type":"text","value":".\nRub ","position":{"start":{"line":254,"column":62,"offset":17119},"end":{"line":255,"column":5,"offset":17125}}},{"type":"inlineCode","value":"sudo blkid","position":{"start":{"line":255,"column":5,"offset":17125},"end":{"line":255,"column":17,"offset":17137}}},{"type":"text","value":" to find your disk UUID, it's the line that starts with ","position":{"start":{"line":255,"column":17,"offset":17137},"end":{"line":255,"column":73,"offset":17193}}},{"type":"inlineCode","value":"/dev/sdb1","position":{"start":{"line":255,"column":73,"offset":17193},"end":{"line":255,"column":84,"offset":17204}}},{"type":"text","value":". Copy the UUID value and run ","position":{"start":{"line":255,"column":84,"offset":17204},"end":{"line":255,"column":114,"offset":17234}}},{"type":"inlineCode","value":"sudo nano /etc/crypttab","position":{"start":{"line":255,"column":114,"offset":17234},"end":{"line":255,"column":139,"offset":17259}}},{"type":"text","value":". Create a new line that looks like this, replacing UUID with what you copied:","position":{"start":{"line":255,"column":139,"offset":17259},"end":{"line":255,"column":217,"offset":17337}}}],"position":{"start":{"line":254,"column":1,"offset":17058},"end":{"line":255,"column":217,"offset":17337}}},{"type":"code","lang":"bash","meta":null,"value":"sdb1_crypt UUID=\"b09de769-e102-42d0-87fc-08dee2df1e0e\" /root/.keyfile luks,discard","position":{"start":{"line":257,"column":1,"offset":17339},"end":{"line":259,"column":4,"offset":17433}}},{"type":"paragraph","children":[{"type":"text","value":"Save and close. Now edit ","position":{"start":{"line":261,"column":1,"offset":17435},"end":{"line":261,"column":26,"offset":17460}}},{"type":"inlineCode","value":"/etc/fstab","position":{"start":{"line":261,"column":26,"offset":17460},"end":{"line":261,"column":38,"offset":17472}}},{"type":"text","value":" with ","position":{"start":{"line":261,"column":38,"offset":17472},"end":{"line":261,"column":44,"offset":17478}}},{"type":"inlineCode","value":"sudo nano /etc/fstab","position":{"start":{"line":261,"column":44,"offset":17478},"end":{"line":261,"column":66,"offset":17500}}},{"type":"text","value":":","position":{"start":{"line":261,"column":66,"offset":17500},"end":{"line":261,"column":67,"offset":17501}}}],"position":{"start":{"line":261,"column":1,"offset":17435},"end":{"line":261,"column":67,"offset":17501}}},{"type":"code","lang":"bash","meta":null,"value":"/dev/mapper/sdb1_crypt  /media/data  ext4   defaults  0  2","position":{"start":{"line":263,"column":1,"offset":17503},"end":{"line":265,"column":4,"offset":17573}}},{"type":"paragraph","children":[{"type":"text","value":"Reboot, check that ","position":{"start":{"line":267,"column":1,"offset":17575},"end":{"line":267,"column":20,"offset":17594}}},{"type":"inlineCode","value":"/media/data","position":{"start":{"line":267,"column":20,"offset":17594},"end":{"line":267,"column":33,"offset":17607}}},{"type":"text","value":" is available with ","position":{"start":{"line":267,"column":33,"offset":17607},"end":{"line":267,"column":52,"offset":17626}}},{"type":"inlineCode","value":"ls -ld /media/data/","position":{"start":{"line":267,"column":52,"offset":17626},"end":{"line":267,"column":73,"offset":17647}}},{"type":"text","value":" and that it's size is correct with ","position":{"start":{"line":267,"column":73,"offset":17647},"end":{"line":267,"column":109,"offset":17683}}},{"type":"inlineCode","value":"df -h /media/data/","position":{"start":{"line":267,"column":109,"offset":17683},"end":{"line":267,"column":129,"offset":17703}}},{"type":"text","value":".\nIf everything looks good, we just need to take ownership of the \"data\" directory and we're done with server setup. Do this with ","position":{"start":{"line":267,"column":129,"offset":17703},"end":{"line":268,"column":129,"offset":17833}}},{"type":"inlineCode","value":"sudo chown \u003cusername\u003e:\u003cusername\u003e /media/data","position":{"start":{"line":268,"column":129,"offset":17833},"end":{"line":268,"column":175,"offset":17879}}},{"type":"text","value":".","position":{"start":{"line":268,"column":175,"offset":17879},"end":{"line":268,"column":176,"offset":17880}}}],"position":{"start":{"line":267,"column":1,"offset":17575},"end":{"line":268,"column":176,"offset":17880}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/mountpoint.png","alt":"Mount point","position":{"start":{"line":270,"column":1,"offset":17882},"end":{"line":270,"column":54,"offset":17935}}}],"position":{"start":{"line":270,"column":1,"offset":17882},"end":{"line":270,"column":54,"offset":17935}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"The router","position":{"start":{"line":272,"column":5,"offset":17941},"end":{"line":272,"column":15,"offset":17951}}}],"position":{"start":{"line":272,"column":1,"offset":17937},"end":{"line":272,"column":15,"offset":17951}}},{"type":"paragraph","children":[{"type":"text","value":"Now we need to set up the router. At the very least you want to assign a static internal IP to the server so you can easily connect to it. If you want to back up over the internet, you also need to set up port forwarding.","position":{"start":{"line":274,"column":1,"offset":17953},"end":{"line":274,"column":222,"offset":18174}}}],"position":{"start":{"line":274,"column":1,"offset":17953},"end":{"line":274,"column":222,"offset":18174}}},{"type":"paragraph","children":[{"type":"text","value":"Unfortunately, every router is quite different. Because of that, we'll cover ","position":{"start":{"line":276,"column":1,"offset":18176},"end":{"line":276,"column":78,"offset":18253}}},{"type":"link","title":null,"url":"https://dd-wrt.com/","children":[{"type":"text","value":"DD-WRT","position":{"start":{"line":276,"column":79,"offset":18254},"end":{"line":276,"column":85,"offset":18260}}}],"position":{"start":{"line":276,"column":78,"offset":18253},"end":{"line":276,"column":107,"offset":18282}}},{"type":"text","value":" which is an open-source alternative router firmware. The steps you need to take will probably differ but should be similar enough.","position":{"start":{"line":276,"column":107,"offset":18282},"end":{"line":276,"column":238,"offset":18413}}}],"position":{"start":{"line":276,"column":1,"offset":18176},"end":{"line":276,"column":238,"offset":18413}}},{"type":"paragraph","children":[{"type":"text","value":"First, log in to your router. The IP you need to enter into your browser will differ based on your router model and router settings but you can google that.","position":{"start":{"line":278,"column":1,"offset":18415},"end":{"line":278,"column":157,"offset":18571}}}],"position":{"start":{"line":278,"column":1,"offset":18415},"end":{"line":278,"column":157,"offset":18571}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/dd-wrt_cp.png","alt":"DD-WRT control panel","position":{"start":{"line":280,"column":1,"offset":18573},"end":{"line":280,"column":62,"offset":18634}}}],"position":{"start":{"line":280,"column":1,"offset":18573},"end":{"line":280,"column":62,"offset":18634}}},{"type":"paragraph","children":[{"type":"text","value":"To set up a static IP switch to the Services tab and scroll to the DHCP block.","position":{"start":{"line":282,"column":1,"offset":18636},"end":{"line":282,"column":79,"offset":18714}}}],"position":{"start":{"line":282,"column":1,"offset":18636},"end":{"line":282,"column":79,"offset":18714}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/dd-wrt_dhcp.png","alt":"DD-WRT static IP binding","position":{"start":{"line":284,"column":1,"offset":18716},"end":{"line":284,"column":68,"offset":18783}}}],"position":{"start":{"line":284,"column":1,"offset":18716},"end":{"line":284,"column":68,"offset":18783}}},{"type":"paragraph","children":[{"type":"text","value":"Click the Add button, enter your server's MAC address, its' name, and the IP you want it to have. You can find your server's MAC address by ssh'ing into it and running ","position":{"start":{"line":286,"column":1,"offset":18785},"end":{"line":286,"column":169,"offset":18953}}},{"type":"inlineCode","value":"ip address","position":{"start":{"line":286,"column":169,"offset":18953},"end":{"line":286,"column":181,"offset":18965}}},{"type":"text","value":" again. Right after the link/ether goes your server's MAC address in the form of xx:xx:xx:xx:xx:xx.","position":{"start":{"line":286,"column":181,"offset":18965},"end":{"line":286,"column":280,"offset":19064}}}],"position":{"start":{"line":286,"column":1,"offset":18785},"end":{"line":286,"column":280,"offset":19064}}},{"type":"paragraph","children":[{"type":"text","value":"If you don't plan to make backups outside your home network, we're done. Else, move on to NAT/QoS tab. You'll be dropped into port forwarding configuration by default.","position":{"start":{"line":288,"column":1,"offset":19066},"end":{"line":288,"column":168,"offset":19233}}}],"position":{"start":{"line":288,"column":1,"offset":19066},"end":{"line":288,"column":168,"offset":19233}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/dd-wrt_port_forwarding.png","alt":"DD-WRT port forwarding","position":{"start":{"line":290,"column":1,"offset":19235},"end":{"line":290,"column":77,"offset":19311}}}],"position":{"start":{"line":290,"column":1,"offset":19235},"end":{"line":290,"column":77,"offset":19311}}},{"type":"paragraph","children":[{"type":"text","value":"Again, click the Add button. Enter a name for this port to make telling it apart easier. Choose TCP as the protocol. Leave the next field blank. Choose the port you'll connect to. Pretty much any port you can remember will do here, just don't use the default ssh port (22). Enter your server's internal IP address. It's the one you set in the previous step. Enter the port on the server we'll be connecting to, which is 22 since we'll be doing everything over ssh.","position":{"start":{"line":292,"column":1,"offset":19313},"end":{"line":292,"column":465,"offset":19777}}}],"position":{"start":{"line":292,"column":1,"offset":19313},"end":{"line":292,"column":465,"offset":19777}}},{"type":"paragraph","children":[{"type":"text","value":"To configure any additional ports just follow the last paragraph.\nAnd we're done here.","position":{"start":{"line":294,"column":1,"offset":19779},"end":{"line":295,"column":21,"offset":19865}}}],"position":{"start":{"line":294,"column":1,"offset":19779},"end":{"line":295,"column":21,"offset":19865}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"The clients","position":{"start":{"line":297,"column":4,"offset":19870},"end":{"line":297,"column":15,"offset":19881}}}],"position":{"start":{"line":297,"column":1,"offset":19867},"end":{"line":297,"column":15,"offset":19881}}},{"type":"paragraph","children":[{"type":"text","value":"Now that our server is set up, we need to also set up our clients to back up to the server. Clients, in this case, refer to your computers and phones, as well as tablets and any digital device you can reasonably expect to back up. We'll cover non-Mac computers and Android phones here.","position":{"start":{"line":299,"column":1,"offset":19883},"end":{"line":299,"column":286,"offset":20168}}}],"position":{"start":{"line":299,"column":1,"offset":19883},"end":{"line":299,"column":286,"offset":20168}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Windows Client","position":{"start":{"line":301,"column":5,"offset":20174},"end":{"line":301,"column":19,"offset":20188}}}],"position":{"start":{"line":301,"column":1,"offset":20170},"end":{"line":301,"column":19,"offset":20188}}},{"type":"paragraph","children":[{"type":"text","value":"Remember when I said we're done with the server? I lied. I'm sorry but finding reliable (that means well tested and preferably open source) backup software for Windows turned out to be trickier than I expected. We'll be using ","position":{"start":{"line":303,"column":1,"offset":20190},"end":{"line":303,"column":227,"offset":20416}}},{"type":"emphasis","children":[{"type":"text","value":"rdiff-backup","position":{"start":{"line":303,"column":228,"offset":20417},"end":{"line":303,"column":240,"offset":20429}}}],"position":{"start":{"line":303,"column":227,"offset":20416},"end":{"line":303,"column":241,"offset":20430}}},{"type":"text","value":" which is cross-platform, open-source, and actively used and maintained for 20 years or so. Unfortunately, it's command-line only and requires installation on both client and server.","position":{"start":{"line":303,"column":241,"offset":20430},"end":{"line":303,"column":423,"offset":20612}}}],"position":{"start":{"line":303,"column":1,"offset":20190},"end":{"line":303,"column":423,"offset":20612}}},{"type":"paragraph","children":[{"type":"text","value":"Its' other benefits are fast incremental backups, backups over ssh (and we already set that up), and a transparent storage scheme, meaning you can just open the backup folder and browse old versions of your files. This makes partial restoration easy and since no proprietary formats are used, if you find a software you like better, migration should be fairly easy.","position":{"start":{"line":305,"column":1,"offset":20614},"end":{"line":305,"column":366,"offset":20979}}}],"position":{"start":{"line":305,"column":1,"offset":20614},"end":{"line":305,"column":366,"offset":20979}}},{"type":"paragraph","children":[{"type":"text","value":"First let's install it on the server, start up ssh, and once logged in run ","position":{"start":{"line":307,"column":1,"offset":20981},"end":{"line":307,"column":76,"offset":21056}}},{"type":"inlineCode","value":"sudo apt install rdiff-backup","position":{"start":{"line":307,"column":76,"offset":21056},"end":{"line":307,"column":107,"offset":21087}}},{"type":"text","value":".\nThat's it. Since it's in the Ubuntu repositories and the version there is sufficiently recent, this all we need to do.","position":{"start":{"line":307,"column":107,"offset":21087},"end":{"line":308,"column":119,"offset":21207}}}],"position":{"start":{"line":307,"column":1,"offset":20981},"end":{"line":308,"column":119,"offset":21207}}},{"type":"paragraph","children":[{"type":"text","value":"Now on your Windows computer, first let's check processor architecture. If it's a recent computer and it came with Windows you're pretty much guaranteed to be running 64 bit OS.\nBut double-checking doesn't hurt, so go to Settings app \u003e\u003e System \u003e\u003e About. Check System Type line. In case you're running 32 bit OS (why?) go to ","position":{"start":{"line":310,"column":1,"offset":21209},"end":{"line":311,"column":147,"offset":21533}}},{"type":"link","title":null,"url":"https://github.com/rdiff-backup/rdiff-backup/releases","children":[{"type":"text","value":"rdiff-backup Github releases page","position":{"start":{"line":311,"column":148,"offset":21534},"end":{"line":311,"column":181,"offset":21567}}}],"position":{"start":{"line":311,"column":147,"offset":21533},"end":{"line":311,"column":237,"offset":21623}}},{"type":"text","value":" and download \"rdiff-backup-2.0.5.win32exe.zip\". If you're on 64 bit OS, you need to go to ","position":{"start":{"line":311,"column":237,"offset":21623},"end":{"line":311,"column":328,"offset":21714}}},{"type":"link","title":null,"url":"https://github.com/rdiff-backup/rdiff-backup/issues/494#issuecomment-748511757","children":[{"type":"text","value":"this issue","position":{"start":{"line":311,"column":329,"offset":21715},"end":{"line":311,"column":339,"offset":21725}}}],"position":{"start":{"line":311,"column":328,"offset":21714},"end":{"line":311,"column":420,"offset":21806}}},{"type":"text","value":" and download linked file, since official 64 bit builds aren't available yet.","position":{"start":{"line":311,"column":420,"offset":21806},"end":{"line":311,"column":497,"offset":21883}}}],"position":{"start":{"line":310,"column":1,"offset":21209},"end":{"line":311,"column":497,"offset":21883}}},{"type":"paragraph","children":[{"type":"text","value":"Now create a new directory somewhere, I'll be doing it in the root of the C: drive so I don't have to type long paths. Let's call it \"rdiff-backup\". Extract \"rdiff-backup.exe\" from the zip you downloaded to this directory. Then create a new text file and call it \"rdiff-backup.bat\". Note you may need to enable the display of file extensions in the Explorer options for this to work.\nSince Windows determines file type based on extension, you won't be able to run the backup script if it doesn't end in \"bat\".","position":{"start":{"line":313,"column":1,"offset":21885},"end":{"line":314,"column":126,"offset":22394}}}],"position":{"start":{"line":313,"column":1,"offset":21885},"end":{"line":314,"column":126,"offset":22394}}},{"type":"paragraph","children":[{"type":"text","value":"Open \"rdiff-backup.bat\" in Notepad and paste the following:","position":{"start":{"line":316,"column":1,"offset":22396},"end":{"line":316,"column":60,"offset":22455}}}],"position":{"start":{"line":316,"column":1,"offset":22396},"end":{"line":316,"column":60,"offset":22455}}},{"type":"code","lang":"batch","meta":null,"value":"C:\\rdiff-backup\\rdiff-backup.exe -v5 -b --exclude-globbing-filelist \"%~dpn0.txt\" %1 %2 \u003e\u003e C:\\rdiff-backup\\rdiff-backup.log 2\u003e\u00261","position":{"start":{"line":318,"column":1,"offset":22457},"end":{"line":320,"column":4,"offset":22597}}},{"type":"paragraph","children":[{"type":"text","value":"Adjust the paths as needed. Then create another text file and name it \"rdiff-backup.txt\". This one is the exclude list. All the paths and globs in it will be excluded from backups. I recommend putting your Downloads directory here at least since it's usually fairly large and once you decide to keep a file, you'll probably move it somewhere else.","position":{"start":{"line":322,"column":1,"offset":22599},"end":{"line":322,"column":348,"offset":22946}}}],"position":{"start":{"line":322,"column":1,"offset":22599},"end":{"line":322,"column":348,"offset":22946}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"The paths in exclude list don't support backslashes. Replace them with regular slashes, e.g.:\nC:\\Users\\Ozymandias\\Downloads becomes C:/Users/Ozymandias/Downloads","position":{"start":{"line":324,"column":3,"offset":22950},"end":{"line":325,"column":70,"offset":23113}}}],"position":{"start":{"line":324,"column":3,"offset":22950},"end":{"line":325,"column":70,"offset":23113}}}],"position":{"start":{"line":324,"column":1,"offset":22948},"end":{"line":325,"column":70,"offset":23113}}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"CTRL+SHIFT+Right click","position":{"start":{"line":327,"column":2,"offset":23116},"end":{"line":327,"column":24,"offset":23138}}}],"position":{"start":{"line":327,"column":1,"offset":23115},"end":{"line":327,"column":25,"offset":23139}}},{"type":"text","value":" directory background and select Open PowerShell here. Then type ","position":{"start":{"line":327,"column":25,"offset":23139},"end":{"line":327,"column":90,"offset":23204}}},{"type":"inlineCode","value":".\\rdiff-backup.bat C:/Users/\u003cyour Windows username\u003e \u003cyour server username\u003e@\u003cyour server's IP address\u003e::/media/data/\u003cWindows computer name\u003e/\u003cYour windows username\u003e","position":{"start":{"line":327,"column":90,"offset":23204},"end":{"line":327,"column":254,"offset":23368}}},{"type":"text","value":" and run it.\nNow this will take a while depending on how many files you have.\nDon't worry, subsequent backups will be much faster since they'll only back up modified files. Go have a cup of coffee or watch a movie, once the command completes, check that there aren't critical errors, and we're good.","position":{"start":{"line":327,"column":254,"offset":23368},"end":{"line":329,"column":222,"offset":23667}}}],"position":{"start":{"line":327,"column":1,"offset":23115},"end":{"line":329,"column":222,"offset":23667}}},{"type":"paragraph","children":[{"type":"text","value":"Now typing this command every day to backup would be quite a pain, so let's automate our backups. Open the Start menu and find Task Scheduler. Once it loads, click Create Task... You'll get this dialog:","position":{"start":{"line":331,"column":1,"offset":23669},"end":{"line":331,"column":203,"offset":23871}}}],"position":{"start":{"line":331,"column":1,"offset":23669},"end":{"line":331,"column":203,"offset":23871}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/1_tasksched_new_task.png","alt":"New task dialog","position":{"start":{"line":333,"column":1,"offset":23873},"end":{"line":333,"column":68,"offset":23940}}}],"position":{"start":{"line":333,"column":1,"offset":23873},"end":{"line":333,"column":68,"offset":23940}}},{"type":"paragraph","children":[{"type":"text","value":"Configure this screen like in the screenshot and click triggers.","position":{"start":{"line":335,"column":1,"offset":23942},"end":{"line":335,"column":65,"offset":24006}}}],"position":{"start":{"line":335,"column":1,"offset":23942},"end":{"line":335,"column":65,"offset":24006}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you don't have administrator access on this machine, select\nRun only when user is logged on","position":{"start":{"line":337,"column":3,"offset":24010},"end":{"line":338,"column":34,"offset":24106}}}],"position":{"start":{"line":337,"column":3,"offset":24010},"end":{"line":338,"column":34,"offset":24106}}}],"position":{"start":{"line":337,"column":1,"offset":24008},"end":{"line":338,"column":34,"offset":24106}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/2_tasksched_new_task.png","alt":"Task triggers","position":{"start":{"line":340,"column":1,"offset":24108},"end":{"line":340,"column":66,"offset":24173}}}],"position":{"start":{"line":340,"column":1,"offset":24108},"end":{"line":340,"column":66,"offset":24173}}},{"type":"paragraph","children":[{"type":"text","value":"Click New... and configure as follows and click OK.","position":{"start":{"line":342,"column":1,"offset":24175},"end":{"line":342,"column":52,"offset":24226}}}],"position":{"start":{"line":342,"column":1,"offset":24175},"end":{"line":342,"column":52,"offset":24226}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/3_tasksched_new_task.png","alt":"New trigger","position":{"start":{"line":344,"column":1,"offset":24228},"end":{"line":344,"column":64,"offset":24291}}}],"position":{"start":{"line":344,"column":1,"offset":24228},"end":{"line":344,"column":64,"offset":24291}}},{"type":"paragraph","children":[{"type":"text","value":"On to the Actions tab.","position":{"start":{"line":346,"column":1,"offset":24293},"end":{"line":346,"column":23,"offset":24315}}}],"position":{"start":{"line":346,"column":1,"offset":24293},"end":{"line":346,"column":23,"offset":24315}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/4_tasksched_new_task.png","alt":"Task actions","position":{"start":{"line":348,"column":1,"offset":24317},"end":{"line":348,"column":65,"offset":24381}}}],"position":{"start":{"line":348,"column":1,"offset":24317},"end":{"line":348,"column":65,"offset":24381}}},{"type":"paragraph","children":[{"type":"text","value":"Again, click New... and configure as follows.","position":{"start":{"line":350,"column":1,"offset":24383},"end":{"line":350,"column":46,"offset":24428}}}],"position":{"start":{"line":350,"column":1,"offset":24383},"end":{"line":350,"column":46,"offset":24428}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/5_tasksched_new_task.png","alt":"New action","position":{"start":{"line":352,"column":1,"offset":24430},"end":{"line":352,"column":63,"offset":24492}}}],"position":{"start":{"line":352,"column":1,"offset":24430},"end":{"line":352,"column":63,"offset":24492}}},{"type":"paragraph","children":[{"type":"text","value":"Now, this dialog is non-resizable so I can't show the arguments field completely.\nThere are 2 arguments (the %1 and %2 in the script), separated by space. The first is the directory you want to backup, most likely your User directory. For me it \"C:/Users/Ozymandias\". The second is the directory on the server where to store the backup.\nLike we ran manually it's ","position":{"start":{"line":354,"column":1,"offset":24494},"end":{"line":356,"column":27,"offset":24857}}},{"type":"inlineCode","value":"\u003cyour username on server\u003e@\u003cserver's IP address\u003e::/media/data/\u003cWindows computer name\u003e/\u003cyour Windows username\u003e","position":{"start":{"line":356,"column":27,"offset":24857},"end":{"line":356,"column":137,"offset":24967}}},{"type":"text","value":". For me it's \"ozymandias@192.168.1.102::/media/data/Win10/Ozymandias\"."}],"position":{"start":{"line":354,"column":1,"offset":24494},"end":{"line":356,"column":208,"offset":25038}}},{"type":"paragraph","children":[{"type":"text","value":"Lastly, configure conditions in the Conditions tab and click OK.","position":{"start":{"line":358,"column":1,"offset":25040},"end":{"line":358,"column":65,"offset":25104}}}],"position":{"start":{"line":358,"column":1,"offset":25040},"end":{"line":358,"column":65,"offset":25104}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/6_tasksched_new_task.png","alt":"Task conditions","position":{"start":{"line":360,"column":1,"offset":25106},"end":{"line":360,"column":68,"offset":25173}}}],"position":{"start":{"line":360,"column":1,"offset":25106},"end":{"line":360,"column":68,"offset":25173}}},{"type":"paragraph","children":[{"type":"text","value":"Now one last step. rdiff-backup does not automatically clean old backups, so your backup directory might get out of hand. To avoid that let's set up another scheduled task that runs daily to remove backups let's say older than 3 months.","position":{"start":{"line":362,"column":1,"offset":25175},"end":{"line":362,"column":237,"offset":25411}}}],"position":{"start":{"line":362,"column":1,"offset":25175},"end":{"line":362,"column":237,"offset":25411}}},{"type":"paragraph","children":[{"type":"text","value":"Repeat the task creation steps, just set the time to say midnight (we set the backup to run at 10 PM) and the action to this:","position":{"start":{"line":364,"column":1,"offset":25413},"end":{"line":364,"column":126,"offset":25538}}}],"position":{"start":{"line":364,"column":1,"offset":25413},"end":{"line":364,"column":126,"offset":25538}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/tasksched_cleanup.png","alt":"Clean up action","position":{"start":{"line":366,"column":1,"offset":25540},"end":{"line":366,"column":65,"offset":25604}}}],"position":{"start":{"line":366,"column":1,"offset":25540},"end":{"line":366,"column":65,"offset":25604}}},{"type":"paragraph","children":[{"type":"text","value":"Again, the arguments aren't clearly visible, so here they are:\n\"--remove-older-than 3M \u003cyour backup directory's path\u003e\".\nFor me it's \"--remove-older-than 3M ozymandias@192.168.1.102::/media/data/Win10/Ozymandias\". Do note the capital M and that we're running rdiff-backup.exe, not the batch file."}],"position":{"start":{"line":368,"column":1,"offset":25606},"end":{"line":370,"column":176,"offset":25903}}},{"type":"paragraph","children":[{"type":"text","value":"Congratulations! You've successfully set up automated daily backups of your Windows computer.","position":{"start":{"line":372,"column":1,"offset":25905},"end":{"line":372,"column":94,"offset":25998}}}],"position":{"start":{"line":372,"column":1,"offset":25905},"end":{"line":372,"column":94,"offset":25998}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Linux Client","position":{"start":{"line":374,"column":5,"offset":26004},"end":{"line":374,"column":17,"offset":26016}}}],"position":{"start":{"line":374,"column":1,"offset":26000},"end":{"line":374,"column":17,"offset":26016}}},{"type":"paragraph","children":[{"type":"text","value":"You can use rdiff-backup on Linux as well. It works and it works arguably better than it does on Windows. However, since something just as powerful and exceedingly simple is available for Linux I prefer to use that.","position":{"start":{"line":376,"column":1,"offset":26018},"end":{"line":376,"column":216,"offset":26233}}}],"position":{"start":{"line":376,"column":1,"offset":26018},"end":{"line":376,"column":216,"offset":26233}}},{"type":"paragraph","children":[{"type":"text","value":"I'm talking of course about Back In Time. It's a graphical application written in Python and QT that uses rsync for its' file operations. It also stores snapshots as a transparent versioned mirror of the source file system, but it hard-links unchanged files minimizing disk space usage.","position":{"start":{"line":378,"column":1,"offset":26235},"end":{"line":378,"column":287,"offset":26521}}}],"position":{"start":{"line":378,"column":1,"offset":26235},"end":{"line":378,"column":287,"offset":26521}}},{"type":"paragraph","children":[{"type":"text","value":"Back In Time recommends installing from PPA but as of this writing the PPA hasn't been updated for Focal Fossa, much less Groovy Gorilla. Fortunately, Ubuntu archives contain a recent version, so to install just run ","position":{"start":{"line":380,"column":1,"offset":26523},"end":{"line":380,"column":217,"offset":26739}}},{"type":"inlineCode","value":"sudo apt install backintime-qt4 sshfs","position":{"start":{"line":380,"column":217,"offset":26739},"end":{"line":380,"column":256,"offset":26778}}},{"type":"text","value":".","position":{"start":{"line":380,"column":256,"offset":26778},"end":{"line":380,"column":257,"offset":26779}}}],"position":{"start":{"line":380,"column":1,"offset":26523},"end":{"line":380,"column":257,"offset":26779}}},{"type":"paragraph","children":[{"type":"text","value":"On the first run, you'll be prompted to restore the configuration. Since we're setting up for the first time do decline. You'll be presented with a profile configuration dialog like this:","position":{"start":{"line":382,"column":1,"offset":26781},"end":{"line":382,"column":188,"offset":26968}}}],"position":{"start":{"line":382,"column":1,"offset":26781},"end":{"line":382,"column":188,"offset":26968}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/1_backintime_config.png","alt":"Back In Time profile config","position":{"start":{"line":384,"column":1,"offset":26970},"end":{"line":384,"column":79,"offset":27048}}}],"position":{"start":{"line":384,"column":1,"offset":26970},"end":{"line":384,"column":79,"offset":27048}}},{"type":"paragraph","children":[{"type":"text","value":"Select mode SSH, don't bother with encryption. Back In Time supports transparently encrypting your backups with EncFS but EncFS has long-standing bugs that make it not a secure option.\nAnd since we used Luks encryption on the server this is irrelevant anyway.","position":{"start":{"line":386,"column":1,"offset":27050},"end":{"line":387,"column":75,"offset":27309}}}],"position":{"start":{"line":386,"column":1,"offset":27050},"end":{"line":387,"column":75,"offset":27309}}},{"type":"paragraph","children":[{"type":"text","value":"The host is your servers' IP address, the port is most likely 22, user - your username on the server, the path is ","position":{"start":{"line":389,"column":1,"offset":27311},"end":{"line":389,"column":115,"offset":27425}}},{"type":"inlineCode","value":"/media/data","position":{"start":{"line":389,"column":115,"offset":27425},"end":{"line":389,"column":128,"offset":27438}}},{"type":"text","value":" if you followed this tutorial, leave cipher unchanged and select your private key. That's the one that DOESN'T end in .pub.","position":{"start":{"line":389,"column":128,"offset":27438},"end":{"line":389,"column":252,"offset":27562}}}],"position":{"start":{"line":389,"column":1,"offset":27311},"end":{"line":389,"column":252,"offset":27562}}},{"type":"paragraph","children":[{"type":"text","value":"If you set the passphrase for the key pair enter it in \"SSH private key\" and check \"Save Password to Keyring\". The keyring is secure storage for sensitive information, it will keep your password encrypted until you log in and then make it available to Back In Time so you don't have to enter it every day.","position":{"start":{"line":391,"column":1,"offset":27564},"end":{"line":391,"column":306,"offset":27869}}}],"position":{"start":{"line":391,"column":1,"offset":27564},"end":{"line":391,"column":306,"offset":27869}}},{"type":"paragraph","children":[{"type":"text","value":"Now in the Advanced section enter your computer's name, your username on this computer and you can leave the profile as 1.","position":{"start":{"line":393,"column":1,"offset":27871},"end":{"line":393,"column":123,"offset":27993}}}],"position":{"start":{"line":393,"column":1,"offset":27871},"end":{"line":393,"column":123,"offset":27993}}},{"type":"paragraph","children":[{"type":"text","value":"Do choose a schedule, I chose Every Day at 22:00. This will create a cron job for Back In Time that will run unattended, so you can just forget backups until you need to restore something.","position":{"start":{"line":395,"column":1,"offset":27995},"end":{"line":395,"column":189,"offset":28183}}}],"position":{"start":{"line":395,"column":1,"offset":27995},"end":{"line":395,"column":189,"offset":28183}}},{"type":"paragraph","children":[{"type":"text","value":"Next the Include section. For the sake of simplicity, you can just choose your home folder and be done with it.","position":{"start":{"line":397,"column":1,"offset":28185},"end":{"line":397,"column":112,"offset":28296}}}],"position":{"start":{"line":397,"column":1,"offset":28185},"end":{"line":397,"column":112,"offset":28296}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/2_backintime_config.png","alt":"Back In Time includes","position":{"start":{"line":399,"column":1,"offset":28298},"end":{"line":399,"column":73,"offset":28370}}}],"position":{"start":{"line":399,"column":1,"offset":28298},"end":{"line":399,"column":73,"offset":28370}}},{"type":"paragraph","children":[{"type":"text","value":"The exclude section already contains quite a few entries. These are large directories that you really don't want to back up. Leave it as is, maybe add your Downloads folder, that's it.","position":{"start":{"line":401,"column":1,"offset":28372},"end":{"line":401,"column":185,"offset":28556}}}],"position":{"start":{"line":401,"column":1,"offset":28372},"end":{"line":401,"column":185,"offset":28556}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/3_backintime_config.png","alt":"Back In Time excludes","position":{"start":{"line":403,"column":1,"offset":28558},"end":{"line":403,"column":73,"offset":28630}}}],"position":{"start":{"line":403,"column":1,"offset":28558},"end":{"line":403,"column":73,"offset":28630}}},{"type":"paragraph","children":[{"type":"text","value":"The Auto-remove section is probably the biggest advantage Back In Time has over rdiff-backup. You can configure the automatic removal of old snapshots and not worry about it.","position":{"start":{"line":405,"column":1,"offset":28632},"end":{"line":405,"column":175,"offset":28806}}}],"position":{"start":{"line":405,"column":1,"offset":28632},"end":{"line":405,"column":175,"offset":28806}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/4_backintime_config.png","alt":"Back In Time auto-remove","position":{"start":{"line":407,"column":1,"offset":28808},"end":{"line":407,"column":76,"offset":28883}}}],"position":{"start":{"line":407,"column":1,"offset":28808},"end":{"line":407,"column":76,"offset":28883}}},{"type":"paragraph","children":[{"type":"text","value":"Uncheck \"Older than\" and do check \"Smart remove\". Configure which and how many snapshots you want to keep according to your preference and available disk space.","position":{"start":{"line":409,"column":1,"offset":28885},"end":{"line":409,"column":161,"offset":29045}}}],"position":{"start":{"line":409,"column":1,"offset":28885},"end":{"line":409,"column":161,"offset":29045}}},{"type":"paragraph","children":[{"type":"text","value":"You can leave \"Options\" and \"Expert Options\" tabs as is, in the case of \"Expert Options\" it's better not to mess with. Click OK and you'll be brought to the main interface.","position":{"start":{"line":411,"column":1,"offset":29047},"end":{"line":411,"column":173,"offset":29219}}}],"position":{"start":{"line":411,"column":1,"offset":29047},"end":{"line":411,"column":173,"offset":29219}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/backintime.png","alt":"Back In Time main window","position":{"start":{"line":413,"column":1,"offset":29221},"end":{"line":413,"column":67,"offset":29287}}}],"position":{"start":{"line":413,"column":1,"offset":29221},"end":{"line":413,"column":67,"offset":29287}}},{"type":"paragraph","children":[{"type":"text","value":"Here you can browse existing snapshots, take new snapshots and do a full restore. This is it, at 22:00 Back In Time will run, and tomorrow, and the day after. Your data is secure now.","position":{"start":{"line":415,"column":1,"offset":29289},"end":{"line":415,"column":184,"offset":29472}}}],"position":{"start":{"line":415,"column":1,"offset":29289},"end":{"line":415,"column":184,"offset":29472}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Android client","position":{"start":{"line":417,"column":5,"offset":29478},"end":{"line":417,"column":19,"offset":29492}}}],"position":{"start":{"line":417,"column":1,"offset":29474},"end":{"line":417,"column":19,"offset":29492}}},{"type":"paragraph","children":[{"type":"text","value":"Android is different from desktop operating systems in a lot of ways, but the main issue for our purposes is there are no SFTP clients with automated sync. Well, that's not entirely true. There's ","position":{"start":{"line":419,"column":1,"offset":29494},"end":{"line":419,"column":197,"offset":29690}}},{"type":"link","title":null,"url":"https://play.google.com/store/apps/details?id=dk.tacit.android.foldersync.lite","children":[{"type":"text","value":"FolderSync","position":{"start":{"line":419,"column":198,"offset":29691},"end":{"line":419,"column":208,"offset":29701}}}],"position":{"start":{"line":419,"column":197,"offset":29690},"end":{"line":419,"column":289,"offset":29782}}},{"type":"text","value":" but it contains ads and I don't feel comfortable trusting my sensitive data to ad-supported software.","position":{"start":{"line":419,"column":289,"offset":29782},"end":{"line":419,"column":391,"offset":29884}}}],"position":{"start":{"line":419,"column":1,"offset":29494},"end":{"line":419,"column":391,"offset":29884}}},{"type":"paragraph","children":[{"type":"text","value":"Instead we'll set up ","position":{"start":{"line":421,"column":1,"offset":29886},"end":{"line":421,"column":22,"offset":29907}}},{"type":"link","title":null,"url":"https://syncthing.net/","children":[{"type":"text","value":"Syncthing","position":{"start":{"line":421,"column":23,"offset":29908},"end":{"line":421,"column":32,"offset":29917}}}],"position":{"start":{"line":421,"column":22,"offset":29907},"end":{"line":421,"column":57,"offset":29942}}},{"type":"text","value":". It's free as in beer, free as in speech, well tested, secure, and it even supports some basic file versioning.","position":{"start":{"line":421,"column":57,"offset":29942},"end":{"line":421,"column":169,"offset":30054}}}],"position":{"start":{"line":421,"column":1,"offset":29886},"end":{"line":421,"column":169,"offset":30054}}},{"type":"paragraph","children":[{"type":"text","value":"First, install it on the server and get it running. To do that execute following commands:","position":{"start":{"line":423,"column":1,"offset":30056},"end":{"line":423,"column":91,"offset":30146}}}],"position":{"start":{"line":423,"column":1,"offset":30056},"end":{"line":423,"column":91,"offset":30146}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sudo apt install apt-transport-https","position":{"start":{"line":425,"column":3,"offset":30150},"end":{"line":425,"column":41,"offset":30188}}}],"position":{"start":{"line":425,"column":3,"offset":30150},"end":{"line":425,"column":41,"offset":30188}}}],"position":{"start":{"line":425,"column":1,"offset":30148},"end":{"line":425,"column":41,"offset":30188}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"curl -s https://syncthing.net/release-key.gpg | sudo apt-key add -","position":{"start":{"line":426,"column":3,"offset":30191},"end":{"line":426,"column":71,"offset":30259}}}],"position":{"start":{"line":426,"column":3,"offset":30191},"end":{"line":426,"column":71,"offset":30259}}}],"position":{"start":{"line":426,"column":1,"offset":30189},"end":{"line":426,"column":71,"offset":30259}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"echo \"deb https://apt.syncthing.net/ syncthing stable\" | sudo tee /etc/apt/sources.list.d/syncthing.list","position":{"start":{"line":427,"column":3,"offset":30262},"end":{"line":427,"column":109,"offset":30368}}}],"position":{"start":{"line":427,"column":3,"offset":30262},"end":{"line":427,"column":109,"offset":30368}}}],"position":{"start":{"line":427,"column":1,"offset":30260},"end":{"line":427,"column":109,"offset":30368}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sudo apt update \u0026\u0026 sudo apt install syncthing","position":{"start":{"line":428,"column":3,"offset":30371},"end":{"line":428,"column":50,"offset":30418}}}],"position":{"start":{"line":428,"column":3,"offset":30371},"end":{"line":428,"column":50,"offset":30418}}}],"position":{"start":{"line":428,"column":1,"offset":30369},"end":{"line":428,"column":50,"offset":30418}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sudo systemctl enable syncthing@\u003cyour username\u003e","position":{"start":{"line":429,"column":3,"offset":30421},"end":{"line":429,"column":52,"offset":30470}}}],"position":{"start":{"line":429,"column":3,"offset":30421},"end":{"line":429,"column":52,"offset":30470}}}],"position":{"start":{"line":429,"column":1,"offset":30419},"end":{"line":429,"column":52,"offset":30470}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sudo service syncthing@\u003cyour username\u003e start","position":{"start":{"line":430,"column":3,"offset":30473},"end":{"line":430,"column":49,"offset":30519}}}],"position":{"start":{"line":430,"column":3,"offset":30473},"end":{"line":430,"column":49,"offset":30519}}}],"position":{"start":{"line":430,"column":1,"offset":30471},"end":{"line":430,"column":49,"offset":30519}}}],"position":{"start":{"line":425,"column":1,"offset":30148},"end":{"line":430,"column":49,"offset":30519}}},{"type":"paragraph","children":[{"type":"text","value":"Now, to set it up. On your primary computer run ","position":{"start":{"line":432,"column":1,"offset":30521},"end":{"line":432,"column":49,"offset":30569}}},{"type":"inlineCode","value":"ssh -N -L 8384:127.0.0.1:8384 \u003cyour server's username\u003e@\u003cyour server's IP address\u003e","position":{"start":{"line":432,"column":49,"offset":30569},"end":{"line":432,"column":132,"offset":30652}}},{"type":"text","value":". This will forward connections to your computer's 8384 port to your server's 8384 port. If you get a message that port 8384 is already bound, just change the first 8384 to any number between 8000 and 8999.","position":{"start":{"line":432,"column":132,"offset":30652},"end":{"line":432,"column":338,"offset":30858}}}],"position":{"start":{"line":432,"column":1,"offset":30521},"end":{"line":432,"column":338,"offset":30858}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_initial.png","alt":"syncthing interface","position":{"start":{"line":434,"column":1,"offset":30860},"end":{"line":434,"column":69,"offset":30928}}}],"position":{"start":{"line":434,"column":1,"offset":30860},"end":{"line":434,"column":69,"offset":30928}}},{"type":"paragraph","children":[{"type":"text","value":"Open ","position":{"start":{"line":436,"column":1,"offset":30930},"end":{"line":436,"column":6,"offset":30935}}},{"type":"link","title":null,"url":"http://localhost:8384","children":[{"type":"text","value":"localhost:8384","position":{"start":{"line":436,"column":7,"offset":30936},"end":{"line":436,"column":21,"offset":30950}}}],"position":{"start":{"line":436,"column":6,"offset":30935},"end":{"line":436,"column":45,"offset":30974}}},{"type":"text","value":" in your browser.\nThen click Actions \u003e\u003e Settings.","position":{"start":{"line":436,"column":45,"offset":30974},"end":{"line":437,"column":32,"offset":31023}}}],"position":{"start":{"line":436,"column":1,"offset":30930},"end":{"line":437,"column":32,"offset":31023}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_settings.png","alt":"syncthing settings","position":{"start":{"line":439,"column":1,"offset":31025},"end":{"line":439,"column":69,"offset":31093}}}],"position":{"start":{"line":439,"column":1,"offset":31025},"end":{"line":439,"column":69,"offset":31093}}},{"type":"paragraph","children":[{"type":"text","value":"Change Default Folder Path to ","position":{"start":{"line":441,"column":1,"offset":31095},"end":{"line":441,"column":31,"offset":31125}}},{"type":"inlineCode","value":"/media/data/syncthing","position":{"start":{"line":441,"column":31,"offset":31125},"end":{"line":441,"column":54,"offset":31148}}},{"type":"text","value":" or whatever is the path to your external disk. Then switch to the GUI tab.","position":{"start":{"line":441,"column":54,"offset":31148},"end":{"line":441,"column":129,"offset":31223}}}],"position":{"start":{"line":441,"column":1,"offset":31095},"end":{"line":441,"column":129,"offset":31223}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_settings_gui.png","alt":"syncthing GUI tab","position":{"start":{"line":443,"column":1,"offset":31225},"end":{"line":443,"column":72,"offset":31296}}}],"position":{"start":{"line":443,"column":1,"offset":31225},"end":{"line":443,"column":72,"offset":31296}}},{"type":"paragraph","children":[{"type":"text","value":"Enter a username and a strong password. It's also a good idea to note down the password in your password manager. You may also set the theme to something easier on the eyes. Now, click Save. The page will reload and you'll be prompted for the username and password you just set up.","position":{"start":{"line":445,"column":1,"offset":31298},"end":{"line":445,"column":282,"offset":31579}}}],"position":{"start":{"line":445,"column":1,"offset":31298},"end":{"line":445,"column":282,"offset":31579}}},{"type":"paragraph","children":[{"type":"text","value":"You may also want to remove the Default Folder now since we don't plan on storing files on the internal disk. To do that click on Default Folder to expand it, then Edit \u003e\u003e Remove. Confirm and we're done with the server for now.","position":{"start":{"line":447,"column":1,"offset":31581},"end":{"line":447,"column":228,"offset":31808}}}],"position":{"start":{"line":447,"column":1,"offset":31581},"end":{"line":447,"column":228,"offset":31808}}},{"type":"paragraph","children":[{"type":"text","value":"On the Android side, we'll be using ","position":{"start":{"line":449,"column":1,"offset":31810},"end":{"line":449,"column":37,"offset":31846}}},{"type":"link","title":null,"url":"https://play.google.com/store/apps/details?id=com.github.catfriend1.syncthingandroid","children":[{"type":"text","value":"Syncthing-Fork","position":{"start":{"line":449,"column":38,"offset":31847},"end":{"line":449,"column":52,"offset":31861}}}],"position":{"start":{"line":449,"column":37,"offset":31846},"end":{"line":449,"column":139,"offset":31948}}},{"type":"text","value":". It also ","position":{"start":{"line":449,"column":139,"offset":31948},"end":{"line":449,"column":149,"offset":31958}}},{"type":"link","title":null,"url":"https://f-droid.org/en/packages/com.github.catfriend1.syncthingandroid/","children":[{"type":"text","value":"available on F-Droid","position":{"start":{"line":449,"column":150,"offset":31959},"end":{"line":449,"column":170,"offset":31979}}}],"position":{"start":{"line":449,"column":149,"offset":31958},"end":{"line":449,"column":244,"offset":32053}}},{"type":"text","value":" and it's a good idea to set that up if you plan to also back up apps (app backup requires root though).","position":{"start":{"line":449,"column":244,"offset":32053},"end":{"line":449,"column":348,"offset":32157}}}],"position":{"start":{"line":449,"column":1,"offset":31810},"end":{"line":449,"column":348,"offset":32157}}},{"type":"paragraph","children":[{"type":"text","value":"Install and open it. Then click Add Folder button in the top right of the interface. For this example, we'll be setting up the camera folder (DCIM), but the steps are the same for any other location. Also note, if you use something like ","position":{"start":{"line":451,"column":1,"offset":32159},"end":{"line":451,"column":238,"offset":32396}}},{"type":"link","title":null,"url":"https://play.google.com/store/apps/details?id=com.google.android.apps.photos","children":[{"type":"text","value":"Google Photos","position":{"start":{"line":451,"column":239,"offset":32397},"end":{"line":451,"column":252,"offset":32410}}}],"position":{"start":{"line":451,"column":238,"offset":32396},"end":{"line":451,"column":331,"offset":32489}}},{"type":"text","value":" or ","position":{"start":{"line":451,"column":331,"offset":32489},"end":{"line":451,"column":335,"offset":32493}}},{"type":"link","title":null,"url":"https://nextcloud.com/","children":[{"type":"text","value":"Nextcloud","position":{"start":{"line":451,"column":336,"offset":32494},"end":{"line":451,"column":345,"offset":32503}}}],"position":{"start":{"line":451,"column":335,"offset":32493},"end":{"line":451,"column":370,"offset":32528}}},{"type":"text","value":" to continuously upload your photos and free up space on your device, using syncthing to backup your camera folder doesn't make sense even with file versioning, because once the photos are deleted from the phone the changes will be propagated to the server.","position":{"start":{"line":451,"column":370,"offset":32528},"end":{"line":451,"column":627,"offset":32785}}}],"position":{"start":{"line":451,"column":1,"offset":32159},"end":{"line":451,"column":627,"offset":32785}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_fork_add_folder.png","alt":"Syncthing-Fork Edit Folder","position":{"start":{"line":453,"column":1,"offset":32787},"end":{"line":453,"column":84,"offset":32870}}}],"position":{"start":{"line":453,"column":1,"offset":32787},"end":{"line":453,"column":84,"offset":32870}}},{"type":"paragraph","children":[{"type":"text","value":"Enter the name of the folder. This doesn't much matter, it's only here so you know which folder you're working with. Then select the folder path. Do nothing with devices for now. For the Folder Type, I suggest you choose Send Only because we won't be making changes server-side. Do make sure Watch for changes is ON. Now select the versioning scheme and we're done. If you only transfer your photos manually choose Trashcan versioning with a sufficiently large Cleanout window to recover deleted files. Otherwise, if you clean out this folder more often, choose Simple scheme with something like 3 versions to keep per file.","position":{"start":{"line":455,"column":1,"offset":32872},"end":{"line":455,"column":625,"offset":33496}}}],"position":{"start":{"line":455,"column":1,"offset":32872},"end":{"line":455,"column":625,"offset":33496}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_fork_add_device.png","alt":"Syncthing-Fork add device","position":{"start":{"line":457,"column":1,"offset":33498},"end":{"line":457,"column":83,"offset":33580}}}],"position":{"start":{"line":457,"column":1,"offset":33498},"end":{"line":457,"column":83,"offset":33580}}},{"type":"paragraph","children":[{"type":"text","value":"Now, switch to the Devices tab, and in the top right tap the Add Device button. On your computer, where you have syncthing web interface open, click Actions \u003e\u003e Show ID. On your phone click the QR code button in the right of the top row of the Add Device screen. Grant the Camera permission and scan the QR code on your computer's screen. Enter the name for the Device, that's your server and I named it humpty. Choose folders you want to sync.\nSave your changes by tapping the checkmark button at the top.","position":{"start":{"line":459,"column":1,"offset":33582},"end":{"line":460,"column":62,"offset":34087}}}],"position":{"start":{"line":459,"column":1,"offset":33582},"end":{"line":460,"column":62,"offset":34087}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/syncthing_accept.png","alt":"Syncthing accept device","position":{"start":{"line":462,"column":1,"offset":34089},"end":{"line":462,"column":72,"offset":34160}}}],"position":{"start":{"line":462,"column":1,"offset":34089},"end":{"line":462,"column":72,"offset":34160}}},{"type":"paragraph","children":[{"type":"text","value":"Back on your computer, close the ID screen and you should see a notification about adding a device. Click add, switch to Sharing tab in the dialog that pops up, and mark Auto Accept before saving. This is so you don't have to go back to the web interface when adding new folders. That's it, now you can close the web interface. We won't be going back to it unless something goes wrong.","position":{"start":{"line":464,"column":1,"offset":34162},"end":{"line":464,"column":386,"offset":34547}}}],"position":{"start":{"line":464,"column":1,"offset":34162},"end":{"line":464,"column":386,"offset":34547}}},{"type":"paragraph","children":[{"type":"text","value":"On your phone, configure any additional folders you want to back up, paying attention to the versioning scheme you choose and selecting your server in the devices section.","position":{"start":{"line":466,"column":1,"offset":34549},"end":{"line":466,"column":172,"offset":34720}}}],"position":{"start":{"line":466,"column":1,"offset":34549},"end":{"line":466,"column":172,"offset":34720}}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Backing up Apps","position":{"start":{"line":468,"column":6,"offset":34727},"end":{"line":468,"column":21,"offset":34742}}}],"position":{"start":{"line":468,"column":1,"offset":34722},"end":{"line":468,"column":21,"offset":34742}}},{"type":"paragraph","children":[{"type":"text","value":"You'll need to root for this, no way around it. There are backup solutions that claim to work without root and they fail on restore more often than not. Especially if you want to restore a backup on a new device for a seamless upgrade, these apps will fail you.","position":{"start":{"line":470,"column":1,"offset":34744},"end":{"line":470,"column":262,"offset":35005}}}],"position":{"start":{"line":470,"column":1,"offset":34744},"end":{"line":470,"column":262,"offset":35005}}},{"type":"paragraph","children":[{"type":"text","value":"Rooted app backup solutions boil down to ","position":{"start":{"line":472,"column":1,"offset":35007},"end":{"line":472,"column":42,"offset":35048}}},{"type":"link","title":null,"url":"https://play.google.com/store/apps/details?id=com.keramidas.TitaniumBackup","children":[{"type":"text","value":"TitaniumBackup","position":{"start":{"line":472,"column":43,"offset":35049},"end":{"line":472,"column":57,"offset":35063}}}],"position":{"start":{"line":472,"column":42,"offset":35048},"end":{"line":472,"column":134,"offset":35140}}},{"type":"text","value":" and ","position":{"start":{"line":472,"column":134,"offset":35140},"end":{"line":472,"column":139,"offset":35145}}},{"type":"link","title":null,"url":"https://f-droid.org/en/packages/com.machiav3lli.backup/","children":[{"type":"text","value":"OAndBackupX","position":{"start":{"line":472,"column":140,"offset":35146},"end":{"line":472,"column":151,"offset":35157}}}],"position":{"start":{"line":472,"column":139,"offset":35145},"end":{"line":472,"column":209,"offset":35215}}},{"type":"text","value":". These apps are pretty similar in what they do, with TitaniumBackup being older and theoretically more powerful, with a really horrible interface, and OAndBackupX being open source, easier to use, and judging from online reviews - more reliable when restoring. Personally, I've had great success with both of these apps, whether I'm restoring a backup on the same device after flashing a new ROM or setting up a new device from a backup.","position":{"start":{"line":472,"column":209,"offset":35215},"end":{"line":472,"column":647,"offset":35653}}}],"position":{"start":{"line":472,"column":1,"offset":35007},"end":{"line":472,"column":647,"offset":35653}}},{"type":"paragraph","children":[{"type":"text","value":"Since OAndBackupX is open-source, it's what we'll cover in this article. Alas, it's only available on ","position":{"start":{"line":474,"column":1,"offset":35655},"end":{"line":474,"column":103,"offset":35757}}},{"type":"link","title":null,"url":"https://f-droid.org/","children":[{"type":"text","value":"F-Droid","position":{"start":{"line":474,"column":104,"offset":35758},"end":{"line":474,"column":111,"offset":35765}}}],"position":{"start":{"line":474,"column":103,"offset":35757},"end":{"line":474,"column":134,"offset":35788}}},{"type":"text","value":", so you'll have to set that up.","position":{"start":{"line":474,"column":134,"offset":35788},"end":{"line":474,"column":166,"offset":35820}}}],"position":{"start":{"line":474,"column":1,"offset":35655},"end":{"line":474,"column":166,"offset":35820}}},{"type":"paragraph","children":[{"type":"text","value":"Another thing to keep in mind is that most Android apps cannot be backed up. Or rather, restored. If an app depends on a remote server to function and/or uses encrypted keystore to store credentials, it will not function upon restore. There's really nothing you can do about this, and to save time and battery, better don't even try to back up these apps. Examples would be most Android games, Facebook, and Nextcloud.","position":{"start":{"line":476,"column":1,"offset":35822},"end":{"line":476,"column":419,"offset":36240}}}],"position":{"start":{"line":476,"column":1,"offset":35822},"end":{"line":476,"column":419,"offset":36240}}},{"type":"paragraph","children":[{"type":"text","value":"With that out of the way, we're ready to back up some apps. When you open OAndBackupX, you'll be presented with this:","position":{"start":{"line":478,"column":1,"offset":36242},"end":{"line":478,"column":118,"offset":36359}}}],"position":{"start":{"line":478,"column":1,"offset":36242},"end":{"line":478,"column":118,"offset":36359}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/oandbackupx_home.png","alt":"OAndBackupX home","position":{"start":{"line":480,"column":1,"offset":36361},"end":{"line":480,"column":65,"offset":36425}}}],"position":{"start":{"line":480,"column":1,"offset":36361},"end":{"line":480,"column":65,"offset":36425}}},{"type":"paragraph","children":[{"type":"text","value":"Firstly, note the little \"i\" in the top right. By clicking on it, you'll get a lot of links to learn in-depth about this app and ways to use it. The next thing of note is the action bar at the bottom of the screen. Click the cog in the action bar to access settings.","position":{"start":{"line":482,"column":1,"offset":36427},"end":{"line":482,"column":267,"offset":36693}}}],"position":{"start":{"line":482,"column":1,"offset":36427},"end":{"line":482,"column":267,"offset":36693}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/oandbackupx_settings.png","alt":"OAndBackupX settings","position":{"start":{"line":484,"column":1,"offset":36695},"end":{"line":484,"column":73,"offset":36767}}}],"position":{"start":{"line":484,"column":1,"offset":36695},"end":{"line":484,"column":73,"offset":36767}}},{"type":"paragraph","children":[{"type":"text","value":"You'll do alright with defaults, but you'll want to change the location of backups. For that tap User preferences.","position":{"start":{"line":486,"column":1,"offset":36769},"end":{"line":486,"column":115,"offset":36883}}}],"position":{"start":{"line":486,"column":1,"offset":36769},"end":{"line":486,"column":115,"offset":36883}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/oandbackupx_folder_selection.png","alt":"OAndBackupX User preferences","position":{"start":{"line":488,"column":1,"offset":36885},"end":{"line":488,"column":89,"offset":36973}}}],"position":{"start":{"line":488,"column":1,"offset":36885},"end":{"line":488,"column":89,"offset":36973}}},{"type":"paragraph","children":[{"type":"text","value":"Now tap the Backup folder and choose a location on your ","position":{"start":{"line":490,"column":1,"offset":36975},"end":{"line":490,"column":57,"offset":37031}}},{"type":"emphasis","children":[{"type":"text","value":"internal","position":{"start":{"line":490,"column":58,"offset":37032},"end":{"line":490,"column":66,"offset":37040}}}],"position":{"start":{"line":490,"column":57,"offset":37031},"end":{"line":490,"column":67,"offset":37041}}},{"type":"text","value":" SD card. You'll want an internal SD card to avoid permission issues, or you can format your external SD card as internal storage.","position":{"start":{"line":490,"column":67,"offset":37041},"end":{"line":490,"column":197,"offset":37171}}}],"position":{"start":{"line":490,"column":1,"offset":36975},"end":{"line":490,"column":197,"offset":37171}}},{"type":"paragraph","children":[{"type":"text","value":"Next, go back to OAndBackupX's home screen. On the action bar at the bottom tap the calendar-looking icon to schedule a backup.","position":{"start":{"line":492,"column":1,"offset":37173},"end":{"line":492,"column":128,"offset":37300}}}],"position":{"start":{"line":492,"column":1,"offset":37173},"end":{"line":492,"column":128,"offset":37300}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/oandbackupx_new_schedule.png","alt":"OAndBackupX scheduled backups","position":{"start":{"line":494,"column":1,"offset":37302},"end":{"line":494,"column":86,"offset":37387}}}],"position":{"start":{"line":494,"column":1,"offset":37302},"end":{"line":494,"column":86,"offset":37387}}},{"type":"paragraph","children":[{"type":"text","value":"Tap the red button that looks like a new alarm. This will create a new scheduled backup titled All apps. Tap on this entry to edit it.","position":{"start":{"line":496,"column":1,"offset":37389},"end":{"line":496,"column":135,"offset":37523}}}],"position":{"start":{"line":496,"column":1,"offset":37389},"end":{"line":496,"column":135,"offset":37523}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/oandbackupx_schedule.png","alt":"OAndBackupX scheduled backup edit","position":{"start":{"line":498,"column":1,"offset":37525},"end":{"line":498,"column":86,"offset":37610}}}],"position":{"start":{"line":498,"column":1,"offset":37525},"end":{"line":498,"column":86,"offset":37610}}},{"type":"paragraph","children":[{"type":"text","value":"Choose when you want the backups to happen. Some time at night when you're not using the phone is a good idea. Leave the interval as 1 day to have backups every day. Leave the filter as All apps. Set the Backup mode as APK and Data. Tap CUSTOM LIST to select which apps to backup. Then mark Enable toggle and we're done.","position":{"start":{"line":500,"column":1,"offset":37612},"end":{"line":500,"column":321,"offset":37932}}}],"position":{"start":{"line":500,"column":1,"offset":37612},"end":{"line":500,"column":321,"offset":37932}}},{"type":"paragraph","children":[{"type":"text","value":"Now, every night the apps you chose will be backed up to a folder you specified, and if you set up Syncthing to sync that folder,\nsynced to your server.","position":{"start":{"line":502,"column":1,"offset":37934},"end":{"line":503,"column":23,"offset":38086}}}],"position":{"start":{"line":502,"column":1,"offset":37934},"end":{"line":503,"column":23,"offset":38086}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Bonus: Back up Your Online Accounts","position":{"start":{"line":505,"column":4,"offset":38091},"end":{"line":505,"column":39,"offset":38126}}}],"position":{"start":{"line":505,"column":1,"offset":38088},"end":{"line":505,"column":39,"offset":38126}}},{"type":"paragraph","children":[{"type":"text","value":"Now that all your devices are backed up, you probably still have a lot of data stored in the cloud. You may think it's safe. It's almost certainly backed up. However, what if you get locked out of your account? Hacked? Or simply the cloud provider messes up big time, or worse - goes down? It's a good idea to have a local copy of your cloud data.","position":{"start":{"line":507,"column":1,"offset":38128},"end":{"line":507,"column":348,"offset":38475}}}],"position":{"start":{"line":507,"column":1,"offset":38128},"end":{"line":507,"column":348,"offset":38475}}},{"type":"paragraph","children":[{"type":"text","value":"Alas, not all cloud providers provide an easy way to export your data. Much less the means to this automatically. I'm looking at you Facebook and Twitter. They only offer archives that take forever to generate and can only be downloaded for a limited time through a link sent to your email. This is sub-par, to say the least. On the other hand, Google and some other cloud providers offer most if not all of your data through open, free APIs that can be easily automated. We'll focus on these.","position":{"start":{"line":509,"column":1,"offset":38477},"end":{"line":509,"column":494,"offset":38970}}}],"position":{"start":{"line":509,"column":1,"offset":38477},"end":{"line":509,"column":494,"offset":38970}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cloud Storage","position":{"start":{"line":511,"column":5,"offset":38976},"end":{"line":511,"column":18,"offset":38989}}}],"position":{"start":{"line":511,"column":1,"offset":38972},"end":{"line":511,"column":18,"offset":38989}}},{"type":"paragraph","children":[{"type":"text","value":"We'll be using ","position":{"start":{"line":513,"column":1,"offset":38991},"end":{"line":513,"column":16,"offset":39006}}},{"type":"link","title":null,"url":"https://rclone.org/","children":[{"type":"text","value":"rclone","position":{"start":{"line":513,"column":17,"offset":39007},"end":{"line":513,"column":23,"offset":39013}}}],"position":{"start":{"line":513,"column":16,"offset":39006},"end":{"line":513,"column":45,"offset":39035}}},{"type":"text","value":" to sync our Google Drive to a local directory. It's a one-way sync, but for backup purposes, this will do great. Do note that rclone supports many more cloud providers than just Google. If you use Dropbox or OneDrive, they can be synced as well. For the sake of brevity, we'll focus on Google Drive since it's one of the most popular and one of the most complicated to set up.","position":{"start":{"line":513,"column":45,"offset":39035},"end":{"line":513,"column":422,"offset":39412}}}],"position":{"start":{"line":513,"column":1,"offset":38991},"end":{"line":513,"column":422,"offset":39412}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/google_api_console.png","alt":"Google API Console","position":{"start":{"line":515,"column":1,"offset":39414},"end":{"line":515,"column":69,"offset":39482}}}],"position":{"start":{"line":515,"column":1,"offset":39414},"end":{"line":515,"column":69,"offset":39482}}},{"type":"paragraph","children":[{"type":"text","value":"Before we begin, go to ","position":{"start":{"line":517,"column":1,"offset":39484},"end":{"line":517,"column":24,"offset":39507}}},{"type":"link","title":null,"url":"https://console.developers.google.com/","children":[{"type":"text","value":"Google API Console","position":{"start":{"line":517,"column":25,"offset":39508},"end":{"line":517,"column":43,"offset":39526}}}],"position":{"start":{"line":517,"column":24,"offset":39507},"end":{"line":517,"column":84,"offset":39567}}},{"type":"text","value":" and create a new project. I suggest you name the new project after your server so it's easy to remember.","position":{"start":{"line":517,"column":84,"offset":39567},"end":{"line":517,"column":189,"offset":39672}}}],"position":{"start":{"line":517,"column":1,"offset":39484},"end":{"line":517,"column":189,"offset":39672}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/google_api_console_new_project.png","alt":"New Project","position":{"start":{"line":519,"column":1,"offset":39674},"end":{"line":519,"column":74,"offset":39747}}}],"position":{"start":{"line":519,"column":1,"offset":39674},"end":{"line":519,"column":74,"offset":39747}}},{"type":"paragraph","children":[{"type":"text","value":"Click ENABLE APIs AND SERVICES, search for Drive, and enable \"Google Drive API\". Then click Credentials in the sidebar.\nNow we need to configure OAuth Consent Screen. This is something you need to do once and it doesn't much matter because we'll be the only ones using these APIs. Click the \"CONFIGURE CONSENT SCREEN\" button near the top right. Select \"EXTERNAL\" and click \"CREATE\". Enter the application name, I suggest you use the project (server) name. Select contact emails as these are required, just enter your email. Again, it doesn't really matter as you'll be the only user. Click \"SAVE\" and then click \"OAuth consent screen\" in the sidebar. This is very important - click \"PUBLISH APP\". Dismiss the pop-up and then click \"Credentials\" in the sidebar again.","position":{"start":{"line":521,"column":1,"offset":39749},"end":{"line":522,"column":647,"offset":40515}}}],"position":{"start":{"line":521,"column":1,"offset":39749},"end":{"line":522,"column":647,"offset":40515}}},{"type":"paragraph","children":[{"type":"text","value":"Now click the \"CREATE CREDENTIALS\" button at the top. Select OAuth Client ID. Select \"Desktop app\" and enter rclone as the name, then click Create. You'll get a pop-up with your client ID and client secret. Leave it at that for now, we're ready to set up the server.","position":{"start":{"line":524,"column":1,"offset":40517},"end":{"line":524,"column":267,"offset":40783}}}],"position":{"start":{"line":524,"column":1,"offset":40517},"end":{"line":524,"column":267,"offset":40783}}},{"type":"paragraph","children":[{"type":"text","value":"ssh into your server. Execute ","position":{"start":{"line":526,"column":1,"offset":40785},"end":{"line":526,"column":31,"offset":40815}}},{"type":"inlineCode","value":"curl https://rclone.org/install.sh | sudo bash","position":{"start":{"line":526,"column":31,"offset":40815},"end":{"line":526,"column":79,"offset":40863}}},{"type":"text","value":". Now run ","position":{"start":{"line":526,"column":79,"offset":40863},"end":{"line":526,"column":89,"offset":40873}}},{"type":"inlineCode","value":"rclone config","position":{"start":{"line":526,"column":89,"offset":40873},"end":{"line":526,"column":104,"offset":40888}}},{"type":"text","value":". Choose \"n\" for new remote and enter a name. I'll be using \"gdrive\". Enter \"drive\" for Google Drive. Now paste the client ID we got from the Google API console and press \"Enter\". Do the same for client secret. Choose 1 as the scope. Leave \"root_folder_id\" blank. Leave the \"service_account_file\" blank as well. Now, for the advanced config.","position":{"start":{"line":526,"column":104,"offset":40888},"end":{"line":526,"column":445,"offset":41229}}}],"position":{"start":{"line":526,"column":1,"offset":40785},"end":{"line":526,"column":445,"offset":41229}}},{"type":"paragraph","children":[{"type":"text","value":"Normally you shouldn't need to edit these values with the exception of Google Docs formats. By default rclone exports Google Docs as Microsoft Office documents. If instead, you want them in the Open Document format, press \"y\" to edit the advanced config. Leave all values as defaults. When prompted for export formats enter \"odt,ods,odp,svg\" and proceed to leave the rest as default too.","position":{"start":{"line":528,"column":1,"offset":41231},"end":{"line":528,"column":388,"offset":41618}}}],"position":{"start":{"line":528,"column":1,"offset":41231},"end":{"line":528,"column":388,"offset":41618}}},{"type":"paragraph","children":[{"type":"text","value":"When prompted to use auto config choose \"n\" for no since we're working on a remote machine. You'll get a rather long URL, copy and paste it into your browser.","position":{"start":{"line":530,"column":1,"offset":41620},"end":{"line":530,"column":159,"offset":41778}}}],"position":{"start":{"line":530,"column":1,"offset":41620},"end":{"line":530,"column":159,"offset":41778}}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/content/backup-server/google_oauth_warning.png","alt":"OAuth warning","position":{"start":{"line":532,"column":1,"offset":41780},"end":{"line":532,"column":66,"offset":41845}}}],"position":{"start":{"line":532,"column":1,"offset":41780},"end":{"line":532,"column":66,"offset":41845}}},{"type":"paragraph","children":[{"type":"text","value":"You'll get a very scary warning, don't worry about it. It's only here because we haven't submitted the app for verification and we don't really need to go through that hassle. Click Advanced and then \"Go to \u003capp name you entered earlier\u003e\". Agree to permission requests and when you get a verification code, copy it. Now paste it into your terminal. Press \"Enter\" to refuse to configure as Team Drive, press \"Enter\" again to confirm everything is OK, and then enter \"q\" to quit rclone configuration.","position":{"start":{"line":534,"column":1,"offset":41847},"end":{"line":534,"column":501,"offset":42347}}}],"position":{"start":{"line":534,"column":1,"offset":41847},"end":{"line":534,"column":501,"offset":42347}}},{"type":"paragraph","children":[{"type":"text","value":"Now to create a directory where we'll store Google Drive backup execute ","position":{"start":{"line":536,"column":1,"offset":42349},"end":{"line":536,"column":73,"offset":42421}}},{"type":"inlineCode","value":"mkdir -p /media/data/Google/Drive","position":{"start":{"line":536,"column":73,"offset":42421},"end":{"line":536,"column":108,"offset":42456}}},{"type":"text","value":". Let's run initial sync with ","position":{"start":{"line":536,"column":108,"offset":42456},"end":{"line":536,"column":138,"offset":42486}}},{"type":"inlineCode","value":"rclone sync gdrive:/ /media/data/Google/Drive/","position":{"start":{"line":536,"column":138,"offset":42486},"end":{"line":536,"column":186,"offset":42534}}},{"type":"text","value":".\nThis will take a while depending on the size of your Google Drive.\nSubsequent syncs will be much faster because they'll only download changes.","position":{"start":{"line":536,"column":186,"offset":42534},"end":{"line":538,"column":76,"offset":42678}}}],"position":{"start":{"line":536,"column":1,"offset":42349},"end":{"line":538,"column":76,"offset":42678}}},{"type":"paragraph","children":[{"type":"text","value":"When the command completes, we want to set up some automation.\nRun ","position":{"start":{"line":540,"column":1,"offset":42680},"end":{"line":541,"column":5,"offset":42747}}},{"type":"inlineCode","value":"crontab -e","position":{"start":{"line":541,"column":5,"offset":42747},"end":{"line":541,"column":17,"offset":42759}}},{"type":"text","value":" and when prompted select nano as the editor.\nYou only need to do this once, subsequent runs will drop you straight into nano. Scroll to the end of the file and enter the following ","position":{"start":{"line":541,"column":17,"offset":42759},"end":{"line":542,"column":136,"offset":42940}}},{"type":"inlineCode","value":"0 */1 * * * rclone sync gdrive:/ /media/data/Google/Drive \u003e\u003e /home/ozymandias/rclone.log 2\u003e\u00261","position":{"start":{"line":542,"column":136,"offset":42940},"end":{"line":542,"column":231,"offset":43035}}},{"type":"text","value":". Explanation: cron is a daemon that runs specified commands at specified intervals. ","position":{"start":{"line":542,"column":231,"offset":43035},"end":{"line":542,"column":316,"offset":43120}}},{"type":"inlineCode","value":"0 */1 * * *","position":{"start":{"line":542,"column":316,"offset":43120},"end":{"line":542,"column":329,"offset":43133}}},{"type":"text","value":" means run every hour. The command is rclone sync we already ran. The ","position":{"start":{"line":542,"column":329,"offset":43133},"end":{"line":542,"column":399,"offset":43203}}},{"type":"inlineCode","value":"\u003e\u003e /home/ozymandias/rclone.log","position":{"start":{"line":542,"column":399,"offset":43203},"end":{"line":542,"column":431,"offset":43235}}},{"type":"text","value":" redirects the output of the command to a log file. Do replace \"ozymandias\" with your user name. Finally, ","position":{"start":{"line":542,"column":431,"offset":43235},"end":{"line":542,"column":537,"offset":43341}}},{"type":"inlineCode","value":"2\u003e\u00261","position":{"start":{"line":542,"column":537,"offset":43341},"end":{"line":542,"column":543,"offset":43347}}},{"type":"text","value":" concatenates errors and standard output into the same stream we redirect to the log file. Do check this log file sometimes to make sure everything is working.","position":{"start":{"line":542,"column":543,"offset":43347},"end":{"line":542,"column":702,"offset":43506}}}],"position":{"start":{"line":540,"column":1,"offset":42680},"end":{"line":542,"column":702,"offset":43506}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Google Photos","position":{"start":{"line":544,"column":5,"offset":43512},"end":{"line":544,"column":18,"offset":43525}}}],"position":{"start":{"line":544,"column":1,"offset":43508},"end":{"line":544,"column":18,"offset":43525}}},{"type":"paragraph","children":[{"type":"text","value":"Since Google Photos got decoupled from Google Drive, backing them up is a bit of a pain in the behind. We could use rclone to do this as well since recent versions of rclone have support for the new API. However, rclone would only back up the files, without the metadata and your Google Photos creations.","position":{"start":{"line":546,"column":1,"offset":43527},"end":{"line":546,"column":305,"offset":43831}}}],"position":{"start":{"line":546,"column":1,"offset":43527},"end":{"line":546,"column":305,"offset":43831}}},{"type":"paragraph","children":[{"type":"text","value":"Instead we'll use ","position":{"start":{"line":548,"column":1,"offset":43833},"end":{"line":548,"column":19,"offset":43851}}},{"type":"link","title":null,"url":"https://github.com/gilesknap/gphotos-sync","children":[{"type":"text","value":"gphotos-sync","position":{"start":{"line":548,"column":20,"offset":43852},"end":{"line":548,"column":32,"offset":43864}}}],"position":{"start":{"line":548,"column":19,"offset":43851},"end":{"line":548,"column":76,"offset":43908}}},{"type":"text","value":". It will back up pretty much all of Google Photos data, and since it can only download there's no risk of messing up your library.","position":{"start":{"line":548,"column":76,"offset":43908},"end":{"line":548,"column":207,"offset":44039}}}],"position":{"start":{"line":548,"column":1,"offset":43833},"end":{"line":548,"column":207,"offset":44039}}},{"type":"paragraph","children":[{"type":"text","value":"Again, this app uses OAuth to authorize with Google, so we need to create a client ID and client secret for it. We also need to enable Photos Library API for our project.","position":{"start":{"line":550,"column":1,"offset":44041},"end":{"line":550,"column":171,"offset":44211}}}],"position":{"start":{"line":550,"column":1,"offset":44041},"end":{"line":550,"column":171,"offset":44211}}},{"type":"paragraph","children":[{"type":"text","value":"In Google API console click Dashboard in the sidebar, then ENABLE APIs AND SERVICES, and search for Photos Library API. Enable it.","position":{"start":{"line":552,"column":1,"offset":44213},"end":{"line":552,"column":131,"offset":44343}}}],"position":{"start":{"line":552,"column":1,"offset":44213},"end":{"line":552,"column":131,"offset":44343}}},{"type":"paragraph","children":[{"type":"text","value":"In the Credentials section click CREATE CREDENTIALS, select \"OAuth client ID\" and then select \"Desktop app\". Enter \"gphotos-sync\" as the name and click CREATE. You can close the pop-up because for this app we'll be downloading formatted credentials file.\nIn the \"OAuth 2.0 Client IDs\" section, on the line that says \"gphotos-sync\" click the download button (the downwards facing arrow). Save the file as \"client_secret.json\" in your downloads directory.","position":{"start":{"line":554,"column":1,"offset":44345},"end":{"line":555,"column":199,"offset":44798}}}],"position":{"start":{"line":554,"column":1,"offset":44345},"end":{"line":555,"column":199,"offset":44798}}},{"type":"paragraph","children":[{"type":"text","value":"Now we're ready to install and authorize gphotos-sync. Let's create a directory where we'll store Google Photos data by running ","position":{"start":{"line":557,"column":1,"offset":44800},"end":{"line":557,"column":129,"offset":44928}}},{"type":"inlineCode","value":"mkdir -p /media/data/Google/Photos","position":{"start":{"line":557,"column":129,"offset":44928},"end":{"line":557,"column":165,"offset":44964}}},{"type":"text","value":". Then run ","position":{"start":{"line":557,"column":165,"offset":44964},"end":{"line":557,"column":176,"offset":44975}}},{"type":"inlineCode","value":"sudo snap install gphotos-sync","position":{"start":{"line":557,"column":176,"offset":44975},"end":{"line":557,"column":208,"offset":45007}}},{"type":"text","value":" to install the app. Run ","position":{"start":{"line":557,"column":208,"offset":45007},"end":{"line":557,"column":233,"offset":45032}}},{"type":"inlineCode","value":"sudo snap connect gphotos-sync:removable-media","position":{"start":{"line":557,"column":233,"offset":45032},"end":{"line":557,"column":281,"offset":45080}}},{"type":"text","value":" to enable access to the external hard drive. Now, run ","position":{"start":{"line":557,"column":281,"offset":45080},"end":{"line":557,"column":336,"offset":45135}}},{"type":"inlineCode","value":"gphotos-sync","position":{"start":{"line":557,"column":336,"offset":45135},"end":{"line":557,"column":350,"offset":45149}}},{"type":"text","value":" without arguments once to create and symlink the snap directories. Create the config directory with ","position":{"start":{"line":557,"column":350,"offset":45149},"end":{"line":557,"column":451,"offset":45250}}},{"type":"inlineCode","value":"mkdir -p ~","position":{"start":{"line":557,"column":451,"offset":45250},"end":{"line":557,"column":463,"offset":45262}}},{"type":"text","value":". Then on the computer where you downloaded the credentials open a new terminal in your downloads directory and execute ","position":{"start":{"line":557,"column":463,"offset":45262},"end":{"line":557,"column":583,"offset":45382}}},{"type":"inlineCode","value":"scp client_secret.json \u003cyour username on the server\u003e@\u003cyour server's IP address\u003e:/snap/gphotos-sync/current/.config/gphotos-sync","position":{"start":{"line":557,"column":583,"offset":45382},"end":{"line":557,"column":712,"offset":45511}}},{"type":"text","value":".","position":{"start":{"line":557,"column":712,"offset":45511},"end":{"line":557,"column":713,"offset":45512}}}],"position":{"start":{"line":557,"column":1,"offset":44800},"end":{"line":557,"column":713,"offset":45512}}},{"type":"paragraph","children":[{"type":"text","value":"To authorize and perform initial sync run ","position":{"start":{"line":559,"column":1,"offset":45514},"end":{"line":559,"column":43,"offset":45556}}},{"type":"inlineCode","value":"gphotos-sync /media/data/Google/Photos","position":{"start":{"line":559,"column":43,"offset":45556},"end":{"line":559,"column":83,"offset":45596}}},{"type":"text","value":". Once again you'll get a long URL you need to copy and paste into your browser. And once again you'll get a scary warning. Click Advanced and proceed to authorize the app.\nWhen you get the authorization code, copy and paste it into your ssh session. Now, go make a cup of coffee while all your photos are downloaded.","position":{"start":{"line":559,"column":83,"offset":45596},"end":{"line":560,"column":145,"offset":45913}}}],"position":{"start":{"line":559,"column":1,"offset":45514},"end":{"line":560,"column":145,"offset":45913}}},{"type":"paragraph","children":[{"type":"text","value":"Once you enjoyed your coffee and the command completed, let's automate this for the future. Again, we'll do this with a cron job. Run ","position":{"start":{"line":562,"column":1,"offset":45915},"end":{"line":562,"column":135,"offset":46049}}},{"type":"inlineCode","value":"crontab -e","position":{"start":{"line":562,"column":135,"offset":46049},"end":{"line":562,"column":147,"offset":46061}}},{"type":"text","value":", scroll to last line and enter ","position":{"start":{"line":562,"column":147,"offset":46061},"end":{"line":562,"column":179,"offset":46093}}},{"type":"inlineCode","value":"15 */1 * * * gphotos-sync /media/data/Google/Photos \u003e\u003e /dev/null 2\u003e\u00261","position":{"start":{"line":562,"column":179,"offset":46093},"end":{"line":562,"column":250,"offset":46164}}},{"type":"text","value":". Explanation: we've set it to run 15 minutes past every hour. Since gphotos-sync keeps log in the destination directory, we redirect its' output to /dev/null, i.e. we discard it.","position":{"start":{"line":562,"column":250,"offset":46164},"end":{"line":562,"column":429,"offset":46343}}}],"position":{"start":{"line":562,"column":1,"offset":45915},"end":{"line":562,"column":429,"offset":46343}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"EMail","position":{"start":{"line":564,"column":5,"offset":46349},"end":{"line":564,"column":10,"offset":46354}}}],"position":{"start":{"line":564,"column":1,"offset":46345},"end":{"line":564,"column":10,"offset":46354}}},{"type":"paragraph","children":[{"type":"text","value":"If you use a desktop email client, you can probably skip this step since your emails will be included in the desktop backup. Otherwise, read on. We'll use the mbsync utility included in the isync package to download our emails via IMAP to a local directory. This package is in the Ubuntu archives, so to install it just run ","position":{"start":{"line":566,"column":1,"offset":46356},"end":{"line":566,"column":325,"offset":46680}}},{"type":"inlineCode","value":"sudo apt install isync","position":{"start":{"line":566,"column":325,"offset":46680},"end":{"line":566,"column":349,"offset":46704}}},{"type":"text","value":".","position":{"start":{"line":566,"column":349,"offset":46704},"end":{"line":566,"column":350,"offset":46705}}}],"position":{"start":{"line":566,"column":1,"offset":46356},"end":{"line":566,"column":350,"offset":46705}}},{"type":"paragraph","children":[{"type":"text","value":"Now create a file called \".mbsyncrc\" in your home directory on the server and put the following in it. To do that run ","position":{"start":{"line":568,"column":1,"offset":46707},"end":{"line":568,"column":119,"offset":46825}}},{"type":"inlineCode","value":"cd ~ \u0026\u0026 nano .mbsyncrc","position":{"start":{"line":568,"column":119,"offset":46825},"end":{"line":568,"column":143,"offset":46849}}},{"type":"text","value":".","position":{"start":{"line":568,"column":143,"offset":46849},"end":{"line":568,"column":144,"offset":46850}}}],"position":{"start":{"line":568,"column":1,"offset":46707},"end":{"line":568,"column":144,"offset":46850}}},{"type":"code","lang":"bash","meta":null,"value":"IMAPAccount     ozymandias\nHost            imap.gmail.com\nUser            \u003cyour username\u003e@gmail.com\nPass            \u003cyour password*\u003e\nSSLType         IMAPS\nCertificateFile /etc/ssl/certs/ca-certificates.crt\n\nIMAPStore gmail\nAccount   ozymandias\n\nMaildirStore local\nSubFolders   Verbatim\nPath         /media/data/Google/GMail\nInbox        /media/data/Google/GMail/Inbox\n\nChannel   ozymandias\nMaster    :gmail:\nSlave     :local:\nPatterns  *\nCreate    Both\nSyncState *","position":{"start":{"line":570,"column":1,"offset":46852},"end":{"line":592,"column":4,"offset":47328}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"You really shouldn't put your password in plain-text files.\nInstead enable 2-factor authentication and create an app password for this.","position":{"start":{"line":594,"column":3,"offset":47332},"end":{"line":595,"column":78,"offset":47469}}}],"position":{"start":{"line":594,"column":3,"offset":47332},"end":{"line":595,"column":78,"offset":47469}}}],"position":{"start":{"line":594,"column":1,"offset":47330},"end":{"line":595,"column":78,"offset":47469}}},{"type":"paragraph","children":[{"type":"text","value":"You'll also need to enable IMAP in the Gmail settings. In Gmail click the cog in the top right \u003e\u003e See all settings \u003e\u003e Forwarding and POP/IMAP, select Enable IMAP and click Save changes.","position":{"start":{"line":597,"column":1,"offset":47471},"end":{"line":597,"column":186,"offset":47656}}}],"position":{"start":{"line":597,"column":1,"offset":47471},"end":{"line":597,"column":186,"offset":47656}}},{"type":"paragraph","children":[{"type":"text","value":"Let's create the mail directory with ","position":{"start":{"line":599,"column":1,"offset":47658},"end":{"line":599,"column":38,"offset":47695}}},{"type":"inlineCode","value":"mkdir -p /media/data/Google/Gmail","position":{"start":{"line":599,"column":38,"offset":47695},"end":{"line":599,"column":73,"offset":47730}}},{"type":"text","value":" and run initial sync with ","position":{"start":{"line":599,"column":73,"offset":47730},"end":{"line":599,"column":100,"offset":47757}}},{"type":"inlineCode","value":"mbsync --all","position":{"start":{"line":599,"column":100,"offset":47757},"end":{"line":599,"column":114,"offset":47771}}},{"type":"text","value":". Once it completes let's make a cron job for this task too. Again, run ","position":{"start":{"line":599,"column":114,"offset":47771},"end":{"line":599,"column":186,"offset":47843}}},{"type":"inlineCode","value":"crontab -e","position":{"start":{"line":599,"column":186,"offset":47843},"end":{"line":599,"column":198,"offset":47855}}},{"type":"text","value":", scroll to last line and put ","position":{"start":{"line":599,"column":198,"offset":47855},"end":{"line":599,"column":228,"offset":47885}}},{"type":"inlineCode","value":"30 */1 * * * mbsync --all \u003e\u003e /home/ozymandias/mbsync.log 2\u003e\u00261","position":{"start":{"line":599,"column":228,"offset":47885},"end":{"line":599,"column":291,"offset":47948}}},{"type":"text","value":". This time the cron line should already be pretty clear. We're running mbsync 30 minutes past every hour and saving log in our home directory.","position":{"start":{"line":599,"column":291,"offset":47948},"end":{"line":599,"column":434,"offset":48091}}}],"position":{"start":{"line":599,"column":1,"offset":47658},"end":{"line":599,"column":434,"offset":48091}}},{"type":"paragraph","children":[{"type":"text","value":"We used Gmail here, but with minor changes to the .mbsyncrc, you can use any mail provider that supports IMAP. Which in this day and age should mean all of them.","position":{"start":{"line":601,"column":1,"offset":48093},"end":{"line":601,"column":162,"offset":48254}}}],"position":{"start":{"line":601,"column":1,"offset":48093},"end":{"line":601,"column":162,"offset":48254}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Calendar and Contacts","position":{"start":{"line":603,"column":5,"offset":48260},"end":{"line":603,"column":26,"offset":48281}}}],"position":{"start":{"line":603,"column":1,"offset":48256},"end":{"line":603,"column":26,"offset":48281}}},{"type":"paragraph","children":[{"type":"text","value":"Last but not least we're going to back up our calendars and contacts. For this task, we'll use a small Python utility call ","position":{"start":{"line":605,"column":1,"offset":48283},"end":{"line":605,"column":124,"offset":48406}}},{"type":"link","title":null,"url":"http://vdirsyncer.pimutils.org/en/stable/","children":[{"type":"text","value":"vdirsyncer","position":{"start":{"line":605,"column":125,"offset":48407},"end":{"line":605,"column":135,"offset":48417}}}],"position":{"start":{"line":605,"column":124,"offset":48406},"end":{"line":605,"column":179,"offset":48461}}},{"type":"text","value":". It supports Google, iCloud, and many more providers as long as they provide their data over CalDAV and CardDAV protocols. Again, for the sake of this article, we'll set up Google Calendar and Google Contacts backup.","position":{"start":{"line":605,"column":179,"offset":48461},"end":{"line":605,"column":396,"offset":48678}}}],"position":{"start":{"line":605,"column":1,"offset":48283},"end":{"line":605,"column":396,"offset":48678}}},{"type":"paragraph","children":[{"type":"text","value":"First, go to Google API console, click ENABLE APIs AND SERVICES, search for CalDAV API and Google Contacts CardDAV API, and enable them both. Then, in the Credentials section create credentials of type OAuth client ID, select Desktop app, and enter \"vdirsyncer\" as the name.","position":{"start":{"line":607,"column":1,"offset":48680},"end":{"line":607,"column":275,"offset":48954}}}],"position":{"start":{"line":607,"column":1,"offset":48680},"end":{"line":607,"column":275,"offset":48954}}},{"type":"paragraph","children":[{"type":"text","value":"Then, install vdirsyncer with ","position":{"start":{"line":609,"column":1,"offset":48956},"end":{"line":609,"column":31,"offset":48986}}},{"type":"inlineCode","value":"sudo apt update \u0026\u0026 sudo apt install vdirsyncer python3-requests-oauthlib","position":{"start":{"line":609,"column":31,"offset":48986},"end":{"line":609,"column":105,"offset":49060}}},{"type":"text","value":". Create configuration directory - ","position":{"start":{"line":609,"column":105,"offset":49060},"end":{"line":609,"column":140,"offset":49095}}},{"type":"inlineCode","value":"mkdir -p ~/.vdirsyncer","position":{"start":{"line":609,"column":140,"offset":49095},"end":{"line":609,"column":164,"offset":49119}}},{"type":"text","value":". Now, let's create a config file with ","position":{"start":{"line":609,"column":164,"offset":49119},"end":{"line":609,"column":203,"offset":49158}}},{"type":"inlineCode","value":"nano ~/.vdirsyncer/config","position":{"start":{"line":609,"column":203,"offset":49158},"end":{"line":609,"column":230,"offset":49185}}},{"type":"text","value":". Put the following in the config file, replacing \u003cclient ID\u003e and \u003cclient secret\u003e with values you got from Google API console:","position":{"start":{"line":609,"column":230,"offset":49185},"end":{"line":609,"column":360,"offset":49315}}}],"position":{"start":{"line":609,"column":1,"offset":48956},"end":{"line":609,"column":360,"offset":49315}}},{"type":"code","lang":"bash","meta":null,"value":"[general]\nstatus_path = \"~/.vdirsyncer/status/\"\n\n[storage local_calendar]\ntype = \"filesystem\"\npath = \"/media/data/Google/Calendar\"\nfileext = \".ics\"\n\n[storage local_contacts]\ntype = \"filesystem\"\npath = \"/media/data/Google/Contacts\"\nfileext = \".vcf\"\n\n[storage google_calendar]\ntype = \"google_calendar\"\ntoken_file = \"~/.vdirsyncer/gcal.auth\"\nclient_id  = \"\u003cclient ID\u003e\"\nclient_secret = \"\u003cclient secret\u003e\"\n\n[storage google_contacts]\ntype = \"google_contacts\"\ntoken_file = \"~/.vdirsyncer/gcard.auth\"\nclient_id  = \"\u003cclient ID\u003e\"\nclient_secret = \"\u003cclient secret\u003e\"\n\n[pair calendar]\na = \"local_calendar\"\nb = \"google_calendar\"\ncollections = [\"from a\", \"from b\"]\nconflict_resolution = \"b wins\"\nmetadata = [\"color\", \"displayname\"]\n\n[pair contacts]\na = \"local_contacts\"\nb = \"google_contacts\"\ncollections = [\"from a\", \"from b\"]\nconflict_resolution = \"b wins\"\nmetadata = [\"displayname\"]","position":{"start":{"line":611,"column":1,"offset":49317},"end":{"line":650,"column":4,"offset":50196}}},{"type":"paragraph","children":[{"type":"text","value":"Save with ","position":{"start":{"line":652,"column":1,"offset":50198},"end":{"line":652,"column":11,"offset":50208}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL+o","position":{"start":{"line":652,"column":12,"offset":50209},"end":{"line":652,"column":18,"offset":50215}}}],"position":{"start":{"line":652,"column":11,"offset":50208},"end":{"line":652,"column":19,"offset":50216}}},{"type":"text","value":" ","position":{"start":{"line":652,"column":19,"offset":50216},"end":{"line":652,"column":20,"offset":50217}}},{"type":"emphasis","children":[{"type":"text","value":"Enter","position":{"start":{"line":652,"column":21,"offset":50218},"end":{"line":652,"column":26,"offset":50223}}}],"position":{"start":{"line":652,"column":20,"offset":50217},"end":{"line":652,"column":27,"offset":50224}}},{"type":"text","value":" and close with ","position":{"start":{"line":652,"column":27,"offset":50224},"end":{"line":652,"column":43,"offset":50240}}},{"type":"emphasis","children":[{"type":"text","value":"CTRL+x","position":{"start":{"line":652,"column":44,"offset":50241},"end":{"line":652,"column":50,"offset":50247}}}],"position":{"start":{"line":652,"column":43,"offset":50240},"end":{"line":652,"column":51,"offset":50248}}},{"type":"text","value":". Run ","position":{"start":{"line":652,"column":51,"offset":50248},"end":{"line":652,"column":57,"offset":50254}}},{"type":"inlineCode","value":"vdirsyncer discover","position":{"start":{"line":652,"column":57,"offset":50254},"end":{"line":652,"column":78,"offset":50275}}},{"type":"text","value":". On the first run you'll once again get a long URL you should copy and open in your browser. You'll get a scary warning about an unverified app, just click Advanced and proceed. Once you grant permission for your calendar, copy the code and paste it into the terminal. Then you'll be prompted for each calendar in your Google account since it doesn't exist locally. Just enter \"y\" to create it every time.","position":{"start":{"line":652,"column":78,"offset":50275},"end":{"line":652,"column":484,"offset":50681}}}],"position":{"start":{"line":652,"column":1,"offset":50198},"end":{"line":652,"column":484,"offset":50681}}},{"type":"paragraph","children":[{"type":"text","value":"Once the calendars are configured you'll get a long authorization URL for your contacts. The steps to take are exactly the same as for the calendar.","position":{"start":{"line":654,"column":1,"offset":50683},"end":{"line":654,"column":149,"offset":50831}}}],"position":{"start":{"line":654,"column":1,"offset":50683},"end":{"line":654,"column":149,"offset":50831}}},{"type":"paragraph","children":[{"type":"text","value":"Now that vdirsyncer is authorized and aware of all our calendars and address books, we're ready to sync. Run ","position":{"start":{"line":656,"column":1,"offset":50833},"end":{"line":656,"column":110,"offset":50942}}},{"type":"inlineCode","value":"vdirsyncer sync","position":{"start":{"line":656,"column":110,"offset":50942},"end":{"line":656,"column":127,"offset":50959}}},{"type":"text","value":" and then ","position":{"start":{"line":656,"column":127,"offset":50959},"end":{"line":656,"column":137,"offset":50969}}},{"type":"inlineCode","value":"vdirsyncer metasync","position":{"start":{"line":656,"column":137,"offset":50969},"end":{"line":656,"column":158,"offset":50990}}},{"type":"text","value":". Now, to automate this, let's create a cron job. Run ","position":{"start":{"line":656,"column":158,"offset":50990},"end":{"line":656,"column":212,"offset":51044}}},{"type":"inlineCode","value":"crontab -e","position":{"start":{"line":656,"column":212,"offset":51044},"end":{"line":656,"column":224,"offset":51056}}},{"type":"text","value":", scroll to the last line, and put this in it:","position":{"start":{"line":656,"column":224,"offset":51056},"end":{"line":656,"column":270,"offset":51102}}}],"position":{"start":{"line":656,"column":1,"offset":50833},"end":{"line":656,"column":270,"offset":51102}}},{"type":"code","lang":"crontab","meta":null,"value":"40 */1 * * * vdirsyncer sync \u003e\u003e /home/ozymandias/vdirsyncer.log 2\u003e\u00261\n50 */1 * * * vdirsyncer metasync \u003e\u003e /home/ozymandias/vdirsyncer.log 2\u003e\u00261","position":{"start":{"line":658,"column":1,"offset":51104},"end":{"line":661,"column":4,"offset":51260}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Closing Words","position":{"start":{"line":663,"column":4,"offset":51265},"end":{"line":663,"column":17,"offset":51278}}}],"position":{"start":{"line":663,"column":1,"offset":51262},"end":{"line":663,"column":17,"offset":51278}}},{"type":"paragraph","children":[{"type":"text","value":"Data security is very important, as losing your data in this digital age can be devastating. By following this tutorial you took a major step in ensuring your data survives no matter what.","position":{"start":{"line":665,"column":1,"offset":51280},"end":{"line":665,"column":189,"offset":51468}}}],"position":{"start":{"line":665,"column":1,"offset":51280},"end":{"line":665,"column":189,"offset":51468}}},{"type":"paragraph","children":[{"type":"text","value":"Ideally, you'd have a similar setup somewhere away from home for off-site backups. So that in the event of a disaster such as flooding, fire, or similar event that could physically destroy your backup server and devices, you'd still have a copy of your data that wasn't affected by this event. You should consider this going forward.","position":{"start":{"line":667,"column":1,"offset":51470},"end":{"line":667,"column":334,"offset":51803}}}],"position":{"start":{"line":667,"column":1,"offset":51470},"end":{"line":667,"column":334,"offset":51803}}},{"type":"paragraph","children":[{"type":"text","value":"I tried to make this tutorial as exhaustive as I could, even so, since I don't own any Apple devices, I couldn't cover those. I may have unintentionally made omissions elsewhere as well.\nIf you see an error or have something to add, all of my articles are hosted on ","position":{"start":{"line":669,"column":1,"offset":51805},"end":{"line":670,"column":80,"offset":52071}}},{"type":"link","title":null,"url":"https://github.com/OzymandiasTheGreat/tech.tomasrav.me","children":[{"type":"text","value":"GitHub","position":{"start":{"line":670,"column":81,"offset":52072},"end":{"line":670,"column":87,"offset":52078}}}],"position":{"start":{"line":670,"column":80,"offset":52071},"end":{"line":670,"column":144,"offset":52135}}},{"type":"text","value":" under Creative Commons Attribution license version 4.0. So feel free to make edits and pull requests, you will get attribution at the end of the article.","position":{"start":{"line":670,"column":144,"offset":52135},"end":{"line":670,"column":298,"offset":52289}}}],"position":{"start":{"line":669,"column":1,"offset":51805},"end":{"line":670,"column":298,"offset":52289}}},{"type":"paragraph","children":[{"type":"text","value":"Congratulations on securing your data, stay safe out there!","position":{"start":{"line":672,"column":1,"offset":52291},"end":{"line":672,"column":60,"offset":52350}}}],"position":{"start":{"line":672,"column":1,"offset":52291},"end":{"line":672,"column":60,"offset":52350}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":673,"column":1,"offset":52351}}}}},"__N_SSG":true},"page":"/posts/[year]/[month]/[day]/[slug]","query":{"year":"2021","month":"02","day":"04","slug":"backup-server"},"buildId":"Jumf4OQwyLXS86pnKuxQZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>